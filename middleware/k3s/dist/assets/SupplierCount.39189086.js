var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,i=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,s=(t,a,i)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[a]=i,o=(e,t)=>{for(var a in t||(t={}))r.call(t,a)&&s(e,a,t[a]);if(i)for(var a of i(t))l.call(t,a)&&s(e,a,t[a]);return e};import{_ as n}from"./BaseForm.bc55ad6b.js";/* empty css                                                             */import{s as p,_ as u}from"./index.ab904951.js";import{u as d}from"./vue-router.91336ba9.js";import{a as m}from"./axios.7b768d2b.js";import{d as c}from"./index.6efc7880.js";import{g as b,f as g}from"./filter.c2c8f0b9.js";import{s as h,g as f}from"./businessRule.60794e55.js";import{g as v,j as y,D as j,t as S,B as w,o as C,a5 as k,a6 as z,e as x,c as D,w as F,v as N,S as O}from"./@vue.23a4bd1a.js";import"./TempHtml.vue_vue&type=script&lang.67ba229f.js";import"./echarts.e8cef18b.js";import"./tslib.34a40861.js";import"./zrender.5bef55a0.js";import"./vue3-print-nb.eccf419a.js";import"./element-plus.b44d97a8.js";import"./lodash.d7ab6f48.js";import"./dayjs.bad04745.js";import"./resize-observer-polyfill.d4249adb.js";import"./normalize-wheel.1d574cd1.js";import"./mitt.32ebca9f.js";import"./async-validator.1fa0d626.js";import"./@popperjs.192dcd39.js";import"./vue.6d04e91d.js";import"./nprogress.8b4927f9.js";import"./vuex.c868d4e0.js";import"./default-passive-events.74004992.js";function U(e,t,a,i){return{form:{inline:!0,labelWidth:"100px",list:[{type:"SELECT",placeholder:"供应商名称",key:"supplierUuid",props:{value:"uuid",label:"supplierName"},list:()=>i.value},{type:"LINKAGETIME",design:{width:"240px"},keys:["startTime","endTime"],key:"createTime",config:{"start-placeholder":"制单开始时间","end-placeholder":"制单结束时间"}},{placeholder:"门店",type:"SELECT",list:()=>a.value,props:{label:"name",value:"uuid"},config:{multiple:!0},key:"businessUuid"}]}}}var _={name:"SupplierCount",setup(e,s){const n=v(null),u=v([]);v([]);const w=new Date;let C=b(w,30,!0);const{dict:k}=p.state.common,z=v([]),x=d(),D=y({isClear:!1,islook:0,pageSize:[],options:!0,pagination:{},design:{width:"470px"},activeName:"first",dict:k,otherData:{},tableData:[],loading:!1,formConfig:{"show-summary":!0,border:!0},deepSearchTable:U(0,0,z,u),submitForm:{"page.currentPage":1,"page.pageSize":10,startTime:C[0],endTime:g(new Date),businessUuid:[]}}),F=async()=>{D.loading=!0;try{let e=D.submitForm,{businessUuid:t}=e,a=((e,t)=>{var a={};for(var s in e)r.call(e,s)&&t.indexOf(s)<0&&(a[s]=e[s]);if(null!=e&&i)for(var s of i(e))t.indexOf(s)<0&&l.call(e,s)&&(a[s]=e[s]);return a})(e,["businessUuid"]);t=h(t);let s=o({businessUuid:t},a);const n=await function(e){return m.get("/gateway/chain-store/supplierSettleDetail/queryPageStatistic",{params:e})}(s);D.tableData=n.list,D.pagination.total=n.totalElements,D.loading=!1}catch(e){return D.loading=!1,e}},N=v("");j((async()=>{O(),_(),window.addEventListener("resize",_,!1),F(),T(),E(),D.pageSize=[10,20,50,100]}));const O=async()=>{let{storeUuid:e}=p.state.common.info;D.submitForm.storeUuid=e},_=()=>{N.value=document.documentElement.clientHeight-200},T=async()=>{const e=await p.dispatch("common/mechanism");z.value=e,f(e,D,D.deepSearchTable.form)},E=async()=>{const e=await c();u.value=e},P=e=>{D.submitForm.supplierOtherUuid=e,p.commit("common/SUPPLIERCOUNTINFO",D.submitForm),x.push({path:"/finance-manage/supplier-settlement",query:{islook:0}})};return L=o({querySupplierDetails:P,supplierList:u},S(D)),t(L,a({supplierCountListData:F,addBatchNumber:()=>{x.push({name:"BatchNumberAdd"})},exportExcel:()=>{},businessMechanismList:z,form:n,handlSizeChange:e=>{D.submitForm["page.pageSize"]=e,D.submitForm["page.currentPage"]=1,F()},handlcurrentChange:e=>{D.submitForm["page.currentPage"]=e,F()},getSupplierListData:E,tableHeight:N,handleClick:e=>{P(e.supplierUuid)}}));var L}};const T={class:"business-manage"},E={class:"stencil"},P={class:"main"},L={class:"top"},B={class:"scollbar"},H=O("查看"),I={key:1,class:"block"};var q=u(_,[["render",function(e,t,a,i,r,l){const s=n,o=w("el-table-column"),p=w("el-button"),u=w("el-table"),d=w("el-pagination");return C(),k("div",T,[z("div",E,[z("div",P,[z("div",L,[x(s,{"form-data":e.deepSearchTable.form,"submit-form":e.submitForm,"onUpdate:submit-form":t[0]||(t[0]=t=>e.submitForm=t),options:e.options,select:i.supplierCountListData,isClear:e.isClear},null,8,["form-data","submit-form","options","select","isClear"])]),z("div",B,[i.tableHeight?(C(),D(u,{key:0,data:e.tableData,border:"",style:{width:"100%"},height:i.tableHeight,onCellDblclick:i.handleClick},{default:F((()=>[x(o,{prop:"date"},{default:F((()=>[x(o,{prop:"supplierName",width:"176",label:"供应商名称"})])),_:1}),x(o,{label:"入库统计",align:"center"},{default:F((()=>[x(o,{prop:"rkCagetory1",label:"商品种类"}),x(o,{prop:"rkNum",label:"商品数量",width:"150",align:"right"}),x(o,{prop:"rkShouldBeSettled",label:"应结算金额",width:"150",align:"right"}),x(o,{prop:"rkHasBeenSettled",label:"已结算金额",width:"150",align:"right"}),x(o,{prop:"rkNoSettled",label:"未结算金额",width:"150",align:"right"})])),_:1}),x(o,{label:"退货统计",align:"center"},{default:F((()=>[x(o,{prop:"thCagetory1",label:"商品种类"}),x(o,{prop:"thNum",align:"right",width:"150",label:"商品数量"}),x(o,{prop:"thShouldBeSettled",label:"应结算金额",width:"150",align:"right"}),x(o,{prop:"thHasBeenSettled",label:"已结算金额",width:"150",align:"right"}),x(o,{prop:"thNoSettled",label:"未结算金额",width:"150",align:"right"})])),_:1}),x(o,{label:"总计",align:"center"},{default:F((()=>[x(o,{prop:"allNoSettled",label:"未结算金额",width:"150",align:"right"})])),_:1}),x(o,null,{default:F((()=>[x(o,{fixed:"right",width:"50",label:"操作"},{default:F((e=>[x(p,{type:"text",onClick:t=>i.querySupplierDetails(e.row.supplierUuid)},{default:F((()=>[H])),_:2},1032,["onClick"])])),_:1})])),_:1})])),_:1},8,["data","height","onCellDblclick"])):N("",!0),e.pagination.total?(C(),k("div",I,[x(d,{"current-page":e.submitForm["page.currentPage"],"page-sizes":e.pageSize,"page-size":e.submitForm["page.pageSize"],layout:"total, sizes, prev, pager, next, jumper",total:e.pagination.total,onSizeChange:i.handlSizeChange,onCurrentChange:i.handlcurrentChange},null,8,["current-page","page-sizes","page-size","total","onSizeChange","onCurrentChange"])])):N("",!0)])])])])}],["__scopeId","data-v-fd84fb9a"]]);export{q as default};
