var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,i=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,o=(t,a,i)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[a]=i,s=(e,t)=>{for(var a in t||(t={}))l.call(t,a)&&o(e,a,t[a]);if(i)for(var a of i(t))r.call(t,a)&&o(e,a,t[a]);return e},n=(e,i)=>t(e,a(i)),u=(e,t)=>{var a={};for(var o in e)l.call(e,o)&&t.indexOf(o)<0&&(a[o]=e[o]);if(null!=e&&i)for(var o of i(e))t.indexOf(o)<0&&r.call(e,o)&&(a[o]=e[o]);return a};import{_ as m}from"./SelectTable.80e1f2f6.js";import{u as d}from"./vuex.c868d4e0.js";import{b as c,u as p}from"./vue-router.91336ba9.js";import"./element-resize-detector.5b0b5621.js";import{r as b,s as g,t as h}from"./index.6a02aeaf.js";import{_ as y}from"./BaseTable.36f55649.js";import{j as f,t as k,o as D,c as v,G as w,a5 as P,e as N,F as T,n as F,D as S,B as C,a6 as U,w as j,N as x,z as O,v as M,S as q,a9 as I,aa as A}from"./@vue.23a4bd1a.js";import{_ as R,r as G}from"./index.ab904951.js";import{_}from"./BaseForm.bc55ad6b.js";import{d as z}from"./element-plus.b44d97a8.js";import{s as E}from"./businessRule.60794e55.js";import{h as B}from"./moment.08a7f518.js";import"./lodash.d7ab6f48.js";import"./dayjs.bad04745.js";import"./batch-processor.94093b2a.js";import"./axios.7b768d2b.js";import"./sortablejs.621e50ab.js";import"./echarts.e8cef18b.js";import"./tslib.34a40861.js";import"./zrender.5bef55a0.js";import"./vue3-print-nb.eccf419a.js";import"./nprogress.8b4927f9.js";import"./default-passive-events.74004992.js";import"./resize-observer-polyfill.d4249adb.js";import"./normalize-wheel.1d574cd1.js";import"./mitt.32ebca9f.js";import"./async-validator.1fa0d626.js";import"./@popperjs.192dcd39.js";import"./vue.6d04e91d.js";import"./TempHtml.vue_vue&type=script&lang.67ba229f.js";var L=R({name:"BatchNumStock",props:{tableData:{type:Array,default:[]},submitForm:{type:Object,default:{"page.currentPage":1,"page.pageSize":10}},getTableData:Function},emits:["getTableData"],setup(e,{emit:t}){const a=f({columns:[{type:"index",title:"序号",formConfig:{width:50},fixed:"left"},{title:"批号",key:"batchNum",formConfig:{"min-width":150}},{title:"生产日期",key:"producedTime",formConfig:{"min-width":150}},{title:"有效期至",key:"indate",formConfig:{"min-width":150}},{title:"库存数量",key:"overallPackNum",width:100,render:e=>{let t;return t=e.overallPackNum||e.deleavePackNum?e.isSplit?(e.overallPackNum?e.overallPackNum+e.unit:"")+(e.deleavePackNum?e.deleavePackNum+e.splitUnit:""):e.overallPackNum?e.overallPackNum+e.unit:"-":"-",t}},{title:"最新供应商名称",key:"supplierName",formConfig:{"min-width":180}},{title:"最后入库时间",key:"inStockDateTime",formConfig:{"min-width":150}},{title:"柜组",key:"cabinetGroupName",width:100},{title:"批准文号",key:"approvalNumber",formConfig:{"min-width":150}},{title:"上市许可持有人",key:"holderPermit",formConfig:{"min-width":150}},{title:"采购状态",key:"purchaseState",width:100,render:e=>e.purchaseState?"正常":"停购"},{title:"销售状态",key:"saleState",width:100,render:e=>e.saleState?"正常":"停销"},{title:"门店",key:"business",width:140}]});return n(s({},k(a)),{selectData:e=>{t("getTableData")}})}},[["render",function(e,t,a,i,l,r){const o=y;return D(),v(o,{"table-data":a.tableData,columns:e.columns,pagination:a.submitForm,optionShow:!1,select:i.selectData},null,8,["table-data","columns","pagination","select"])}]]);var K=R({name:"GoodsStock",props:{tableData:{type:Array,default:[]},submitForm:{type:Object,default:{"page.currentPage":1,"page.pageSize":10}},getTableData:Function},emits:["getTableData"],setup(e,{emit:t}){const a=f({columns:[{type:"index",title:"序号",formConfig:{width:50},fixed:"left"},{title:"库存数量",formConfig:{"min-width":100},render:e=>{let t;return t=e.overallPackNum||e.deleavePackNum?e.isSplit?(e.overallPackNum?e.overallPackNum+e.unit:"")+(e.deleavePackNum?e.deleavePackNum+e.splitUnit:""):e.overallPackNum?e.overallPackNum+e.unit:"0":"0",t}},{title:"成本进价",key:"overallPackPrice",width:155,align:"right"},{title:"总成本金额",key:"totalPrice",width:140,align:"right"},{title:"毛利率",key:"grossMargin",width:120,align:"right"},{title:"零售价",key:"retailPrice",width:120,align:"right"},{title:"最新进价",key:"purchasePrice",width:140,align:"right"},{title:"最新供应商名称",key:"supplierName",width:180},{title:"最后入库时间",key:"inStockDateTime",width:150},{title:"柜组",key:"cabinetGroupName",width:100},{title:"批准文号",key:"approvalNumber",width:224},{title:"上市许可持有人",key:"holderPermit",width:170},{title:"采购状态",key:"purchaseState",width:78,render:e=>e.purchaseState?"正常":"停购"},{title:"销售状态",key:"saleState",width:78,render:e=>e.saleState?"正常":"停销"},{title:"门店",key:"business",width:140}]});return n(s({},k(a)),{selectData:e=>{t("getTableData")}})}},[["render",function(e,t,a,i,l,r){const o=y;return D(),v(o,{"table-data":a.tableData,columns:e.columns,pagination:a.submitForm,optionShow:!1,select:i.selectData},null,8,["table-data","columns","pagination","select"])}]]);var H=R({name:"InOutDetail",props:{tableData:{type:Array,default:[]},submitForm:{type:Object,default:{"page.currentPage":1,"page.pageSize":10,startTime:"",endTime:""}},height:{type:Number,default:1e3}},emits:["getTableData"],setup(e,{emit:t}){c();const a=f({formData:{labelWidth:"70px",span:8,inline:!0,list:[{label:"时间范围",type:"LINKAGETIME",keys:["startTime","endTime"],design:{width:"220px"},key:"planDate"},{label:"类型",type:"SELECT",key:"source",list:()=>[{value:"SY",label:"损溢"},{value:"RK",label:"入库"},{value:"TH",label:"退货"},{value:"XS",label:"销售"},{value:"PD",label:"盘点"},{value:"TK",label:"退款"},{value:"CL",label:"拆零"},{value:"RK_CH",label:"入库冲红"},{value:"TH_CH",label:"退货冲红"},{value:"QT",label:"其它"}]}]},columns:[{type:"index",title:"序号",formConfig:{width:50},fixed:"left"},{title:"类型",key:"source",formConfig:{"min-width":70},render:e=>{switch(e.source){case"SY":return"损溢";case"TH":return"退货";case"TZ":return"成本调整";case"RK":return"入库";case"QT":return"其它";case"XS":return"销售";case"PD":return"盘点";case"TK":return"退款";case"CL":return"拆零";case"RK_CH":return"入库冲红";case"TH_CH":return"退货冲红";default:return"-"}}},{title:"支付方式",key:"payInfos",formConfig:{"min-width":100}},{title:"单号",key:"sourceNo",formConfig:{"min-width":150},render:e=>w(z,{type:"text",innerHTML:e.sourceNo,onClick:()=>{i(e)}})},{title:"制单时间",key:"createTime",formConfig:{"min-width":180}},{title:"批号",key:"batchNum",formConfig:{"min-width":120}},{title:"数量",formConfig:{"min-width":110},align:"right",render:e=>{let t;return t=e.overallPackNumDeal||e.deleavePackNumDeal?e.isSplit?(e.overallPackNumDeal?e.overallPackNumDeal+e.unit:"")+(e.deleavePackNumDeal?e.deleavePackNumDeal+e.splitUnit:""):e.overallPackNumDeal?e.overallPackNumDeal+e.unit:"-":"-",t}},{title:"成本进价",key:"overallPackPriceDeal",formConfig:{"min-width":120},align:"right"},{title:"总成本金额",key:"totalPriceDeal",formConfig:{"min-width":120},align:"right",render:e=>e.totalPriceDeal?e.totalPriceDeal.toFixed(2):"-"},{title:"结存数量",formConfig:{"min-width":120},align:"right",render:e=>{let t;return t=e.overallPackNum||e.deleavePackNum?e.isSplit?(e.overallPackNum?e.overallPackNum+e.unit:"")+(e.deleavePackNum?e.deleavePackNum+e.splitUnit:""):e.overallPackNum?e.overallPackNum+e.unit:"-":"-",t}},{title:"结存成本进价",key:"overallPackPrice",formConfig:{"min-width":120},align:"right"},{title:"结存成本金额",key:"totalPrice",formConfig:{"min-width":120},align:"right",render:e=>e.totalPrice?e.totalPrice.toFixed(2):"-"},{title:"门店",key:"business",formConfig:{"min-width":70}}]}),i=e=>{"RK"===e.source?G.push({name:"AddPurchaseWarehousing",query:{uuid:e.sourceUuid,returnPath:"/commodity-manage/goods-query"}}):"SY"===e.source?G.push({name:"LossAndOverFlowDetail",query:{lossOverflowNo:e.sourceNo,returnPath:"/commodity-manage/goods-query"}}):"QT"===e.source||("XS"===e.source?G.push({path:"/retail/sale-order-detail",query:{uuid:e.sourceUuid,returnPath:"/commodity-manage/goods-query",type:"LS"==e.orderSourceType?"LS":"YB",orderState:1}}):"PD"===e.source?b({sourceUuid:e.sourceUuid}).then((e=>{delete e.page;let t=n(s({},e),{"page.currentPage":1,"page.pageSize":10});G.push({name:"InventoryDetail",query:{uuid:e.uuid,row:JSON.stringify(t),returnPath:"/commodity-manage/goods-query"}})})):"TK"===e.source?G.push({name:"SaleOrderDetail",query:{uuid:e.sourceUuid,returnPath:"/commodity-manage/goods-query",type:"LS"==e.orderSourceType?"LS":"YB",orderState:1}}):"CL"===e.source?G.push({name:"SaleOrderDetail",query:{uuid:e.sourceUuid,returnPath:"/commodity-manage/goods-query"}}):"RK_CH"===e.source||"TH_CH"===e.source?G.push({name:"RushRedDetail",query:{uuid:e.sourceUuid,returnPath:"/commodity-manage/goods-query"}}):g({returnProductUuid:e.sourceUuid}).then((e=>{G.push({name:"PurchaseReturnDetail",query:{uuid:e.returnUuid,returnPath:"/commodity-manage/goods-query"}})})))};return n(s({},k(a)),{selectData:e=>{t("getTableData")}})}},[["render",function(e,t,a,i,l,r){const o=_,s=y;return D(),P(T,null,[N(o,{"form-data":e.formData,"submit-form":a.submitForm,"onUpdate:submit-form":t[0]||(t[0]=e=>a.submitForm=e),options:!0,select:i.selectData},null,8,["form-data","submit-form","select"]),N(s,{"table-data":a.tableData,columns:e.columns,pagination:a.submitForm,optionShow:!1,reduceNum:110,classId:"tab",select:i.selectData},null,8,["table-data","columns","pagination","select"])],64)}]]);var V=R({name:"InWareRecord",props:{tableData:{type:Array,default:[]},submitForm:{type:Object,default:{"page.currentPage":1,"page.pageSize":10,startTime:"",endTime:""}}},emits:["getTableData"],setup(e,{emit:t}){const a=p(),i=f({formData:{labelWidth:"70px",span:8,inline:!0,list:[{label:"时间范围",type:"LINKAGETIME",keys:["startTime","endTime"],design:{width:"220px"},key:"planDate"}]},columns:[{title:"序号",type:"index",formConfig:{width:50}},{key:"storageNo",title:"入库单编号",width:135,render:(e,t,a,i)=>N("span",{style:"color:#1890ff;cursor: pointer;",onClick:()=>{l(e.storageUuid)}},[e.storageNo])},{key:"peer",title:"随货同行单",width:135},{key:"invoiceTime",title:"开票日期",width:135},{key:"supplierName",title:"供应商名称",width:176},{title:"批号",key:"batchNumber",width:150},{title:"生产日期",key:"productionDate",width:150},{title:"有效期至",key:"expireDate",width:150},{key:"storageNum",title:"入库数量",width:120,align:"right"},{key:"taxPaid",title:"含税进价",width:150,align:"right"},{key:"price",title:"进价",width:150,align:"right"},{key:"taxAmount",title:"含税金额",width:150,align:"right"},{key:"amount",title:"金额",align:"right",width:150},{key:"tax",title:"税额",align:"right",width:150},{key:"retailPrice",title:"零售价",align:"right",width:150},{key:"retailAmount",title:"零售金额",align:"right",width:150},{key:"inputTaxRate",title:"进项税率(%)",width:110,align:"right"},{key:"returnNum",title:"拒收数量",width:120,align:"right"},{key:"refuseReason",title:"拒收原因",width:160},{key:"applicant",title:"入库员",width:78},{key:"planDate",title:"制单时间",sortable:!0,width:180},{title:"门店",key:"business",width:140}]}),l=e=>{a.push({path:"/purchase/purchase-warehousing-detail",query:{uuid:e}})};return n(s({},k(i)),{selectData:e=>{t("getTableData")},pushToUrl:l,sortTable:a=>{e.submitForm.orderField=a.prop,e.submitForm.orderDirection="ascending"===a.order?"asc":"desc",e.submitForm["page.currentPage"]=1,t("getTableData")}})}},[["render",function(e,t,a,i,l,r){const o=_,s=y;return D(),P(T,null,[N(o,{"form-data":e.formData,"submit-form":a.submitForm,"onUpdate:submit-form":t[0]||(t[0]=e=>a.submitForm=e),options:!0,select:i.selectData},null,8,["form-data","submit-form","select"]),N(s,{"table-data":a.tableData,columns:e.columns,pagination:a.submitForm,optionShow:!1,reduceNum:110,classId:"tab",sortMethod:i.sortTable,select:i.selectData},null,8,["table-data","columns","pagination","sortMethod","select"])],64)}]]);var Y=R({name:"ReturnRecord",props:{tableData:{type:Array,default:[]},submitForm:{type:Object,default:{"page.currentPage":1,"page.pageSize":10,startTime:"",endTime:""}}},emits:["getTableData"],setup(e,{emit:t}){const a=p(),i=f({formData:{labelWidth:"70px",span:8,inline:!0,list:[{label:"时间范围",type:"LINKAGETIME",keys:["startTime","endTime"],design:{width:"220px"},key:"planDate"}]},columns:[{title:"序号",type:"index",formConfig:{width:50}},{key:"returnNo",title:"退货单编号",width:135,render:(e,t,a,i)=>N("span",{style:"color:#1890ff;cursor: pointer;",onClick:()=>{l(e.returnUuid)}},[e.returnNo])},{key:"supplierName",title:"供应商名称",width:176},{title:"批号",key:"batchNum",width:150},{title:"生产日期",key:"productionDate",width:150},{title:"有效期至",key:"expireDate",width:150},{key:"returnNum",title:"退货数量",width:120,align:"right"},{key:"taxPaid",title:"含税进价",width:150,align:"right"},{key:"price",title:"进价",width:150,align:"right"},{key:"taxAmount",title:"含税金额",width:150,align:"right"},{key:"amount",title:"金额",align:"right",width:150},{key:"tax",title:"税额",align:"right",width:150},{key:"retailPrice",title:"零售价",align:"right",width:150},{key:"retailAmount",title:"零售金额",align:"right",width:150},{key:"inputTaxRate",title:"进项税率(%)",width:110,align:"right"},{key:"reason",title:"退货原因",width:160},{key:"createUser",title:"创建人",width:78},{key:"createTime",title:"制单时间",sortable:!0,width:180},{title:"门店",key:"business",width:140}]}),l=e=>{a.push({path:"/purchase/purchase-return-detail",query:{uuid:e}})};return n(s({},k(i)),{selectData:e=>{t("getTableData")},pushToUrl:l,sortTable:a=>{e.submitForm.orderField=a.prop,e.submitForm.orderDirection="ascending"===a.order?"asc":"desc",e.submitForm["page.currentPage"]=1,t("getTableData")}})}},[["render",function(e,t,a,i,l,r){const o=_,s=y;return D(),P(T,null,[N(o,{"form-data":e.formData,"submit-form":a.submitForm,"onUpdate:submit-form":t[0]||(t[0]=e=>a.submitForm=e),options:!0,select:i.selectData},null,8,["form-data","submit-form","select"]),N(s,{"table-data":a.tableData,columns:e.columns,pagination:a.submitForm,optionShow:!1,select:i.selectData,reduceNum:110,classId:"tab",sortMethod:i.sortTable},null,8,["table-data","columns","pagination","select","sortMethod"])],64)}]]);var W=R({name:"SalesRecord",props:{tableData:{type:Array,default:[]},submitForm:{type:Object,default:{"page.currentPage":1,"page.pageSize":10,startTime:"",endTime:""}}},emits:["getTableData"],setup(e,{emit:t}){const a=f({formData:{labelWidth:"70px",span:8,inline:!0,list:[{label:"时间范围",type:"LINKAGETIME",keys:["startTime","endTime"],design:{width:"220px"},key:"planDate"}]},columns:[{type:"index",title:"序号",formConfig:{width:50},fixed:"left"},{key:"orderDate",title:"日期",sortable:!0,width:150},{title:"整装数量",key:"overallPackNum",render:e=>e.overallPackNum?e.overallPackNum+e.unit:0+e.unit},{title:"拆零数量",key:"deleavePackNum",render:e=>e.isSplit?e.deleavePackNum+e.splitUnit:"-"},{title:"零售金额",key:"payPrice"},{title:"门店",key:"business"}]});return n(s({},k(a)),{selectData:e=>{t("getTableData")},sortTable:a=>{e.submitForm.orderField=a.prop,e.submitForm.orderDirection="ascending"===a.order?"asc":"desc",e.submitForm["page.currentPage"]=1,t("getTableData")}})}},[["render",function(e,t,a,i,l,r){const o=_,s=y;return D(),P(T,null,[N(o,{"form-data":e.formData,"submit-form":a.submitForm,"onUpdate:submit-form":t[0]||(t[0]=e=>a.submitForm=e),options:!0,select:i.selectData},null,8,["form-data","submit-form","select"]),N(s,{"table-data":a.tableData,columns:e.columns,pagination:a.submitForm,optionShow:!1,sortMethod:i.sortTable,reduceNum:110,classId:"tab",select:i.selectData},null,8,["table-data","columns","pagination","sortMethod","select"])],64)}]]);var Q={name:"GoodsQuery",components:{BatchNumStock:L,CuringRecord:R({name:"CuringRecord",props:{tableData:{type:Array,default:[]},submitForm:{type:Object,default:{"page.currentPage":1,"page.pageSize":10,startTime:"",endTime:""}}},emits:["getTableData"],setup(e,{emit:t}){const a=p(),i=f({formData:{labelWidth:"70px",span:8,inline:!0,list:[{label:"时间范围",type:"LINKAGETIME",keys:["startTime","endTime"],design:{width:"220px"},key:"planDate"}]},columns:[{title:"序号",type:"index",formConfig:{width:50}},{key:"taskNo",title:"养护任务编号",width:135,render:(e,t,a,i)=>N("span",{style:"color:#1890ff;cursor: pointer;",onClick:()=>{l(e.uuid)}},[e.taskNo])},{title:"批号",key:"batchNum",formConfig:{"min-width":150}},{title:"生产日期",key:"producedTime",formConfig:{"min-width":120}},{title:"有效期至",key:"indate",formConfig:{"min-width":150}},{title:"养护数量",formConfig:{"min-width":100},render:e=>{let t;return t=e.overallPackNum||e.deleavePackNum?e.isSplit?(e.overallPackNum?e.overallPackNum+e.unit:"")+(e.deleavePackNum?e.deleavePackNum+e.splitUnit:""):e.overallPackNum?e.overallPackNum+e.unit:"-":"-",t}},{key:"qualityState",title:"质量状况",formConfig:{"min-width":100},render:e=>e.qualityState?"合格":"不合格"},{key:"condition",title:"养护措施",formConfig:{"min-width":100},render:e=>{switch(e.condition){case 1:return"常温";case 2:return"阴凉";case 3:return"冷藏";default:return"-"}}},{title:"批准文号",key:"approvalNumber",formConfig:{"min-width":150}},{title:"上市许可持有人",key:"holderPermit",formConfig:{"min-width":76}},{key:"taskDate",title:"养护日期",sortable:!0,formConfig:{"min-width":160}},{title:"门店",key:"business",width:140}]}),l=e=>{a.push({path:"/quality/curing-manage/confirm-curing-task",query:{uuid:e}})};return n(s({},k(i)),{selectData:e=>{t("getTableData")},pushToUrl:l,sortTable:a=>{e.submitForm.orderField=a.prop,e.submitForm.orderDirection="ascending"===a.order?"asc":"desc",e.submitForm["page.currentPage"]=1,t("getTableData")}})}},[["render",function(e,t,a,i,l,r){const o=_,s=y;return D(),P(T,null,[N(o,{"form-data":e.formData,"submit-form":a.submitForm,"onUpdate:submit-form":t[0]||(t[0]=e=>a.submitForm=e),options:!0,select:i.selectData},null,8,["form-data","submit-form","select"]),N(s,{"table-data":a.tableData,columns:e.columns,pagination:a.submitForm,optionShow:!1,reduceNum:110,classId:"tab",sortMethod:i.sortTable,select:i.selectData},null,8,["table-data","columns","pagination","sortMethod","select"])],64)}]]),GoodsStock:K,InOutDetail:H,InWareRecord:V,ReturnRecord:Y,SalesRecord:W},setup(){const e=d();e.state.common;const t=p();let a=f({isMultiple:!0,isCollapse:!0,isClear:!1,formData:{labelWidth:"110px",span:8,inline:!0,list:[{type:"SELECT",placeholder:"门店",list:()=>a.mechanism,key:"businessUuid",config:{multiple:!0},props:{label:"name",value:"uuid"}}]},mechanism:[],activeName:"one",height:1e3,loading:!1,keys:["code","productName","dosageForm","specification","manufacturer","overallPackNumByUnit","deleavePackNumByUnit"],selectArr:[],submitForm:{fuzzyValue:"",productUuid:"","page.currentPage":1,"page.pageSize":10,startTime:"",endTime:"",businessUuid:[],type:0},productUuidSelect:"",tableData:[],goodsData:{}});const i=()=>{let t=a.submitForm,{businessUuid:i}=t,l=u(t,["businessUuid"]);i=E(i);let r=n(s({},l),{businessUuid:i,openMultipleStores:e.state.common.info.openMultipleStores});h(r).then((e=>{a.tableData=e.list,a.submitForm.total=e.totalCount}))};return F((()=>{})),S((async()=>{a.mechanism=await e.dispatch("common/mechanism"),1==a.mechanism.length&&(a.isMultiple=!1,a.isCollapse=!1,a.submitForm.businessUuid=a.mechanism[0].uuid)})),n(s({},k(a)),{handleClick:e=>{if(a.goodsData.code)switch(a.submitForm.startTime=B().subtract(30,"days").format("YYYY-MM-DD"),a.submitForm.endTime=B().format("YYYY-MM-DD"),a.submitForm.orderField="",a.submitForm.orderDirection="asc",e.props.name){case"one":a.submitForm.type=0,i();break;case"two":a.submitForm.type=1,i();break;case"three":a.submitForm.startTime="",a.submitForm.endTime="",a.submitForm.type=2,i();break;case"four":a.submitForm.type=3,i();break;case"five":a.submitForm.type=4,i();break;case"six":a.submitForm.type=5,i();break;case"seven":a.submitForm.type=6,i()}},handleInput:async t=>{if(!t)return void(a.selectArr=[]);let{submitForm:i}=a;i=Object.assign(i,{fuzzyValue:t}),i.hasOwnProperty("type")&&delete i.type;let l=i,{businessUuid:r}=l,o=u(l,["businessUuid"]);r=E(r);let n=s({businessUuid:r,openMultipleStores:e.state.common.info.openMultipleStores},o),m=await h(n);m.forEach((e=>{if(e.overallPackNum||e.deleavePackNum)return e.isSplit?e.overallPackNumByUnit=(e.overallPackNum?e.overallPackNum+e.unit:"")+(e.deleavePackNum?e.deleavePackNum+e.splitUnit:""):e.overallPackNumByUnit=e.overallPackNum?e.overallPackNum+e.unit:"0",e.overallPackNumByUnit;e.overallPackNumByUnit="0"})),a.selectArr=m},handleChange:e=>{a.goodsData=e,a.selectArr=[];let{submitForm:t}=a;t=Object.assign(t,{startTime:"",endTime:"",source:"",type:0,orderField:"",orderDirection:"asc",productUuid:e.productUuid}),a.productUuidSelect=t.productUuid,a.activeName="one",i()},queryDataMethods:i,handleVisible:e=>{e||(a.selectArr=[])},pushToGoods:e=>{t.push({path:"/commodity-manage/addAndEdit",query:{uuid:e,state:"see",type:2}})},handleSelect:()=>{if(!a.submitForm.fuzzyValue)return;let t=a.submitForm,{businessUuid:i,productUuid:l}=t,r=u(t,["businessUuid","productUuid"]);i=E(i);let o=n(s({},r),{productUuid:a.productUuidSelect,businessUuid:i,openMultipleStores:e.state.common.info.openMultipleStores});h(o).then((e=>{a.tableData=e.list,a.submitForm.total=e.totalCount}))},handleReset:()=>{a.productUuidSelect="",a.submitForm.businessUuid="",a.goodsData={},a.tableData=[]}})}},X="./assets/empty.1232430e.png";const J=e=>(I("data-v-522da2b2"),e=e(),A(),e),Z={class:"stencil"},$={class:"top"},ee={class:"search"},te=q("重置"),ae={key:0,class:"goods-data"},ie={class:"goods-data-item"},le=J((()=>U("p",null,"商品编码",-1))),re={class:"goods-data-item",style:{width:"20%"}},oe=J((()=>U("p",null,"商品名称",-1))),se={class:"goods-data-item",style:{width:"20%"}},ne=J((()=>U("p",null,"规格",-1))),ue={class:"goods-data-item"},me=J((()=>U("p",null,"生产厂家",-1))),de={class:"goods-data-item"},ce=J((()=>U("p",null,"库存数量",-1))),pe={class:"goods-data-item"},be=J((()=>U("p",null,"最后含税进价(元)",-1))),ge={class:"goods-data-item"},he=J((()=>U("p",null,"参考零售价(元)",-1))),ye={class:"main"},fe={class:"scollbar",id:"tab"},ke={class:"mainbox"},De={key:1,class:"empty"},ve=[J((()=>U("img",{src:X,alt:""},null,-1))),J((()=>U("p",null,"查询后显示商品库存",-1)))],we={key:1,class:"empty"},Pe=[J((()=>U("img",{src:X,alt:""},null,-1))),J((()=>U("p",null,"查询后显示批号库存",-1)))],Ne={key:1,class:"empty"},Te=[J((()=>U("img",{src:X,alt:""},null,-1))),J((()=>U("p",null,"查询后显示出入库明细",-1)))],Fe={key:1,class:"empty"},Se=[J((()=>U("img",{src:X,alt:""},null,-1))),J((()=>U("p",null,"查询后显示零售记录",-1)))],Ce={key:1,class:"empty"},Ue=[J((()=>U("img",{src:X,alt:""},null,-1))),J((()=>U("p",null,"查询后显示采购入库记录",-1)))],je={key:1,class:"empty"},xe=[J((()=>U("img",{src:X,alt:""},null,-1))),J((()=>U("p",null,"查询后显示采购退货记录",-1)))],Oe={key:1,class:"empty"},Me=[J((()=>U("img",{src:X,alt:""},null,-1))),J((()=>U("p",null,"查询后显示养护记录",-1)))];var qe=R(Q,[["render",function(e,t,a,i,l,r){const o=m,s=C("el-option"),n=C("el-select"),u=C("el-button"),d=C("goods-stock"),c=C("el-tab-pane"),p=C("batch-num-stock"),b=C("in-out-detail"),g=C("sales-record"),h=C("in-ware-record"),y=C("return-record"),f=C("curing-record"),k=C("el-tabs");return D(),P("div",Z,[U("div",$,[U("div",ee,[N(o,{class:"select-input",keys:e.keys,options:e.selectArr,"onUpdate:options":t[0]||(t[0]=t=>e.selectArr=t),placeholder:"请输入商品编码/助记码/商品名称/条码",onOnInput:i.handleInput,icon:!1,onOnChange:i.handleChange,onOnVisibleChange:i.handleVisible,props:{label:"userName",value:"productUuid"}},null,8,["keys","options","onOnInput","onOnChange","onOnVisibleChange"]),N(n,{size:"small",style:{width:"180px"},clearable:"",multiple:e.isMultiple,"collapse-tags":e.isCollapse,modelValue:e.submitForm.businessUuid,"onUpdate:modelValue":t[1]||(t[1]=t=>e.submitForm.businessUuid=t),onChange:i.handleSelect,placeholder:"请选择门店"},{default:j((()=>[(D(!0),P(T,null,x(e.mechanism,(e=>(D(),v(s,{key:e.uuid,label:e.name,value:e.uuid},null,8,["label","value"])))),128))])),_:1},8,["multiple","collapse-tags","modelValue","onChange"]),N(u,{size:"small",style:{"margin-left":"20px"},onClick:i.handleReset},{default:j((()=>[te])),_:1},8,["onClick"])]),"{}"!==JSON.stringify(e.goodsData)?(D(),P("div",ae,[U("div",ie,[le,U("p",null,O(e.goodsData.code),1)]),U("div",re,[oe,U("p",{class:"name",onClick:t[2]||(t[2]=t=>i.pushToGoods(e.goodsData.productUuid))},O(e.goodsData.productName),1)]),U("div",se,[ne,U("p",null,O(e.goodsData.specification),1)]),U("div",ue,[me,U("p",null,O(e.goodsData.manufacturer),1)]),U("div",de,[ce,U("p",null,O(e.goodsData.overallPackNumByUnit&&0!=e.goodsData.overallPackNumByUnit?e.goodsData.overallPackNumByUnit:0),1)]),U("div",pe,[be,U("p",null,O(e.goodsData.texPurchasePrice),1)]),U("div",ge,[he,U("p",null,O(e.goodsData.retailPrice),1)])])):M("",!0)]),U("div",ye,[U("div",fe,[U("div",ke,[N(k,{modelValue:e.activeName,"onUpdate:modelValue":t[4]||(t[4]=t=>e.activeName=t),onTabClick:i.handleClick},{default:j((()=>[N(c,{label:"商品库存",name:"one"},{default:j((()=>[e.goodsData.code?(D(),v(d,{key:0,tableData:e.tableData,submitForm:e.submitForm},null,8,["tableData","submitForm"])):(D(),P("div",De,ve))])),_:1}),N(c,{label:"批号库存",name:"two"},{default:j((()=>[e.goodsData.code?(D(),v(p,{key:0,tableData:e.tableData,submitForm:e.submitForm},null,8,["tableData","submitForm"])):(D(),P("div",we,Pe))])),_:1}),N(c,{label:"出入库明细",name:"three"},{default:j((()=>[e.goodsData.code?(D(),v(b,{key:0,tableData:e.tableData,submitForm:e.submitForm,onGetTableData:i.queryDataMethods},null,8,["tableData","submitForm","onGetTableData"])):(D(),P("div",Ne,Te))])),_:1}),N(c,{label:"零售记录",name:"four"},{default:j((()=>[e.goodsData.code?(D(),v(g,{key:0,tableData:e.tableData,submitForm:e.submitForm,"onUpdate:submitForm":t[3]||(t[3]=t=>e.submitForm=t),onGetTableData:i.queryDataMethods},null,8,["tableData","submitForm","onGetTableData"])):(D(),P("div",Fe,Se))])),_:1}),N(c,{label:"采购入库记录",name:"five"},{default:j((()=>[e.goodsData.code?(D(),v(h,{key:0,tableData:e.tableData,submitForm:e.submitForm,onGetTableData:i.queryDataMethods},null,8,["tableData","submitForm","onGetTableData"])):(D(),P("div",Ce,Ue))])),_:1}),N(c,{label:"采购退货记录",name:"six"},{default:j((()=>[e.goodsData.code?(D(),v(y,{key:0,tableData:e.tableData,submitForm:e.submitForm,onGetTableData:i.queryDataMethods},null,8,["tableData","submitForm","onGetTableData"])):(D(),P("div",je,xe))])),_:1}),N(c,{label:"养护记录",name:"seven"},{default:j((()=>[e.goodsData.code?(D(),v(f,{key:0,tableData:e.tableData,submitForm:e.submitForm,onGetTableData:i.queryDataMethods},null,8,["tableData","submitForm","onGetTableData"])):(D(),P("div",Oe,Me))])),_:1})])),_:1},8,["modelValue","onTabClick"])])])])])}],["__scopeId","data-v-522da2b2"]]);export{qe as default};
