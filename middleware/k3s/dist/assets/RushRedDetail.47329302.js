var t=Object.defineProperty,e=Object.defineProperties,a=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,s=(e,a,r)=>a in e?t(e,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[a]=r,l=(t,e)=>{for(var a in e||(e={}))i.call(e,a)&&s(t,a,e[a]);if(r)for(var a of r(e))o.call(e,a)&&s(t,a,e[a]);return t};import{_ as n}from"./BaseForm.bc55ad6b.js";import{_ as u}from"./BaseTable.36f55649.js";import{_ as m}from"./BaseCard.46de0c24.js";import{_ as p}from"./BaseName.1aa32b4b.js";import{r as d,_ as c}from"./index.ab904951.js";import{G as b,j as f,D as h,t as y,o as j,a5 as g,e as v,w,a6 as k,z as x,a9 as D,aa as F}from"./@vue.23a4bd1a.js";import{b as P}from"./vue-router.91336ba9.js";import{a as N}from"./index.0da746e8.js";import"./TempHtml.vue_vue&type=script&lang.67ba229f.js";import"./sortablejs.621e50ab.js";import"./vuex.c868d4e0.js";import"./lodash.d7ab6f48.js";import"./dayjs.bad04745.js";import"./element-resize-detector.5b0b5621.js";import"./batch-processor.94093b2a.js";import"./public.9c1d8f39.js";import"./element-plus.b44d97a8.js";import"./resize-observer-polyfill.d4249adb.js";import"./normalize-wheel.1d574cd1.js";import"./mitt.32ebca9f.js";import"./async-validator.1fa0d626.js";import"./@popperjs.192dcd39.js";import"./vue.6d04e91d.js";/* empty css                                                             */import"./echarts.e8cef18b.js";import"./tslib.34a40861.js";import"./zrender.5bef55a0.js";import"./vue3-print-nb.eccf419a.js";import"./nprogress.8b4927f9.js";import"./axios.7b768d2b.js";import"./default-passive-events.74004992.js";const O=["name","specification","unit","manufacturer"];function _(t){const e={inline:!0,labelWidth:"100px",config:{size:"medium","label-suffix":"："},list:[{label:"冲红单编号",key:"rushNo",span:8,type:"DIV"},{label:"创建人",key:"createUser",span:8,type:"DIV"},{label:"制单时间",key:"planDate",span:8,type:"DIV"},{label:"门店",key:"business",span:8,type:"DIV"},{label:"原单据编号",key:"orderNo",type:"DIV",config:{style:"color: #1890FF;cursor:pointer",onClick(){a(t)}}}]},a=t=>{let e=t();"RK"===e.source?d.push({name:"PurchaseWarehousingDetail",query:{uuid:e.sourceUuid,returnPath:e.route}}):d.push({name:"PurchaseReturnDetail",query:{uuid:e.sourceUuid,returnPath:e.route}})};return{columns:[{type:"index",title:"序号",fixed:"left",formConfig:{width:50}},{title:"商品编码",fixed:"left",key:"code",width:80},{title:"商品名称/规格/单位/生产厂家",width:256,fixed:"left",formConfig:{"show-overflow-tooltip":!1},key:"productName",render:t=>b(p,{row:t,list:O})},{title:"批号",key:"batchNumber",width:200},{title:"生产日期",key:"productionDate",width:110},{title:"有效期至",key:"expireDate",width:110},{title:"冲红数量",key:"rushNum",width:110,align:"right"},{title:"含税进价(元)",key:"taxPaid",width:110,align:"right"},{title:"进价(元)",key:"price",width:110,align:"right"},{title:"含税金额(元)",key:"taxAmount",width:110,align:"right"},{title:"金额(元)",key:"amount",width:110,align:"right"},{title:"税额(元)",key:"tax",width:110,align:"right"},{title:"零售价(元)",key:"retailPrice",width:110,align:"right"},{title:"零售金额(元)",key:"retailAmount",width:110,align:"right"},{title:"进项税率(%)",key:"inputTaxRate",width:110,align:"right"},{title:"批准文号",key:"approvalNumber",width:224},{title:"上市许可持有人",key:"holderPermit",width:170},{title:"中药饮片产地",key:"medicineBeverage",width:110}],formData:e}}const C={name:"RushRedDetail",setup(t,s){let n=f({tableData:[]});const u=f(l({query:"***",title:"冲红记录详情",uuid:"",submitForm:{},tabClose:!1,formConfig:{},optionShow:!1},_())),m=()=>{N(u.submitForm.uuid).then((t=>{let e=t,{details:a}=e,s=((t,e)=>{var a={};for(var s in t)i.call(t,s)&&e.indexOf(s)<0&&(a[s]=t[s]);if(null!=t&&r)for(var s of r(t))e.indexOf(s)<0&&o.call(t,s)&&(a[s]=t[s]);return a})(e,["details"]);u.submitForm=s,u.submitForm.route=p.fullPath,n.tableData=a,n.tableData.name=a.productName;const l=a.map((t=>{const e=t;e.name=e.productName;return e}));n.tableData=l}))},p=P();h((()=>{u.query!==p.query.uuid&&(u.query=p.query.uuid,u.submitForm.uuid=p.query.uuid,m())}));const d=f(_((()=>u.submitForm)));return c=l(l(l({},y(u)),y(n)),y(d)),e(c,a({getDetail:m}));var c}},q=t=>(D("data-v-7dc631da"),t=t(),F(),t),I={class:"supplierDetail formItem-noMargin"},z={style:{"font-size":"16px"}},B={class:"top-content"},R=q((()=>k("div",{class:"title"},"单据信息",-1))),S={class:"bottom-content"},T=q((()=>k("div",{class:"title"},"商品信息",-1))),V={class:"scope-line"};var A=c(C,[["render",function(t,e,a,r,i,o){const s=n,l=u,p=m;return j(),g("div",I,[v(p,{close:t.tabClose,backTips:!1,route:{path:"/purchase/rush-red"}},{header:w((()=>[k("span",z,x(t.title),1)])),top:w((()=>[k("div",B,[R,v(s,{"form-data":t.formData,"submit-form":t.submitForm,"onUpdate:submit-form":e[0]||(e[0]=e=>t.submitForm=e),style:{"margin-top":"12px"},ref:"baseForm"},null,8,["form-data","submit-form"])])])),default:w((()=>[k("div",S,[T,v(l,{style:{"margin-top":"22px"},"table-data":t.tableData,formConfig:t.formConfig,columns:t.columns,optionShow:t.optionShow},{buttons:w((e=>[k("div",V,[k("div",null,[k("span",null,"商品种类合计："+x(t.tableData.length),1),k("span",null,"冲红数量合计："+x(t.submitForm.rushNum)+"元",1),k("span",null,"含税金额合计："+x(t.submitForm.totalAmountTax)+"元",1),k("span",null,"金额合计："+x(t.submitForm.totalAmount)+"元",1),k("span",null,"税额合计："+x(t.submitForm.tax)+"元",1)])])])),_:1},8,["table-data","formConfig","columns","optionShow"])])])),_:1},8,["close"])])}],["__scopeId","data-v-7dc631da"]]);export{A as default};
