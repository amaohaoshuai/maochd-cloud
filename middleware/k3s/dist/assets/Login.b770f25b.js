var e=Object.defineProperty,t=Object.defineProperties,i=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,n=(t,i,a)=>i in t?e(t,i,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[i]=a;import{_ as r}from"./SubmitButton.99d990fd.js";import{_ as l}from"./BaseForm.bc55ad6b.js";import{_ as m}from"./index.ab904951.js";import{u as p,a as d,m as c}from"./vuex.c868d4e0.js";import{u}from"./vue-router.91336ba9.js";import{v as g}from"./verification.ecddc814.js";import{_ as f}from"./element-plus.b44d97a8.js";import{j as b,h,g as v,t as y,e as j,B as x,o as w,a5 as C,a6 as P,w as k,a9 as _,aa as S,V as F,z as T,S as O}from"./@vue.23a4bd1a.js";import"./TempHtml.vue_vue&type=script&lang.67ba229f.js";import"./echarts.e8cef18b.js";import"./tslib.34a40861.js";import"./zrender.5bef55a0.js";import"./vue3-print-nb.eccf419a.js";import"./dayjs.bad04745.js";import"./nprogress.8b4927f9.js";import"./axios.7b768d2b.js";import"./lodash.d7ab6f48.js";import"./default-passive-events.74004992.js";import"./resize-observer-polyfill.d4249adb.js";import"./normalize-wheel.1d574cd1.js";import"./mitt.32ebca9f.js";import"./async-validator.1fa0d626.js";import"./@popperjs.192dcd39.js";import"./vue.6d04e91d.js";var I={name:"Login",setup(){const e=u(),r=b({activeName:"first",isSisabled:!1,timer:null,countDown:"获取验证码",formData:{inline:!1,list:[{type:"INPUT",placeholder:"请输入账号",key:"account",prefix:{tempHtml:()=>j("div",{style:"display: flex;align-items: center;height: 40px; margin-left: 10px"},[j("img",{src:"./static/images/login/accounts.png",width:"20"},null)])},design:{width:"350px"},rules:[{required:!0,message:"用户名不能为空"}]},{type:"INPUT",inputType:"password",placeholder:"请输入密码",key:"password",design:{width:"350px"},prefix:{tempHtml:()=>j("div",{style:"display: flex;align-items: center;height: 40px; margin-left: 12px"},[j("img",{src:"./static/images/login/pass.png",width:"20"},null)])},rules:[{required:!0,message:"密码不能为空"}]}]},formData2:{inline:!1,list:[{type:"INPUT",placeholder:"请输入手机号",key:"account",prefix:{tempHtml:()=>j("div",{style:"display: flex;align-items: center;height: 40px; margin-left: 10px"},[j("img",{src:"./static/images/login/accounts.png",width:"20"},null)])},design:{width:"350px"},rules:[{required:!0,message:"手机号不能为空"}]},{type:"INPUT",placeholder:"请输入验证码",key:"password",design:{"margin-right":"120px",width:"229px"},prefix:{tempHtml:()=>j("div",{style:"display: flex;align-items: center;height: 40px; margin-left: 12px"},[j("img",{src:"./static/images/login/pwdCode.png",width:"20"},null)])},rules:[{required:!0,message:"验证码不能为空"}]}]},submitForm:{},inputConfig:{size:"medium"}}),l=p(),m=d("common",["goLogin","dropOut","getAllCategoryList","getToken","getPhoneToken","getPhonelogin"]);m.goLogin.bind({$store:l});const x=m.getToken.bind({$store:l}),w=m.getPhonelogin.bind({$store:l}),C=m.dropOut.bind({$store:l}),P=m.getPhoneToken.bind({$store:l}),k=c("common",["info"]),_=h(k.info.bind({$store:l}));sessionStorage.clear(),_.value&&_.value.userAccount&&C({accountNo:_.value.userAccount});const S=v(null),F=()=>{r.timer&&clearInterval(r.timer)};return T=((e,t)=>{for(var i in t||(t={}))s.call(t,i)&&n(e,i,t[i]);if(a)for(var i of a(t))o.call(t,i)&&n(e,i,t[i]);return e})({},y(r)),t(T,i({handleSubmit:async t=>{await S.value.verification()&&(await x(r.submitForm),e.replace("/"))},handlePhoneSubmit:async t=>{await S.value.verification()&&(await w(r.submitForm),e.replace("/"))},baseForm:S,info:_,handlePhone:async e=>{let{account:t,grant_type:i}=r.submitForm;if(t&&g(t)){F(),P(t);let e=60;r.timer=setInterval((()=>{r.countDown="重新获取("+e+"s)",e--,e<0&&(F(),r.countDown="获取验证码",r.isSisabled=!1)}),1e3),r.isSisabled=!0}else f.error("请输入正确的手机号!")},clear:F,clearLogin:()=>{r.submitForm={}}}));var T}};const D=e=>(_("data-v-156d9980"),e=e(),S(),e),N={class:"login"},z=D((()=>P("img",{class:"bgTopRight",src:"./assets/bg2-2.57d2db4e.png",alt:""},null,-1))),L={class:"submit form-t"},U=D((()=>P("div",{class:"logo"},[P("img",{class:"logoImg",src:"./assets/logo.018b2a43.png",width:"187"})],-1))),$=D((()=>P("div",{class:"text"},"数字技术驱动医药新零售",-1))),B={class:"btnBox"},H=O(" 登录 "),q={class:"btnBox"},K=O(" 登录 "),V=D((()=>P("div",{class:"keepOnRecord"},"Copyright ©2020 九为（浙江）网络科技有限公司版权所有 备案号：浙ICP备20015044号",-1)));var A=m(I,[["render",function(e,t,i,a,s,o){const n=r,m=l,p=x("el-tab-pane"),d=x("el-button"),c=x("el-tabs");return w(),C("div",N,[z,P("div",L,[U,$,j(c,{style:{"font-size":"16px"},modelValue:e.activeName,"onUpdate:modelValue":t[2]||(t[2]=t=>e.activeName=t),onTabClick:a.clearLogin},{default:k((()=>[j(p,{label:"账号密码登录",name:"first"},{default:k((()=>[j(m,{"form-data":e.formData,"submit-form":e.submitForm,"onUpdate:submit-form":t[0]||(t[0]=t=>e.submitForm=t),style:{"margin-top":"5px"},ref:"baseForm",inputConfig:e.inputConfig,onKeyup:F(a.handleSubmit,["enter"])},{options:k((()=>[P("div",B,[j(n,{class:"btn",config:e.inputConfig,onClick:a.handleSubmit,style:{width:"350px"}},{default:k((()=>[H])),_:1},8,["config","onClick"])])])),_:1},8,["form-data","submit-form","inputConfig","onKeyup"])])),_:1}),j(p,{label:"手机号登录",name:"second"},{default:k((()=>[j(m,{"form-data":e.formData2,"submit-form":e.submitForm,"onUpdate:submit-form":t[1]||(t[1]=t=>e.submitForm=t),style:{"margin-top":"5px"},ref:"baseForm",class:"phongLogin",inputConfig:e.inputConfig,onKeyup:F(a.handlePhoneSubmit,["enter"])},{options:k((()=>[j(d,{class:"obtainCode",size:"medium",onClick:a.handlePhone,disabled:e.isSisabled},{default:k((()=>[P("span",null,T(e.countDown),1)])),_:1},8,["onClick","disabled"]),P("div",q,[j(n,{class:"btn",config:e.inputConfig,onClick:a.handlePhoneSubmit,style:{width:"350px"}},{default:k((()=>[K])),_:1},8,["config","onClick"])])])),_:1},8,["form-data","submit-form","inputConfig","onKeyup"])])),_:1})])),_:1},8,["modelValue","onTabClick"])]),V])}],["__scopeId","data-v-156d9980"]]);export{A as default};
