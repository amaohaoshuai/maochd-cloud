var e=Object.defineProperty,l=Object.defineProperties,a=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,o=(l,a,t)=>a in l?e(l,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[a]=t,u=(e,l)=>{for(var a in l||(l={}))r.call(l,a)&&o(e,a,l[a]);if(t)for(var a of t(l))i.call(l,a)&&o(e,a,l[a]);return e},s=(e,t)=>l(e,a(t));import{_ as d}from"./EditForm.8c35f1a6.js";import{_ as n}from"./BaseTable.36f55649.js";import{_ as p}from"./BaseCard.46de0c24.js";import{t as m}from"./tabs.2754a120.js";import{m as c,b as y,g as b,c as g,d as f,l as h,e as v}from"./index.6a02aeaf.js";import{d as k}from"./index.d0e41a43.js";import{g as F}from"./index.41a8010a.js";import{m as x}from"./index.7c4fa9df.js";import{u as C,m as P}from"./vuex.c868d4e0.js";import{c as S,d as w,_ as I,b as V}from"./element-plus.b44d97a8.js";import{f as _}from"./filter.c2c8f0b9.js";import{d as N,b as U,p as T}from"./index.6efc7880.js";import{_ as D,s as O}from"./index.ab904951.js";import{g as q,j,D as E,t as L,B as R,o as M,a5 as B,e as z,w as A,a6 as H,c as J,F as $,N as Y,z as W,v as K,h as G,S as Q,G as X,a9 as Z,aa as ee,Y as le,n as ae,q as te,L as re,J as ie,y as oe,V as ue}from"./@vue.23a4bd1a.js";import{_ as se}from"./imageUpload.e9124177.js";import{_ as de}from"./BaseDatePicker.831269d5.js";import{c as ne}from"./common.6e2a0964.js";import{u as pe,b as me}from"./vue-router.91336ba9.js";import{_ as ce}from"./lodash.d7ab6f48.js";import{p as ye}from"./pagination.9a8d3337.js";import"./sortablejs.621e50ab.js";import"./element-resize-detector.5b0b5621.js";import"./TempHtml.vue_vue&type=script&lang.67ba229f.js";import"./public.9c1d8f39.js";import"./axios.7b768d2b.js";import"./resize-observer-polyfill.d4249adb.js";import"./dayjs.bad04745.js";import"./normalize-wheel.1d574cd1.js";import"./mitt.32ebca9f.js";import"./async-validator.1fa0d626.js";import"./@popperjs.192dcd39.js";import"./vue.6d04e91d.js";import"./echarts.e8cef18b.js";import"./tslib.34a40861.js";import"./zrender.5bef55a0.js";import"./vue3-print-nb.eccf419a.js";import"./nprogress.8b4927f9.js";import"./default-passive-events.74004992.js";import"./moment.08a7f518.js";import"./batch-processor.94093b2a.js";const be={name:"user",props:{ruleForm:{type:Object,default:{}},rules:{type:Object,default:{}},isEdit:{type:Boolean,default:!0},isAdd:{type:Boolean,default:!0}},setup(e,l){const a=q(null),t=j({dictCategoryInfo:"",dictUnitInfo:"",dictPrescriptionInfo:"",supplierList:[],formatDate:_,purchaseState:{1:"正常",2:"停购"},purchaseStateList:[{value:1,label:"正常"},{value:2,label:"停购"}],saleState:{1:"正常",2:"停销"},saleStateList:[{value:1,label:"正常"},{value:2,label:"停销"}],conditionState:{1:"常温",2:"阴凉",3:"冷藏"},conditionList:[{value:1,label:"常温"},{value:2,label:"阴凉"},{value:3,label:"冷藏"}],categoryList:[{value:"",label:"",children:[{value:"",label:""}]}],maintenanceType:{1:"一般养护",2:"重点养护"},maintenanceTypeList:[{value:1,label:"一般养护"},{value:2,label:"重点养护"}]}),r=()=>{const e=C(),l=P("common",["dict"]),a=G(l.dict.bind({$store:e})),r=JSON.parse(JSON.stringify(a.value)).filter((e=>"category1"===e.key)),u=JSON.parse(JSON.stringify(a.value)).filter((e=>"unit"===e.key)),s=JSON.parse(JSON.stringify(a.value)).filter((e=>"prescription"===e.key));t.dictCategoryInfo=r.length>0?r[0].data:"",t.dictUnitInfo=u.length>0?u[0].data:"",t.dictPrescriptionInfo=s.length>0?s[0].data:"",i(),o()},i=async()=>{try{const e=await N();t.supplierList=e}catch(e){return e}},o=async()=>{try{(await U()).map((e=>{e.value=e.uuid,e.label=e.categoryName,e.children=e.list,e.children.map((e=>{e.value=e.uuid,e.label=e.name}))}))}catch(e){return e}};E((()=>{r()}));return s(u({},L(t)),{quickInput:function(){l.emit("quick-input",{})},handleChange:function(e){if(e){const a=t.categoryList.filter((l=>l.uuid===JSON.parse(JSON.stringify(e))[0])),r=JSON.parse(JSON.stringify(a))[0].list.filter((l=>l.uuid===JSON.parse(JSON.stringify(e))[1]));l.emit("handle-change",JSON.parse(JSON.stringify(e))[1],r[0].name)}},baseInfoForm:a,verification:()=>new Promise((e=>{a.value.validate((l=>{e(l)}))})),initData:r})}},ge={class:"base-info"},fe={style:{"border-bottom":"1px solid #E4E7ED"}},he={key:1},ve={key:1},ke={key:0},Fe={key:1},xe={style:{"border-bottom":"1px solid #E4E7ED","margin-top":"20px"}},Ce={key:0,style:{display:"flex"}},Pe=Q("快速录入"),Se={key:1},we={key:1},Ie={key:1},Ve={key:1},_e={key:1},Ne={key:1},Ue={key:1},Te={key:1},De={key:1},Oe=Q("是"),qe=Q("否"),je={key:1},Ee={key:1},Le={key:1},Re={key:1},Me={key:1},Be={key:1},ze={key:1},Ae={key:1},He={key:1},Je=Q("是"),$e=Q("否"),Ye={key:1},We={key:1},Ke={key:1},Ge={key:1},Qe={key:1},Xe={key:1},Ze={key:1},el={style:{"margin-top":"20px","border-bottom":"1px solid #E4E7ED"}},ll={key:1},al={key:1},tl={key:1},rl={key:1},il={key:1},ol={key:1},ul={key:0};var sl=D(be,[["render",function(e,l,a,t,r,i){const o=R("el-option"),u=R("el-select"),s=R("el-form-item"),d=R("el-col"),n=R("el-cascader"),p=R("el-row"),m=R("el-input"),c=R("el-button"),y=R("el-radio"),b=R("el-radio-group"),g=R("el-date-picker"),f=R("el-form");return M(),B("div",ge,[z(f,{model:a.ruleForm,ref:"baseInfoForm",rules:a.rules,"label-width":"155px"},{default:A((()=>[H("div",fe,[z(p,null,{default:A((()=>[z(d,{span:8},{default:A((()=>[z(s,{label:"商品类别：",prop:"category1"},{default:A((()=>[a.isEdit?(M(),J(u,{key:0,modelValue:a.ruleForm.category1,"onUpdate:modelValue":l[0]||(l[0]=e=>a.ruleForm.category1=e),clearable:"",style:{width:"224px"},placeholder:"请选择"},{default:A((()=>[(M(!0),B($,null,Y(e.dictCategoryInfo,((e,l)=>(M(),J(o,{key:l,label:e.key,value:e.key},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])):(M(),B("div",he,[H("span",null,W(a.ruleForm.category1?a.ruleForm.category1:"-"),1)]))])),_:1})])),_:1}),z(d,{span:8},{default:A((()=>[z(s,{label:"商品分类：",prop:"category2Uuid"},{default:A((()=>[a.isEdit?(M(),J(n,{key:0,modelValue:a.ruleForm.category2Uuid,"onUpdate:modelValue":l[1]||(l[1]=e=>a.ruleForm.category2Uuid=e),options:e.categoryList,clearable:"","show-all-levels":!1,onChange:t.handleChange},null,8,["modelValue","options","onChange"])):(M(),B("div",ve,[H("span",null,W(a.ruleForm.category2?a.ruleForm.category2:"-"),1)]))])),_:1})])),_:1}),z(d,{span:8},{default:A((()=>[z(s,{label:"商品编码："},{default:A((()=>[a.isAdd?(M(),B("span",ke,"-")):(M(),B("span",Fe,W(a.ruleForm.code),1))])),_:1})])),_:1})])),_:1})]),H("div",xe,[H("div",null,[z(p,null,{default:A((()=>[z(d,{span:8},{default:A((()=>[z(s,{label:"商品名称：",prop:"productName"},{default:A((()=>[a.isEdit?(M(),B("div",Ce,[z(m,{placeholder:"请输入",modelValue:a.ruleForm.productName,"onUpdate:modelValue":l[2]||(l[2]=e=>a.ruleForm.productName=e),clearable:"",style:{width:"224px"}},null,8,["modelValue"]),z(c,{onClick:t.quickInput,style:{"margin-left":"10px"},type:"text"},{default:A((()=>[Pe])),_:1},8,["onClick"])])):(M(),B("div",Se,[H("span",null,W(a.ruleForm.productName?a.ruleForm.productName:"-"),1)]))])),_:1})])),_:1}),z(d,{span:8},{default:A((()=>[z(s,{label:"通用名：",prop:"commonName"},{default:A((()=>[a.isEdit?(M(),J(m,{key:0,placeholder:"请输入",modelValue:a.ruleForm.commonName,"onUpdate:modelValue":l[3]||(l[3]=e=>a.ruleForm.commonName=e),clearable:"",style:{width:"224px"}},null,8,["modelValue"])):(M(),B("div",we,W(a.ruleForm.commonName?a.ruleForm.commonName:"-"),1))])),_:1})])),_:1}),z(d,{span:8},{default:A((()=>[z(s,{label:"助记码："},{default:A((()=>[a.isEdit?(M(),J(m,{key:0,placeholder:"请输入",modelValue:a.ruleForm.mnemonicCode,"onUpdate:modelValue":l[4]||(l[4]=e=>a.ruleForm.mnemonicCode=e),clearable:"",style:{width:"224px"}},null,8,["modelValue"])):(M(),B("div",Ie,[H("span",null,W(a.ruleForm.mnemonicCode?a.ruleForm.mnemonicCode:"-"),1)]))])),_:1})])),_:1})])),_:1})]),H("div",null,[z(p,null,{default:A((()=>[z(d,{span:8},{default:A((()=>[z(s,{label:"规格：",prop:"specification"},{default:A((()=>[a.isEdit?(M(),J(m,{key:0,placeholder:"请输入",modelValue:a.ruleForm.specification,"onUpdate:modelValue":l[5]||(l[5]=e=>a.ruleForm.specification=e),clearable:"",style:{width:"224px"}},null,8,["modelValue"])):(M(),B("div",Ve,[H("span",null,W(a.ruleForm.specification?a.ruleForm.specification:"-"),1)]))])),_:1})])),_:1}),z(d,{span:8},{default:A((()=>[z(s,{label:"剂型：",prop:"dosageForm"},{default:A((()=>[a.isEdit?(M(),J(m,{key:0,placeholder:"请输入",modelValue:a.ruleForm.dosageForm,"onUpdate:modelValue":l[6]||(l[6]=e=>a.ruleForm.dosageForm=e),clearable:"",style:{width:"224px"}},null,8,["modelValue"])):(M(),B("div",_e,[H("span",null,W(a.ruleForm.dosageForm?a.ruleForm.dosageForm:"-"),1)]))])),_:1})])),_:1}),z(d,{span:8},{default:A((()=>[z(s,{label:"单位："},{default:A((()=>[a.isEdit?(M(),J(u,{key:0,style:{width:"224px"},clearable:"",modelValue:a.ruleForm.unit,"onUpdate:modelValue":l[7]||(l[7]=e=>a.ruleForm.unit=e),placeholder:"请选择"},{default:A((()=>[(M(!0),B($,null,Y(e.dictUnitInfo,((e,l)=>(M(),J(o,{key:l,label:e.key,value:e.key},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])):(M(),B("div",Ne,[H("span",null,W(a.ruleForm.unit?a.ruleForm.unit:"-"),1)]))])),_:1})])),_:1})])),_:1})]),H("div",null,[z(p,null,{default:A((()=>[z(d,{span:8},{default:A((()=>[z(s,{label:"生产厂家：",prop:"manufacturer"},{default:A((()=>[a.isEdit?(M(),J(m,{key:0,style:{width:"224px"},clearable:"",placeholder:"请输入",modelValue:a.ruleForm.manufacturer,"onUpdate:modelValue":l[8]||(l[8]=e=>a.ruleForm.manufacturer=e)},null,8,["modelValue"])):(M(),B("div",Ue,[H("span",null,W(a.ruleForm.manufacturer?a.ruleForm.manufacturer:"-"),1)]))])),_:1})])),_:1}),z(d,{span:8},{default:A((()=>[z(s,{label:"产地："},{default:A((()=>[a.isEdit?(M(),J(m,{key:0,style:{width:"224px"},clearable:"",placeholder:"请输入",modelValue:a.ruleForm.origin,"onUpdate:modelValue":l[9]||(l[9]=e=>a.ruleForm.origin=e)},null,8,["modelValue"])):(M(),B("div",Te,[H("span",null,W(a.ruleForm.origin?a.ruleForm.origin:"-"),1)]))])),_:1})])),_:1}),z(d,{span:8},{default:A((()=>[z(s,{label:"中包装数：",prop:"number"},{default:A((()=>[a.isEdit?(M(),J(m,{key:0,modelValue:a.ruleForm.number,"onUpdate:modelValue":l[10]||(l[10]=e=>a.ruleForm.number=e),clearable:"",placeholder:"请输入",style:{width:"224px"}},null,8,["modelValue"])):(M(),B("div",De,[H("span",null,W(a.ruleForm.number?a.ruleForm.number:"-"),1)]))])),_:1})])),_:1})])),_:1})]),H("div",null,[z(p,null,{default:A((()=>[z(d,{span:8},{default:A((()=>[z(s,{label:"是否药品：",prop:"isDrug"},{default:A((()=>[a.isEdit?(M(),J(b,{key:0,modelValue:a.ruleForm.isDrug,"onUpdate:modelValue":l[11]||(l[11]=e=>a.ruleForm.isDrug=e)},{default:A((()=>[z(y,{label:!0},{default:A((()=>[Oe])),_:1}),z(y,{label:!1},{default:A((()=>[qe])),_:1})])),_:1},8,["modelValue"])):(M(),B("div",je,[H("span",null,W(a.ruleForm.isDrug?"是":"否"),1)]))])),_:1})])),_:1}),z(d,{span:8},{default:A((()=>[z(s,{label:"采购状态：",prop:"purchaseState"},{default:A((()=>[a.isEdit?(M(),J(u,{key:0,style:{width:"224px"},clearable:"",modelValue:a.ruleForm.purchaseState,"onUpdate:modelValue":l[12]||(l[12]=e=>a.ruleForm.purchaseState=e),placeholder:"请选择"},{default:A((()=>[(M(!0),B($,null,Y(e.purchaseStateList,((e,l)=>(M(),J(o,{key:l,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])):(M(),B("div",Ee,[H("span",null,W(a.ruleForm.purchaseState?e.purchaseState[a.ruleForm.purchaseState]:"-"),1)]))])),_:1})])),_:1}),z(d,{span:8},{default:A((()=>[z(s,{label:"销售状态：",prop:"saleState"},{default:A((()=>[a.isEdit?(M(),J(u,{key:0,style:{width:"224px"},clearable:"",modelValue:a.ruleForm.saleState,"onUpdate:modelValue":l[13]||(l[13]=e=>a.ruleForm.saleState=e),placeholder:"请选择"},{default:A((()=>[(M(!0),B($,null,Y(e.saleStateList,((e,l)=>(M(),J(o,{key:l,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])):(M(),B("div",Le,[H("span",null,W(a.ruleForm.saleState?e.saleState[a.ruleForm.saleState]:"-"),1)]))])),_:1})])),_:1})])),_:1})]),H("div",null,[z(p,null,{default:A((()=>[z(d,{span:8},{default:A((()=>[z(s,{label:"储存条件：",prop:"condition"},{default:A((()=>[a.isEdit?(M(),J(u,{key:0,style:{width:"224px"},clearable:"",modelValue:a.ruleForm.condition,"onUpdate:modelValue":l[14]||(l[14]=e=>a.ruleForm.condition=e),placeholder:"请选择"},{default:A((()=>[(M(!0),B($,null,Y(e.conditionList,((e,l)=>(M(),J(o,{key:l,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])):(M(),B("div",Re,[H("span",null,W(a.ruleForm.condition?e.conditionState[a.ruleForm.condition]:"-"),1)]))])),_:1})])),_:1}),z(d,{span:8},{default:A((()=>[z(s,{label:"养护类型：",prop:"maintenanceType"},{default:A((()=>[a.isEdit?(M(),J(u,{key:0,style:{width:"224px"},clearable:"",modelValue:a.ruleForm.maintenanceType,"onUpdate:modelValue":l[15]||(l[15]=e=>a.ruleForm.maintenanceType=e),placeholder:"请选择"},{default:A((()=>[(M(!0),B($,null,Y(e.maintenanceTypeList,((e,l)=>(M(),J(o,{key:l,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])):(M(),B("div",Me,[H("span",null,W(a.ruleForm.maintenanceType?e.maintenanceType[a.ruleForm.maintenanceType]:"-"),1)]))])),_:1})])),_:1}),z(d,{span:8},{default:A((()=>[z(s,{label:"条码："},{default:A((()=>[a.isEdit?(M(),J(m,{key:0,style:{width:"224px"},modelValue:a.ruleForm.barCode,"onUpdate:modelValue":l[16]||(l[16]=e=>a.ruleForm.barCode=e),clearable:"",placeholder:"请输入"},null,8,["modelValue"])):(M(),B("div",Be,W(a.ruleForm.barCode?a.ruleForm.barCode:"-"),1))])),_:1})])),_:1})])),_:1})]),H("div",null,[z(p,null,{default:A((()=>[z(d,{span:8},{default:A((()=>[z(s,{label:"批准文号："},{default:A((()=>[a.isEdit?(M(),J(m,{key:0,style:{width:"224px"},modelValue:a.ruleForm.approvalNumber,"onUpdate:modelValue":l[17]||(l[17]=e=>a.ruleForm.approvalNumber=e),clearable:"",placeholder:"请输入"},null,8,["modelValue"])):(M(),B("div",ze,W(a.ruleForm.approvalNumber?a.ruleForm.approvalNumber:"-"),1))])),_:1})])),_:1}),z(d,{span:8},{default:A((()=>[z(s,{label:"批准文号有效期至："},{default:A((()=>[a.isEdit?(M(),J(g,{key:0,type:"date",placeholder:"请选择",modelValue:a.ruleForm.validPeriod,"onUpdate:modelValue":l[18]||(l[18]=e=>a.ruleForm.validPeriod=e),style:{width:"224px"},"value-format":"YYYY-MM-DD"},null,8,["modelValue"])):(M(),B("div",Ae,W(a.ruleForm.validPeriod?e.formatDate(a.ruleForm.validPeriod):"-"),1))])),_:1})])),_:1}),z(d,{span:8},{default:A((()=>[z(s,{label:"处方分类：",prop:"prescriptionClass"},{default:A((()=>[a.isEdit?(M(),J(u,{key:0,style:{width:"224px"},clearable:"",modelValue:a.ruleForm.prescriptionClass,"onUpdate:modelValue":l[19]||(l[19]=e=>a.ruleForm.prescriptionClass=e),placeholder:"请选择"},{default:A((()=>[(M(!0),B($,null,Y(e.dictPrescriptionInfo,((e,l)=>(M(),J(o,{key:l,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])):(M(),B("div",He,W(a.ruleForm.prescriptionClass?a.ruleForm.prescriptionClass:"-"),1))])),_:1})])),_:1})])),_:1})]),H("div",null,[z(p,null,{default:A((()=>[z(d,{span:8},{default:A((()=>[z(s,{label:"是否拆零：",prop:"isSplit"},{default:A((()=>[a.isEdit?(M(),J(b,{key:0,modelValue:a.ruleForm.isSplit,"onUpdate:modelValue":l[20]||(l[20]=e=>a.ruleForm.isSplit=e)},{default:A((()=>[z(y,{label:!0},{default:A((()=>[Je])),_:1}),z(y,{label:!1},{default:A((()=>[$e])),_:1})])),_:1},8,["modelValue"])):(M(),B("div",Ye,[H("span",null,W(a.ruleForm.isSplit?"是":"否"),1)]))])),_:1})])),_:1}),z(d,{span:8},{default:A((()=>[z(s,{label:"转换比：",prop:"conversionRatio"},{default:A((()=>[a.isEdit?(M(),J(m,{key:0,modelValue:a.ruleForm.conversionRatio,"onUpdate:modelValue":l[21]||(l[21]=e=>a.ruleForm.conversionRatio=e),clearable:"",placeholder:"请输入",style:{width:"224px"}},null,8,["modelValue"])):(M(),B("div",We,[H("span",null,W(a.ruleForm.conversionRatio?a.ruleForm.conversionRatio:"-"),1)]))])),_:1})])),_:1}),z(d,{span:8},{default:A((()=>[z(s,{label:"拆零单位："},{default:A((()=>[a.isEdit?(M(),J(u,{key:0,style:{width:"224px"},clearable:"",modelValue:a.ruleForm.splitUnit,"onUpdate:modelValue":l[22]||(l[22]=e=>a.ruleForm.splitUnit=e),placeholder:"请选择"},{default:A((()=>[(M(!0),B($,null,Y(e.dictUnitInfo,((e,l)=>(M(),J(o,{key:l,label:e.key,value:e.key},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])):(M(),B("div",Ke,[H("span",null,W(a.ruleForm.splitUnit?a.ruleForm.splitUnit:"-"),1)]))])),_:1})])),_:1})])),_:1})]),H("div",null,[z(p,null,{default:A((()=>[z(d,{span:8},{default:A((()=>[z(s,{label:"上市许可持有人："},{default:A((()=>[a.isEdit?(M(),J(m,{key:0,style:{width:"224px"},clearable:"",placeholder:"请输入",modelValue:a.ruleForm.holderPermit,"onUpdate:modelValue":l[23]||(l[23]=e=>a.ruleForm.holderPermit=e)},null,8,["modelValue"])):(M(),B("div",Ge,[H("span",null,W(a.ruleForm.holderPermit?a.ruleForm.holderPermit:"-"),1)]))])),_:1})])),_:1}),z(d,{span:8},{default:A((()=>[z(s,{label:"上市许可持有人地址："},{default:A((()=>[a.isEdit?(M(),J(m,{key:0,style:{width:"224px"},clearable:"",placeholder:"请输入",modelValue:a.ruleForm.addressPermitHolder,"onUpdate:modelValue":l[24]||(l[24]=e=>a.ruleForm.addressPermitHolder=e)},null,8,["modelValue"])):(M(),B("div",Qe,[H("span",null,W(a.ruleForm.addressPermitHolder?a.ruleForm.addressPermitHolder:"-"),1)]))])),_:1})])),_:1}),z(d,{span:8},{default:A((()=>[z(s,{label:"上市许可持有有效期至："},{default:A((()=>[a.isEdit?(M(),J(g,{key:0,type:"date",placeholder:"请选择",style:{width:"224px"},modelValue:a.ruleForm.expireTime,"onUpdate:modelValue":l[25]||(l[25]=e=>a.ruleForm.expireTime=e),"value-format":"YYYY-MM-DD"},null,8,["modelValue"])):(M(),B("div",Xe,[H("span",null,W(a.ruleForm.expireTime?e.formatDate(a.ruleForm.expireTime):"-"),1)]))])),_:1})])),_:1})])),_:1})]),H("div",null,[z(s,{label:"供应商："},{default:A((()=>[a.isEdit?(M(),J(u,{key:0,style:{width:"224px"},clearable:"",modelValue:a.ruleForm.supplier,"onUpdate:modelValue":l[26]||(l[26]=e=>a.ruleForm.supplier=e),placeholder:"请选择"},{default:A((()=>[(M(!0),B($,null,Y(e.supplierList,(e=>(M(),J(o,{key:e.uuid,label:e.supplierName,value:e.supplierName},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])):(M(),B("div",Ze,[H("span",null,W(a.ruleForm.supplier?a.ruleForm.supplier:"-"),1)]))])),_:1})])]),H("div",el,[H("div",null,[z(p,null,{default:A((()=>[z(d,{span:8},{default:A((()=>[z(s,{label:"零售价(元)：",prop:"retailPrice"},{default:A((()=>[a.isEdit?(M(),J(m,{key:0,style:{width:"224px"},modelValue:a.ruleForm.retailPrice,"onUpdate:modelValue":l[27]||(l[27]=e=>a.ruleForm.retailPrice=e),clearable:"",placeholder:"请输入"},null,8,["modelValue"])):(M(),B("div",ll,[H("span",null,W(a.ruleForm.retailPrice?a.ruleForm.retailPrice:"-"),1)]))])),_:1})])),_:1}),z(d,{span:8},{default:A((()=>[z(s,{label:"会员价(元)：",prop:"memberPrice"},{default:A((()=>[a.isEdit?(M(),J(m,{key:0,style:{width:"224px"},clearable:"",placeholder:"请输入",modelValue:a.ruleForm.memberPrice,"onUpdate:modelValue":l[28]||(l[28]=e=>a.ruleForm.memberPrice=e)},null,8,["modelValue"])):(M(),B("div",al,[H("span",null,W(a.ruleForm.memberPrice?a.ruleForm.memberPrice:"-"),1)]))])),_:1})])),_:1}),z(d,{span:8},{default:A((()=>[z(s,{label:"最高零售价(元)：",prop:"maxRetailPrice"},{default:A((()=>[a.isEdit?(M(),J(m,{key:0,style:{width:"224px"},clearable:"",placeholder:"请输入",modelValue:a.ruleForm.maxRetailPrice,"onUpdate:modelValue":l[29]||(l[29]=e=>a.ruleForm.maxRetailPrice=e)},null,8,["modelValue"])):(M(),B("div",tl,[H("span",null,W(a.ruleForm.maxRetailPrice?a.ruleForm.maxRetailPrice:"-"),1)]))])),_:1})])),_:1})])),_:1})]),H("div",null,[z(p,null,{default:A((()=>[z(d,{span:8},{default:A((()=>[z(s,{label:"进项税率(%)：",prop:"inputTaxRate"},{default:A((()=>[a.isEdit?(M(),J(m,{key:0,style:{width:"224px"},clearable:"",placeholder:"请输入",modelValue:a.ruleForm.inputTaxRate,"onUpdate:modelValue":l[30]||(l[30]=e=>a.ruleForm.inputTaxRate=e)},null,8,["modelValue"])):(M(),B("div",rl,[H("span",null,W(a.ruleForm.inputTaxRate?a.ruleForm.inputTaxRate:"-"),1)]))])),_:1})])),_:1}),z(d,{span:8},{default:A((()=>[z(s,{label:"销项税率(%)：",prop:"outputTaxRate"},{default:A((()=>[a.isEdit?(M(),J(m,{key:0,style:{width:"224px"},clearable:"",placeholder:"请输入",modelValue:a.ruleForm.outputTaxRate,"onUpdate:modelValue":l[31]||(l[31]=e=>a.ruleForm.outputTaxRate=e)},null,8,["modelValue"])):(M(),B("div",il,[H("span",null,W(a.ruleForm.outputTaxRate?a.ruleForm.outputTaxRate:"-"),1)]))])),_:1})])),_:1}),z(d,{span:8},{default:A((()=>[z(s,{label:"批发价(元)：",prop:"wholesalePrice"},{default:A((()=>[a.isEdit?(M(),J(m,{key:0,style:{width:"224px"},clearable:"",placeholder:"请输入",modelValue:a.ruleForm.wholesalePrice,"onUpdate:modelValue":l[32]||(l[32]=e=>a.ruleForm.wholesalePrice=e)},null,8,["modelValue"])):(M(),B("div",ol,[H("span",null,W(a.ruleForm.wholesalePrice?a.ruleForm.wholesalePrice:"-"),1)]))])),_:1})])),_:1})])),_:1})]),H("div",null,[z(s,{label:"含税批发价(元)"},{default:A((()=>[H("span",null,W(a.ruleForm.taxIncludedPrice?a.ruleForm.taxIncludedPrice:"-"),1)])),_:1})])]),a.isEdit?K("",!0):(M(),B("div",ul,[H("div",null,[z(p,null,{default:A((()=>[z(d,{span:8},{default:A((()=>[z(s,{label:"进价(元)：",prop:"purchasePrice"},{default:A((()=>[H("div",null,[H("span",null,W(a.ruleForm.purchasePrice?a.ruleForm.purchasePrice:"-"),1)])])),_:1})])),_:1}),z(d,{span:8},{default:A((()=>[z(s,{label:"含税进价(元)：",prop:"texPurchasePrice"},{default:A((()=>[H("div",null,[H("span",null,W(a.ruleForm.purchasePrice?a.ruleForm.texPurchasePrice:"-"),1)])])),_:1})])),_:1}),z(d,{span:8},{default:A((()=>[z(s,{label:"毛利率(%)：",prop:"grossMargin"},{default:A((()=>[H("div",null,[H("span",null,W(a.ruleForm.purchasePrice?a.ruleForm.grossMargin:"-"),1)])])),_:1})])),_:1})])),_:1})]),H("div",null,[z(p,null,{default:A((()=>[z(d,{span:8},{default:A((()=>[z(s,{label:"最新供应商：",prop:"latestSupplier"},{default:A((()=>[H("div",null,[H("span",null,W(a.ruleForm.latestSupplier?a.ruleForm.latestSupplier:"-"),1)])])),_:1})])),_:1}),z(d,{span:8},{default:A((()=>[z(s,{label:"进场时间：",prop:"inTime"},{default:A((()=>[H("div",null,[H("span",null,W(a.ruleForm.inTime?a.ruleForm.inTime:"-"),1)])])),_:1})])),_:1}),z(d,{span:8},{default:A((()=>[z(s,{label:"首营时间：",prop:"exchangeTime"},{default:A((()=>[H("div",null,[H("span",null,W(a.ruleForm.exchangeTime?a.ruleForm.exchangeTime:"-"),1)])])),_:1})])),_:1})])),_:1})]),H("div",null,[z(p,null,{default:A((()=>[z(d,{span:8},{default:A((()=>[z(s,{label:"最后入库日：",prop:"lastInStorageDate"},{default:A((()=>[H("div",null,[H("span",null,W(a.ruleForm.lastInStorageDate?a.ruleForm.lastInStorageDate:"-"),1)])])),_:1})])),_:1}),z(d,{span:8},{default:A((()=>[z(s,{label:"最后修改时间：",prop:"lastModifiedTime"},{default:A((()=>[H("div",null,[H("span",null,W(a.ruleForm.lastModifiedTime?a.ruleForm.lastModifiedTime:"-"),1)])])),_:1})])),_:1})])),_:1})])]))])),_:1},8,["model","rules"])])}],["__scopeId","data-v-3c96bd54"]]);const dl={name:"user",props:{productBarcodeVos:{type:Array,default:[]},status:{type:String}},setup(e,l){let a=j({columns:[{title:"序号",type:"index",width:50},{title:"条码",key:"tmCode",formConfig:{minWidth:200},render:l=>X(S,{size:"mini",maxlength:18,placeholder:"请输入",disabled:"see"===e.status,"model-value":l.tmCode,onInput:e=>{l.tmCode=e}})},{title:"备注",key:"remark",formConfig:{minWidth:200},render:l=>X(S,{size:"mini",maxlength:100,placeholder:"请输入",disabled:"see"===e.status,"model-value":l.remark,onInput:e=>{l.remark=e}})},{title:"创建时间",key:"createTime",width:180},{title:"添加人",key:"creator",width:80},{title:"操作",key:"options",fixed:"right",width:80,render:({index:l})=>{let a=[{type:"text",innerHTML:"删除",show:"see"===e.status,onClick:()=>{e.productBarcodeVos.splice(l,1)},style:{color:"#f56c6c"}}];return X("div",a.map((e=>{if(!e.show)return X(w,e)})))}}]});return s(u({},L(a)),{addMsg:()=>{e.productBarcodeVos.push({})}})}},nl={class:"extra-info"},pl=[(e=>(Z("data-v-e091c9a4"),e=e(),ee(),e))((()=>H("i",{class:"el-icon-plus"},null,-1))),Q("新增 ")];var ml=D(dl,[["render",function(e,l,a,t,r,i){const o=n;return M(),B("div",nl,[z(o,{"table-data":a.productBarcodeVos,columns:e.columns},null,8,["table-data","columns"]),"see"!==a.status?(M(),B("div",{key:0,class:"add-msg",onClick:l[0]||(l[0]=(...e)=>t.addMsg&&t.addMsg(...e))},pl)):K("",!0)])}],["__scopeId","data-v-e091c9a4"]]);const{status:cl,allCategoryList:yl,dict:bl}=O.state.common;var gl={name:"user",components:{imageUpload:se},props:{ruleForm:{type:Array,default:[]},rules:{type:Object,default:{}},isEdit:{type:Boolean,default:!0},credentialStatus:{type:String,default:""}},setup(e,l){const{_:a}=ne(),t=j({formatDate:_,options:[],columns:[{title:"序号",type:"index",width:50},{title:"资质名称",width:360,render:(l,a,r,i)=>{let u;return z(R("el-select"),{size:"mini",disabled:"see"===e.credentialStatus,class:l[`qualificationName_${i}`],modelValue:l.qualificationName,placeholder:"请选择",onChange:e=>{o(l,"qualificationName",e)}},"function"==typeof(s=u=t.options.map((e=>z(R("el-option"),{key:e.key,label:e.key,value:e.key},null))))||"[object Object]"===Object.prototype.toString.call(s)&&!le(s)?u:{default:()=>[u]});var s}},{title:"图片",width:280,render:(l,a,t,o)=>z(se,{disabled:"see"===e.credentialStatus,files:l.fileUrl,config:{onSuccess:e=>{r(e.data,o)},onRemove:()=>{i(o)}}},null)},{title:"编号",width:165,render:(l,a,t,r)=>z(R("el-input"),{size:"mini",modelValue:l.serialNumber,disabled:"see"===e.credentialStatus,onInput:e=>{o(l,"serialNumber",e,r)},onChange:e=>{o(l,"serialNumber",e,r)},placeholder:"请输入内容"},null)},{title:"注册时间",width:280,render:(l,a,t,r)=>z(de,{size:"mini",class:l[`registrationDate_${r}`],data:l,"key-word":"registrationDate",config:{disabled:"see"===e.credentialStatus,size:"mini",valueFormat:"YYYY-MM-DD",disabledDate:e=>e.getTime()>(new Date).getTime()}},null)},{title:"有效日期",width:280,render:(l,a,t,r)=>z(de,{data:l,class:l[`expireDate_${r}`],"key-word":"expireDate",limit:{keys:["registrationDate","expireDate"],num:180,callback:()=>{I.warning("该商品效期小于180天",{message:"该商品效期小于180天",type:"warning"})}},config:{disabled:"see"===e.credentialStatus,size:"mini",valueFormat:"YYYY-MM-DD",disabledDate:e=>{let a=l.registrationDate;return!!a&&e.getTime()<new Date(a).getTime()-864e5}}},null)},{title:"操作",key:"options",fixed:"right",render:({index:l})=>{let a=[{type:"text",innerHTML:"删除",show:"see"===e.credentialStatus,onClick:()=>{e.ruleForm.splice(l,1)},style:{color:"#f56c6c"}}];return X("div",a.map((e=>{if(!e.show)return X(w,e)})))}}]});function r(e,a){l.emit("handle-change-img",e,a)}function i(e){l.emit("handle-picture-card-remove",e)}const o=(e,l,a,t)=>{e[l]=a};return ae((()=>{t.options=bl.length>0?a.find(bl,{key:"qualificationProduct"}).data:[]})),s(u({},L(t)),{del:function(e,l){l.splice(e,1)},add:function(){l.emit("add",{})},handleChange:r,handlePictureCardRemove:i,dateChange:e=>{if(e.registrationDate&&e.expireDate&&e.registrationDate>e.expireDate)return e.registrationDate="",void I.error("注册日期不得晚于有效期至")},dateChange1:e=>{if(e.registrationDate&&e.expireDate&&e.registrationDate>e.expireDate)return e.expireDate="",void I.error("注册日期不得晚于有效期至")},handleTableChange:o})}};const fl={class:"credential-info"},hl={key:0,style:{"padding-bottom":"20px"}},vl=Q("新增");var kl=D(gl,[["render",function(e,l,a,t,r,i){const o=R("el-button"),u=n;return M(),B("div",fl,["see"!==a.credentialStatus?(M(),B("div",hl,[z(o,{type:"primary",onClick:t.add,size:"small"},{default:A((()=>[vl])),_:1},8,["onClick"])])):K("",!0),z(u,{"table-data":a.ruleForm,columns:e.columns},null,8,["table-data","columns"])])}],["__scopeId","data-v-f9647788"]]);const{status:Fl,allCategoryList:xl,dict:Cl}=O.state.common;var Pl={name:"CommodityManageAddAndEdit",components:{BaseCard:p,tabs:m,baseInfo:sl,extraInfo:ml,credentialInfo:kl,EditForm:d,pagination:ye},setup(e,l){const a=C(),o=P("common",["menus","info","tabs","tabActive"]),d=pe(),n=me(),p=q(null),m=q(null),S=q(null),w=q(null),_=q(null),N=j({purchaseStateList:[],radio:[],saleStateList:[],conditionList:[],maintenanceTypeList:[],getDictList:[],getUnitList:[],dictPrescriptionList:[],setsStatus:n.query.state,userInfo:G(o.info.bind({$store:a}))}),U=q(null),D=j({drugOtcFlag:{0:"RX",1:"OTC",2:"-"},columns:[{title:"零售价",width:100,key:"retailPrice"},{title:"会员价",width:100,key:"memberPrice"},{title:"进价",width:100,key:"purchasePrice"},{title:"含税进价",width:100,key:"texPurchasePrice"},{title:"毛利率%",width:100,key:"grossMargin"},{title:"最新供应商",width:200,key:"latestSupplier"},{title:"进场时间",width:200,key:"inTime"},{title:"最后入库日",width:200,key:"lastInStorageDate"}],businessUuidLength:0,categoryMenuList:[{label:"中药饮片",value:"2"},{label:"西药中成药",value:"1"}],multipleStore:0,type:0,productBarcodeVos:[],history:{},show:!1,loading:!1,product:null,productObj:{drugSource:"1"},cities:[],storeUuid:"",activeName:"0",stayleConfig:{width:"165px"},categoryList:[],formData:{span:4,labelWidth:"165px",labelPosition:"top",config:{disabled:!1},list:[{type:"SELECT",key:"category1",label:"商品类别",list:()=>N.getDictList,require:!0,rules:[{required:!0,message:"请输入商品分类",trigger:"change"}],config:{onChange(e){O(e)}}},{type:"CASCADER",key:"category2Uuid",label:"商品分类",list:()=>D.categoryList,onchange:e=>K(e),require:!0,levels:!0,width:"165px",rules:[{type:"array",required:!0,message:"请输入商品分类",trigger:"change"}]},{type:"RADIO",key:"isDrug",label:"是否药品",list:()=>N.radio,require:!0,rules:[{required:!0,message:"请输入商品分类",trigger:"blur"}]},{type:"SELECT",key:"prescriptionClass",label:"处方分类",list:()=>N.dictPrescriptionList,require:!0,rules:[{required:!0,message:"请输入商品分类",trigger:"change"}]},{type:"INPUT",key:"code",label:"商品编码"}]},formData2:{span:4,labelWidth:"165px",labelPosition:"top",config:{disabled:!1},list:[{type:"INPUT-TOOL-TIP",key:"productName",label:"商品名称",require:!0,config:{class:"product-name-input"},tips:()=>D.quickInfo.name?D.quickInfo.name:D.submitForm.productName,tipsDisabled:()=>!0,rules:[{required:!0,message:"请输入商品分类",trigger:"blur"}],addBtn:!0,onchange:e=>{D.submitForm.mnemonicCode=x(e)[0].toString(),A(1,D.submitForm.productName)},suffix:{tempHtml:()=>z("div",{style:"margin-left: 10px;background: transparent ;height: 100% ;position:absolute; top: -25px;right: -5px;}"},[z(R("el-button"),{type:"text",onClick:e=>{B()}},{default:()=>[z("span",null,[Q("快速录入")])]})])}},{type:"INPUT",key:"commonName",label:"通用名"},{type:"INPUT",key:"specification",label:"规格",require:!0},{type:"SELECT",key:"unit",label:"单位",list:()=>N.getUnitList,require:!0,rules:[{required:!0,message:"请选择单位",trigger:"blur"}]},{type:"AUTOCOMPLETE",key:"dosageForm",label:"剂型",require:!0,list:()=>N.getDosageList,rules:[{required:!0,message:"请选择剂型",trigger:"blur"}]},{type:"INPUT",key:"manufacturer",label:"生产厂家",require:!0},{type:"INPUT",key:"origin",label:"产地"},{type:"INPUT",key:"barCode",label:"条码"},{type:"INPUT",key:"retailPrice",label:"零售价",require:!0,rules:[{required:!0,pattern:/^(([1-9]{1}\d*)|(0{1}))(\.\d{1,6})?$/,message:"请输入正确格式,可保留6位小数",trigger:"blur"}]},{type:"INPUT",key:"memberPrice",label:"会员价",rules:[{pattern:/^(([1-9]{1}\d*)|(0{1}))(\.\d{1,6})?$/,message:"请输入正确格式,可保留6位小数",trigger:"blur"}]},{type:"RADIO",key:"isSplit",label:"是否拆零",list:()=>N.radio,require:!0,rules:[{required:!0,message:"请输入商品分类",trigger:"blur"}]},{type:"INPUT",key:"conversionRatio",label:"转换比",disabled:()=>!D.submitForm.isSplit,rules:[{required:!1,pattern:/^\+?[1-9][0-9]*$/,transformation:!1,message:"请输入整型数据",trigger:"blur"}]},{type:"SELECT",key:"splitUnit",label:"拆零单位",disabled:()=>!D.submitForm.isSplit,list:()=>N.getUnitList},{type:"RADIO",key:"isColdChain",label:"冷链",list:()=>N.radio,require:!0,rules:[{required:!0,message:"请输入商品分类",trigger:"blur"}]},{type:"RADIO",key:"isSpecial",label:"含麻黄碱",list:()=>N.radio,require:!0,rules:[{required:!0,message:"请输入商品分类",trigger:"blur"}]},{type:"SELECT",key:"condition",label:"存储条件",list:()=>N.conditionList,require:!0,rules:[{required:!0,message:"请输入商品分类",trigger:"change"}]},{type:"SELECT",key:"maintenanceType",label:"养护类型",list:()=>N.maintenanceTypeList,require:!0,rules:[{required:!0,message:"请输入商品分类",trigger:"change"}]},{type:"INPUT",key:"mnemonicCode",label:"助记码"},{type:"INPUT",key:"approvalNumber",label:"批准文号"},{type:"INPUT",key:"holderPermit",label:"上市许可持有人"}]},formData6:{span:4,labelWidth:"165px",labelPosition:"top",config:{disabled:!1},list:[{type:"INPUT-TOOL-TIP",key:"productName",label:"商品名称",require:!0,config:{class:"product-name-input"},tips:()=>D.quickInfo.name?D.quickInfo.name:D.submitForm.productName,tipsDisabled:()=>!0,rules:[{required:!0,message:"请输入商品分类",trigger:"blur"}],addBtn:!0,onchange:e=>{D.submitForm.mnemonicCode=x(e)[0].toString(),A(1,D.submitForm.productName)},suffix:{tempHtml:()=>z("div",{style:"margin-left: 10px;background: transparent ;height: 100% ;position:absolute; top: -25px;right: -5px;}"},[z(R("el-button"),{type:"text",onClick:e=>{B()}},{default:()=>[z("span",null,[Q("快速录入")])]})])}},{type:"INPUT",key:"commonName",label:"通用名"},{type:"INPUT",key:"specification",label:"规格",require:!0},{type:"SELECT",key:"unit",label:"单位",list:()=>N.getUnitList,require:!0,rules:[{required:!0,message:"请选择单位",trigger:"blur"}]},{type:"AUTOCOMPLETE",key:"dosageForm",label:"剂型",require:!0,list:()=>N.getDosageList,rules:[{required:!0,message:"请选择剂型",trigger:"blur"}]},{type:"INPUT",key:"manufacturer",label:"生产厂家",require:!0},{type:"INPUT",key:"origin",label:"产地"},{type:"INPUT",key:"barCode",label:"条码"},{type:"INPUT",key:"retailPrice",label:"参考零售价",require:!0,rules:[{required:!0,pattern:/^(([1-9]{1}\d*)|(0{1}))(\.\d{1,6})?$/,message:"请输入正确格式,可保留6位小数",trigger:"blur"}]},{type:"INPUT",key:"memberPrice",label:"参考会员价",rules:[{pattern:/^(([1-9]{1}\d*)|(0{1}))(\.\d{1,6})?$/,message:"请输入正确格式,可保留6位小数",trigger:"blur"}]},{type:"RADIO",key:"isSplit",label:"是否拆零",list:()=>N.radio,require:!0,rules:[{required:!0,message:"请输入商品分类",trigger:"blur"}]},{type:"INPUT",key:"conversionRatio",label:"转换比",disabled:()=>!D.submitForm.isSplit,require:!1,rules:[{required:!1,pattern:/^\+?[1-9][0-9]*$/,transformation:!1,message:"请输入整型数据",trigger:"blur"}]},{type:"SELECT",key:"splitUnit",label:"拆零单位",disabled:()=>!D.submitForm.isSplit,list:()=>N.getUnitList},{type:"RADIO",key:"isColdChain",label:"冷链",list:()=>N.radio,require:!0,rules:[{required:!0,message:"请输入商品分类",trigger:"blur"}]},{type:"RADIO",key:"isSpecial",label:"含麻黄碱",list:()=>N.radio,require:!0,rules:[{required:!0,message:"请输入商品分类",trigger:"blur"}]},{type:"SELECT",key:"condition",label:"存储条件",list:()=>N.conditionList,require:!0,rules:[{required:!0,message:"请输入商品分类",trigger:"change"}]},{type:"SELECT",key:"maintenanceType",label:"养护类型",list:()=>N.maintenanceTypeList,require:!0,rules:[{required:!0,message:"请输入商品分类",trigger:"change"}]},{type:"INPUT",key:"mnemonicCode",label:"助记码"},{type:"INPUT",key:"approvalNumber",label:"批准文号"},{type:"INPUT",key:"holderPermit",label:"上市许可持有人"}]},formData3:{span:4,labelWidth:"165px",labelPosition:"top",config:{disabled:!1},list:[{type:"SELECT",key:"saleState",label:"销售状态",list:()=>N.saleStateList,rules:[{required:!0,message:"请输入商品分类",trigger:"change"}]},{type:"SELECT",key:"purchaseState",label:"采购状态",list:()=>N.purchaseStateList},{type:"INPUT",key:"inputTaxRate",label:"进项税率",rules:[{required:!1,pattern:/^([0]|[1-9][0-9]*)$/,transformation:!1,message:"请输入整型数据",trigger:"blur"}]},{type:"INPUT",key:"outputTaxRate",label:"销项税率",rules:[{required:!1,pattern:/^([0]|[1-9][0-9]*)$/,transformation:!1,message:"请输入整型数据",trigger:"blur"}]},{type:"INPUT",key:"wholesalePrice",label:"批发价",list:()=>N.radio,rules:[{pattern:/^(([1-9]{1}\d*)|(0{1}))(\.\d{1,4})?$/,message:"请输入正确格式,可保留4位小数",trigger:"blur"}]},{type:"INPUT",key:"maxRetailPrice",label:"最高零售价",rules:[{pattern:/^(([1-9]{1}\d*)|(0{1}))(\.\d{1,6})?$/,message:"请输入正确格式,可保留6位小数",trigger:"blur"}]},{type:"INPUT",key:"taxIncludedPrice",label:"含税批发价"},{type:"NUMBER-INPUT",key:"number",label:"最小包装数",precision:0},{type:"DATEPICKER",key:"validPeriod",label:"批准文号有效期至"},{type:"INPUT",key:"brand",label:"品牌"},{type:"INPUT",key:"addressPermitHolder",label:"上市许可持有人地址"},{type:"DATEPICKER",key:"expireTime",label:"上市许可持有有效期至"},{type:"RADIO",key:"isInlet",label:"进口",list:()=>N.radio},{type:"RADIO",key:"isDoubleAcceptance",label:"是否双人验收",list:()=>N.radio},{type:"INPUT",key:"nativeCode",label:"本位码"},{type:"INPUT",key:"routeOfMedication",label:"用药途径"},{type:"INPUT",key:"lifeCycle",label:"使用周期",rules:[{pattern:/^([1-9]\d{0,3}\.\d{1,2}|0\.\d{0,2}||[1-9]\d{0,3})$/,message:"请输入正确格式,可保留2位小数",trigger:"blur"}]},{type:"INPUT",key:"frequency",label:"频次"},{type:"INPUT",key:"dosageEachTime",label:"每次用量"},{type:"INPUT",key:"dosageUnit",label:"剂量单位"},{type:"INPUT",key:"validDate",label:"有效天数",rules:[{required:!1,pattern:/^[0-9]\d*$/,trigger:"blur",message:"请输入整数"}]},{type:"INPUT",key:"functionIndication",label:"功能主治"}]},category2Uuid:"",formData4:{span:4,labelWidth:"85px",config:{disabled:!1},list:[{type:"DIV",key:"purchasePrice",label:"进价",style:{"font-weight":"bold"}},{type:"DIV",key:"texPurchasePrice",label:"含税进价",style:{"font-weight":"bold"}},{type:"DIV",key:"grossMargin",label:"毛利率(%)",style:{"font-weight":"bold"}},{type:"DIV",key:"latestSupplier",label:"最新供应商",style:{"font-weight":"bold"}},{type:"DIV",key:"inTime",label:"进场时间",style:{"font-weight":"bold"}},{type:"DIV",key:"exchangeTime",label:"首营时间",style:{"font-weight":"bold"}},{type:"DIV",key:"lastInStorageDate",label:"最后入库日",style:{"font-weight":"bold"}},{type:"DIV",key:"lastModifiedTime",label:"最后修改时间",style:{"font-weight":"bold"}}]},formData5:{span:4,labelWidth:"85px",config:{disabled:!1},list:[{type:"DIV",key:"exchangeTime",label:"首营时间",style:{"font-weight":"bold"}},{type:"DIV",key:"lastModifiedTime",label:"最后修改时间",style:{"font-weight":"bold"}}]},storeInfoFormData:{span:6,labelWidth:"85px",config:{disabled:!0},list:[{type:"INPUT",key:"retailPrice",label:"零售价"},{type:"INPUT",key:"memberPrice",label:"会员价"},{type:"DIV",key:"purchasePrice",label:"进价"},{type:"DIV",key:"texPurchasePrice",label:"含税进价"},{type:"DIV",key:"grossMargin",label:"毛利率%"},{type:"DIV",key:"latestSupplier",label:"最新供应商"},{type:"DIV",key:"inTime",label:"进场时间"},{type:"DIV",key:"lastInStorageDate",label:"最后入库时间"}]},storeInfoForm:[],storeInfoSubmitForm:[],tabClose:!1,verifi1:null,verifi2:null,verifi3:null,status:n.query.state,baseInfo:null,modelVisible:!1,tableData:[{},{},{}],tabs:"0",pagination:{"page.currentPage":1,"page.pageSize":10,total:0},selectPage:{"page.currentPage":1,"page.pageSize":10},gridData:[],quickInfo:{},supplierList:[],extraForm:{brand:"",dosageEachTime:"",dosageUnit:"",frequency:"",functionIndication:"",isColdChain:!1,isDoubleAcceptance:!1,isInlet:!1,isSpecial:!1,lifeCycle:"",nativeCode:"",qualityStandard:"",routeOfMedication:"",validDate:""},credentialForms:[],storePriceList:[],tabList:[{label:"基础信息",name:"0"},{label:"辅助信息",name:"1"},{label:"资质信息",name:"2"}],page:{"page.currentPage":1,"page.pageSize":10,type:"西药中成药"},extraInfoRules:{validDate:[{required:!1,pattern:/^[0-9]\d*$/,trigger:"blur",message:"请输入整数"}]},submitForm:{isDrug:!0,isSplit:!1,purchaseState:1,saleState:1,inputTaxRate:0,outputTaxRate:0,category2:"",category2Uuid:"",productName:"",condition:1,retailPrice:"",prescriptionClass:"",maintenanceType:1,isColdChain:!1,isSpecial:!1,dosageForm:""},drugSourceType:""}),O=e=>{D.productObj.drugSource="中药饮片"==e?"2":"1"},M=async()=>{try{const e=await b();D.categoryList=JSON.parse(JSON.stringify(e)),D.categoryList.map((e=>{e.value=e.uuid,e.label=e.categoryName,e.children=e.list,e.children.map((e=>{e.value=e.uuid,e.label=e.name}))}))}catch(e){return e}},B=async()=>{D.page["page.currentPage"]=1,D.page["page.pageSize"]=10,D.page.key="",D.page.type=D.submitForm.category1&&"中药饮片"==D.submitForm.category1?"2":"1",D.modelVisible=!0,W(),m.value&&await m.value.focus()};function A(e,l){let a=s(u({type:e,keyword:l},D.selectPage),{drugType:D.productObj.drugSource?D.productObj.drugSource:"中药饮片"==D.submitForm.category1?"2":"1"});c(a).then((e=>{D.cities=e.tdata.list,e.tdata.list.length>0?(D.product=e.tdata.list[0].uuid,D.productObj=e.tdata.list[0]):(D.productObj=s(u({},e.tdata.list[0]),{drugSource:D.drugSourceType}),D.product="")}))}const H=async()=>{let e=n.query.uuid;const l=await f(e);l.basic.number=l.basic.number?l.basic.number:void 0,D.submitForm=u(u({},l.basic),l.extra),D.extraForm=l.extra,D.credentialForms=l.credential;let a=l,{productBarcodeVos:o,extra:d,basic:p,drugBasicUuid:m}=a,c=((e,l)=>{var a={};for(var o in e)r.call(e,o)&&l.indexOf(o)<0&&(a[o]=e[o]);if(null!=e&&t)for(var o of t(e))l.indexOf(o)<0&&i.call(e,o)&&(a[o]=e[o]);return a})(a,["productBarcodeVos","extra","basic","drugBasicUuid"]);D.productObj=c||{},m&&(D.cities=[s(u({},c),{uuid:m})],D.product=m||""),D.productBarcodeVos=o||[],D.storePriceList=l.prices,D.storeInfoSubmitForm=l.prices,l.prices.map((e=>{D.storeInfoForm.push(D.storeInfoFormData)})),0==N.userInfo.openMultipleStores&&(D.submitForm.memberPrice=l.prices[0].memberPrice,D.submitForm.retailPrice=l.prices[0].retailPrice)},J=()=>{ae(),D.status=n.query.state,N.purchaseStateList=[{value:1,label:"正常"},{value:2,label:"停购"}],N.radio=[{label:"是",value:!0},{label:"否",value:!1}],N.saleStateList=[{value:1,label:"正常"},{value:2,label:"停销"}],N.conditionList=[{value:1,label:"常温"},{value:2,label:"阴凉"},{value:3,label:"冷藏"}],N.maintenanceTypeList=[{value:1,label:"一般养护"},{value:2,label:"重点养护"}],N.getDictList=(()=>{if(Cl.length>0)return Cl.filter(((e,l)=>"category1"===e.key))[0].data.map((e=>({value:e.key,label:e.key})))})(),N.getUnitList=(()=>{if(Cl.length>0)return Cl.filter(((e,l)=>"unit"===e.key))[0].data.map((e=>({value:e.key,label:e.key})))})(),N.getDosageList=(()=>{const e=Cl.filter(((e,l)=>"dosageForm"===e.key));if(0===e.length)return;return e[0].data.map((e=>({value:e.key,label:e.key})))})(),N.dictPrescriptionList=(()=>{if(Cl.length>0)return Cl.filter(((e,l)=>"prescription"===e.key))[0].data.map((e=>({value:e.key,label:e.key})))})(),M(),(async()=>{try{const e=await g();D.supplierList=e.map((e=>({value:e.supplierName,label:e.supplierName})))}catch(e){return e}})(),n.query.uuid?(D.storeUuid=n.query.uuid,D.activeName="0",H()):(D.storeUuid=void 0,D.submitForm={isDrug:!0,isSplit:!1,purchaseState:1,saleState:1,inputTaxRate:0,outputTaxRate:0,category2:"",category2Uuid:"",productName:"",condition:1,retailPrice:"",prescriptionClass:"",maintenanceType:1,isColdChain:!1,isSpecial:!1,isInlet:!1,isDoubleAcceptance:!1},D.credentialForms=[],D.productBarcodeVos=[],D.productObj={drugSource:"1"},D.product="")},$=e=>{e?(N.setsStatus="edit",D.status="edit"):N.setsStatus=n.query.state,D.formData.config.disabled="see"===N.setsStatus,D.formData3.config.disabled="see"===N.setsStatus,D.formData2.config.disabled="see"===N.setsStatus,D.formData6.config.disabled="see"===N.setsStatus},Y=async()=>{let e=await a.dispatch("common/mechanism");D.businessUuidLength=e.length};E((()=>{te((async()=>{"see"!==D.status&&await m.value.focus()})),Y(),D.multipleStore=a.state.common.info.openMultipleStores,D.type=n.query.type,D.status=n.query.state,"see"!==D.status&&B(),$(),k({name:"openMultipleStores"}).then((e=>{N.userInfo.openMultipleStores=e.value})),"see"===N.setsStatus&&(h({productUuid:n.query.uuid}).then((e=>{D.history=e})),H()),D.storeUuid!==n.query.uuid&&J()}));const W=async()=>{try{const e=await y(D.page);D.gridData=e.list,D.pagination["page.currentPage"]=e.currentPage,D.pagination.total=e.totalElements;let l=ce.findIndex(D.gridData,{uuid:D.quickInfo.uuid});te((()=>{void 0!==l&&U.value.setCurrentRow(D.gridData[l])}))}catch(e){return e}};function K(e){if(D.submitForm.category2Uuid){JSON.parse(JSON.stringify(D.categoryList)).forEach((l=>{l.uuid==e[0]&&l.list.forEach((a=>{a.uuid==e[1]&&(D.submitForm.category2=l.categoryName+"/"+a.name)}))})),D.submitForm.category2Uuid=e[1]}}const X=q(null),Z=q(null),ee=q(null),le=async(e,l)=>{const a=0==e?"是否暂存商品信息":"是否提交商品审核信息";V.confirm(a,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",beforeClose:async(a,t,r)=>{if("confirm"===a)try{t.confirmButtonLoading=!0,t.confirmButtonText="执行中...",D.productObj.drugBasicUuid=D.productObj.uuid;let a=[];D.productBarcodeVos.forEach((e=>{e.tmCode&&a.push(e)}));let i={inspect:0!=e,update:s(u({basic:l,credential:D.credentialForms,extra:l},D.productObj),{productBarcodeVos:a}),uuid:n.query.uuid};await v(i),setTimeout((()=>{r(),t.confirmButtonLoading=!1,D.tabClose=!0,D.loading=!1}),1e3)}catch(i){t.confirmButtonLoading=!1,D.loading=!1,r()}else D.loading=!1,r()}}).catch((e=>e))},ae=()=>{F(D.submitForm).then((e=>{a.commit("common/DICT",e)}))};return s(u(u({elTable:U,editForm:X,editForm1:Z,editForm2:ee,baseInfoForm:p,extraInfoForm:S,credentialInfoForm:w},L(D)),L(N)),{pageSize:_,selectActiveName:async e=>{D.tabs=e},handleClick:function(e,l){l.splice(l,1)},goBack:function(){D.tabClose=!0},quickInput:B,getQuickImportData:W,handleSizeChange:function(e){D.page["page.pageSize"]=e,W()},handleCurrentChange:function(e){D.page["page.currentPage"]=e,W()},queryBaseForm:function(){D.page["page.currentPage"]=1,W()},selectRows:function(e){D.quickInfo=JSON.parse(JSON.stringify(e))},enter:function(){if("{}"===JSON.stringify(D.quickInfo))return I.warning("请选择对应商品！"),!1;D.submitForm.productName=D.quickInfo.drugName,D.submitForm.unit=D.quickInfo.minPacunt,D.submitForm.commonName=D.quickInfo.drugName,D.submitForm.specification=D.quickInfo.size,D.submitForm.manufacturer=D.quickInfo.prodentpName,D.submitForm.approvalNumber=D.quickInfo.aprvno,D.submitForm.mnemonicCode=x(D.quickInfo.drugName)[0].toString(),D.submitForm.dosageForm=D.quickInfo.minPrepunt,D.modelVisible=!1,D.productObj.drugSource=D.page.type,A(2,D.submitForm.approvalNumber?D.submitForm.approvalNumber:D.submitForm.productName)},add:function(){D.credentialForms.push({expireDate:"",fileUrl:"",qualificationName:"",registrationDate:"",serialNumber:""})},pushSubmit:async e=>{let{submitForm:l}=D;if(e&&!(l.category1&&l.category2Uuid&&l.productName&&l.condition&&l.retailPrice&&l.maintenanceType&&l.prescriptionClass))return D.activeName="0",await te(),X.value.handleClick(e),Z.value.handleClick(e),void ee.value.handleClick(e);if(D.verifi1=X.value.handleClick(e),D.verifi2=ee.value.handleClick(e),D.verifi3=Z.value.handleClick(e),D.verifi1&&D.verifi2&&D.verifi3){if("0"===D.activeName&&e){if(l.isSplit&&(!l.conversionRatio||!l.splitUnit))return void I.error("转换比和拆零单位不能为空！");if(0==l.retailPrice||!l.retailPrice)return void I.error("零售价不能为空且大于0")}D.loading=!0,(async(e,l)=>{1==(await T({productUuid:D.quickInfo.uuid,barcode:D.submitForm.barCode,isFirst:0})).isDistinct?V.confirm("该商品条码已有商品使用，是否继续提交？","提示",{confirmButtonText:"是",cancelButtonText:"否",type:"warning",center:!0,beforeClose:async(a,t,r)=>{"confirm"===a?(r(),le(e,l)):r()}}).catch((e=>e)):le(e,l)})(e,l)}},handleChangeImg:function(e,l){D.credentialForms[l].fileUrl=e},handlePictureCardRemove:function(e){D.credentialForms[e].fileUrl=""},getAllCategoryList:b,selectCategory:K,selectBblclick:function(e){D.quickInfo=JSON.parse(JSON.stringify(e)),D.submitForm.productName=D.quickInfo.drugName,D.submitForm.unit=D.quickInfo.minPacunt,D.submitForm.commonName=D.quickInfo.drugName,D.submitForm.specification=D.quickInfo.size,D.submitForm.manufacturer=D.quickInfo.prodentpName,D.submitForm.approvalNumber=D.quickInfo.aprvno,D.submitForm.mnemonicCode=x(D.quickInfo.drugName)[0].toString(),D.submitForm.dosageForm=D.quickInfo.minPrepunt,D.modelVisible=!1,D.productObj.drugSource=D.page.type,A(2,D.submitForm.approvalNumber?D.submitForm.approvalNumber:D.submitForm.productName)},initData:J,getAllCategoryListData:M,productChange:function(e){let l=ce.find(D.cities,{uuid:D.product});D.productObj=l},remoteMethod:function(e){let l=e.replace(/(^\s*)|(\s*$)/g,"");l?(D.loading=!0,setTimeout((()=>{D.loading=!1,A(3,l)}),200)):D.options=[]},setStaute:$,setUrl:()=>{d.push({name:"AddAndEditModifyInfo",query:{uuid:n.query.uuid,modifyStatus:"edit",name:D.submitForm.productName}})},commodityHandleClick:()=>{D.page.type=D.commodityActiveName,W()},commoditySelectData:O,selectCategoryMenuData:e=>{D.product="",D.drugSourceType=e,A("3",D.submitForm.productName)},selectCommodityDialog:e=>{D.page.type=e,D.page["page.currentPage"]=1,D.page["page.pageSize"]=10,W()},drugInsuranceTypeData:e=>e&&e.indexOf("甲")>=0?"甲":e&&e.indexOf("乙")>=0?"乙":e&&e.indexOf("丙")>=0?"丙":"",getBusinessUuidLength:Y,elAutofocus:m})}};const Sl=e=>(Z("data-v-27d146c4"),e=e(),ee(),e),wl={class:"main"},Il=[Sl((()=>H("span",{class:"commodity_title"},"查看商品",-1)))],Vl=Q(" 暂存 "),_l=Q(" 提交审核 "),Nl=Q(" 编辑 "),Ul={class:"title"},Tl={class:"c1"},Dl={class:"s1"},Ol={class:"s2"},ql={class:"c2"},jl={class:"c3"},El={class:"c4"},Ll={key:0,style:{height:"1px","background-color":"#e4e7ed","margin-top":"10px"}},Rl={class:"code-list"},Ml=Sl((()=>H("div",{class:"d1"},"医保对码(国)",-1))),Bl={style:{"margin-left":"16px","margin-top":"10px"}},zl={class:"d2"},Al={class:"c3"},Hl={key:0,class:"medical-select"},Jl=Sl((()=>H("div",{class:"space-list"},[H("div",{class:"space",style:{width:"150px"}}," 商品名称 "),H("div",{class:"space",style:{width:"150px"}}," 规格 "),H("div",{class:"space",style:{width:"150px"}}," 最小包装数量 "),H("div",{class:"space",style:{width:"50px"}}," 单位 "),H("div",{class:"space",style:{width:"180px"}}," 生产厂家 ")],-1))),$l={class:"space-list"},Yl={class:"space",style:{width:"150px"}},Wl={class:"space",style:{width:"150px"}},Kl={class:"space",style:{width:"150px"}},Gl={class:"space",style:{width:"50px"}},Ql={class:"space",style:{width:"180px"}},Xl={key:1,class:"medical-select"},Zl=Sl((()=>H("div",{class:"space-list"},[H("div",{class:"space",style:{width:"150px"}}," 中草药名称 "),H("div",{class:"space",style:{width:"150px"}}," 常规用法 "),H("div",{class:"space",style:{width:"150px"}}," 国家编码 "),H("div",{class:"space",style:{width:"150px"}}," 省级医保支付政策 "),H("div",{class:"space",style:{width:"180px"}}," 主治功能 ")],-1))),ea={class:"space-list"},la={class:"space",style:{width:"150px"}},aa={class:"space",style:{width:"150px"}},ta={class:"space",style:{width:"150px"}},ra={class:"space",style:{width:"150px"}},ia={class:"space",style:{width:"180px"}},oa={style:{"font-size":"14px","margin-left":"10px"}},ua={style:{"font-size":"12px","margin-top":"6px"}},sa={class:"c1"},da={class:"t1"},na={class:"c2"},pa={class:"t1"},ma={class:"c2"},ca={class:"t1"},ya={style:{"margin-top":"10px",color:"#909399"}},ba={class:"usage-tips"},ga={style:{width:"200px","margin-top":"5px"}},fa={class:"select-commodity"},ha={style:{padding:"0px 30px 30px 30px"}},va={class:"flex"},ka=Q(" 查询 "),Fa={style:{"text-align":"right","margin-top":"30px"}},xa={key:0},Ca={style:{"text-align":"right","margin-top":"30px"}},Pa={key:1},Sa={style:{"text-overflow":"ellipsis","white-space":"nowrap",width:"100%",overflow:"hidden"}},wa={style:{"text-align":"right","margin-top":"30px"}},Ia={class:"dialog-footer"},Va={style:{padding:"10px 20px"}},_a=Q("直接创建 "),Na=Q("取 消 "),Ua=Q("确 定 ");var Ta=D(Pl,[["render",function(e,l,a,t,r,i){const o=R("el-button"),u=d,s=R("el-option"),m=R("el-select"),c=R("el-input"),y=R("el-tab-pane"),b=R("extra-info"),g=R("credential-info"),f=n,h=R("el-tabs"),v=R("el-form-item"),k=R("el-form"),F=R("el-table-column"),x=R("el-table"),C=R("pagination"),P=R("el-dialog"),S=p,w=R("el-scrollbar"),I=re("loading");return M(),B("div",{class:"commodity_edit",onClick:l[31]||(l[31]=l=>e.show=!1)},[z(w,null,{default:A((()=>[ie(H("div",wl,[z(S,{close:e.tabClose,route:{path:"/commodity-manage/goods"}},{header:A((()=>[H("div",{onClick:l[0]||(l[0]=(...e)=>t.goBack&&t.goBack(...e)),style:{cursor:"pointer"}},Il),H("div",null,["see"!==e.status?(M(),J(o,{key:0,size:"small",onClick:l[1]||(l[1]=e=>t.pushSubmit(!1))},{default:A((()=>[Vl])),_:1})):K("",!0),"see"!==e.status?(M(),J(o,{key:1,type:"primary",size:"small",onClick:l[2]||(l[2]=e=>t.pushSubmit(!0)),loading:e.loading},{default:A((()=>[_l])),_:1},8,["loading"])):K("",!0),"see"!=e.status||2!=e.type&&3!=e.type?K("",!0):(M(),J(o,{key:2,type:"primary",size:"small",onClick:l[3]||(l[3]=e=>t.setUrl())},{default:A((()=>[Nl])),_:1}))])])),default:A((()=>[e.history.length&&"0"==e.activeName?(M(),B("div",{key:0,class:"history",onClick:l[4]||(l[4]=oe((l=>e.show=!e.show),["stop"]))}," 历史记录 ")):K("",!0),e.history.length&&e.show?(M(),B("div",{key:1,class:"history-list",onClick:l[5]||(l[5]=oe((l=>e.show=!0),["stop"]))},[H("div",Ul,W(e.history[0].productName),1),(M(!0),B($,null,Y(e.history,((l,a)=>(M(),B("div",{class:"list",key:a},[H("div",Tl,[H("span",Dl,W(l.modifyNo),1),H("span",Ol,W(l.updator),1),H("span",null,W(l.modifyDate),1)]),(M(!0),B($,null,Y(l.proModyLogVos,((e,l)=>(M(),B($,{key:l},[H("div",ql,W(e.modifyName),1),H("div",jl,[H("span",null,"原："+W("true"==e.oldValue?"是":"false"==e.oldValue?"否":e.oldValue),1)]),H("div",El,[H("span",null,"现："+W("true"==e.newValue?"是":"false"==e.newValue?"否":e.newValue),1)])],64)))),128)),a<e.history.length-1?(M(),B("div",Ll)):K("",!0)])))),128))])):K("",!0),z(h,{modelValue:e.activeName,"onUpdate:modelValue":l[25]||(l[25]=l=>e.activeName=l)},{default:A((()=>[z(y,{label:"基础信息",name:"0"},{default:A((()=>[z(u,{style:{"border-bottom":"1px solid #ededed"},stayleConfig:e.stayleConfig,"form-data":e.formData,"onUpdate:form-data":l[6]||(l[6]=l=>e.formData=l),"submit-form":e.submitForm,"onUpdate:submit-form":l[7]||(l[7]=l=>e.submitForm=l),ref:"editForm"},null,8,["stayleConfig","form-data","submit-form"]),"1"==e.userInfo.openMultipleStores?(M(),J(u,{key:0,style:{"margin-top":"16px"},stayleConfig:e.stayleConfig,"form-data":e.formData6,"onUpdate:form-data":l[8]||(l[8]=l=>e.formData6=l),"submit-form":e.submitForm,"onUpdate:submit-form":l[9]||(l[9]=l=>e.submitForm=l),ref:"editForm1"},null,8,["stayleConfig","form-data","submit-form"])):(M(),J(u,{key:1,"form-data":e.formData2,"onUpdate:form-data":l[10]||(l[10]=l=>e.formData2=l),"submit-form":e.submitForm,"onUpdate:submit-form":l[11]||(l[11]=l=>e.submitForm=l),ref:"editForm1"},null,8,["form-data","submit-form"])),H("div",Rl,[Ml,H("div",Bl,[H("div",zl,[H("div",Al,[z(c,{modelValue:e.page.key,"onUpdate:modelValue":l[17]||(l[17]=l=>e.page.key=l),style:{width:"340px"},size:"small",disabled:"see"==e.status},{prepend:A((()=>[H("div",null,[z(m,{modelValue:e.productObj.drugSource,"onUpdate:modelValue":l[12]||(l[12]=l=>e.productObj.drugSource=l),placeholder:"请选择",style:{width:"120px"},onChange:t.selectCategoryMenuData,disabled:"see"==e.status},{default:A((()=>[(M(!0),B($,null,Y(e.categoryMenuList,((e,l)=>(M(),J(s,{key:l,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange","disabled"])])])),suffix:A((()=>["1"==e.productObj.drugSource?(M(),B("div",Hl,[z(m,{modelValue:e.product,"onUpdate:modelValue":l[13]||(l[13]=l=>e.product=l),placeholder:"请选择","remote-method":t.remoteMethod,loading:e.loading,filterable:"",remote:"",disabled:"see"==e.status,onChange:l[14]||(l[14]=l=>t.productChange(e.product))},{default:A((()=>[e.cities.length?(M(),J(s,{key:0,disabled:"",label:"-999",value:"-999"},{default:A((()=>[Jl])),_:1})):K("",!0),(M(!0),B($,null,Y(e.cities,((l,a)=>(M(),J(s,{key:a,label:l.drugName,value:l.uuid,disabled:!(e.cities.length>0)},{default:A((()=>[H("div",$l,[H("div",Yl,W(l.drugName),1),H("div",Wl,W(l.drugSize),1),H("div",Kl,W(l.drugMinPacCnt),1),H("div",Gl,W(l.drugUnit),1),H("div",Ql,W(l.drugManufacturer),1)])])),_:2},1032,["label","value","disabled"])))),128))])),_:1},8,["modelValue","remote-method","loading","disabled"])])):(M(),B("div",Xl,[z(m,{modelValue:e.product,"onUpdate:modelValue":l[15]||(l[15]=l=>e.product=l),placeholder:"请选择","remote-method":t.remoteMethod,loading:e.loading,filterable:"",remote:"",disabled:"see"==e.status,onChange:l[16]||(l[16]=l=>t.productChange(e.product))},{default:A((()=>[e.cities.length?(M(),J(s,{key:0,disabled:"",label:"-999",value:"-999"},{default:A((()=>[Zl])),_:1})):K("",!0),(M(!0),B($,null,Y(e.cities,((l,a)=>(M(),J(s,{key:a,label:l.drugName,value:l.uuid,disabled:!(e.cities.length>0)},{default:A((()=>[H("div",ea,[H("div",la,W(l.drugName),1),H("div",aa,W(l.eachDos),1),H("div",ta,W(l.medListCodg),1),H("div",ra,W(l.provHiPayPol),1),H("div",ia,W(l.efccAtd),1)])])),_:2},1032,["label","value","disabled"])))),128))])),_:1},8,["modelValue","remote-method","loading","disabled"])]))])),_:1},8,["modelValue","disabled"]),H("span",oa,W(0==e.productObj.drugAttr1?0:e.productObj.drugAttr1?e.productObj.drugAttr1:"-"),1),H("div",ua,W(0==e.productObj.drugSize?0:e.productObj.drugSize?e.productObj.drugSize:"-")+"/"+W(0==e.productObj.drugUnit?0:e.productObj.drugUnit?e.productObj.drugUnit:"-")+"/"+W(0==e.productObj.drugManufacturer?0:e.productObj.drugManufacturer?e.productObj.drugManufacturer:"-"),1)]),H("div",sa,[H("div",da," 国家编码："+W(0==e.productObj.drugNationalCode?0:e.productObj.drugNationalCode?e.productObj.drugNationalCode:"-"),1),H("div",null," 准字："+W(0==e.productObj.drugStandardNo?0:e.productObj.drugStandardNo?e.productObj.drugStandardNo:"-"),1)]),H("div",na,[H("div",pa," 支付标准："+W(e.productObj.drugPrice?e.productObj.drugPrice:"-"),1),H("div",null," 商品等级："+W(0==e.productObj.drugInsuranceType?0:t.drugInsuranceTypeData(e.productObj.drugInsuranceType)?t.drugInsuranceTypeData(e.productObj.drugInsuranceType):"-"),1)]),H("div",ma,[H("div",ca," 加价支付标准："+W(99999999==e.productObj.drugMarkupPrice||999999999==e.productObj.drugMarkupPrice||999999==e.productObj.drugMarkupPrice||99999==e.productObj.drugMarkupPrice||100000199==e.productObj.drugMarkupPrice||0==e.productObj.drugMarkupPrice?"-":e.productObj.drugMarkupPrice?e.productObj.drugMarkupPrice:"-"),1),H("div",null," 医保处方类型："+W(e.productObj.drugOtcFlag?e.drugOtcFlag[e.productObj.drugOtcFlag]:"-"),1)])]),H("div",ya,[H("div",ba," 用法："+W(0==e.productObj.drugEachDos?0:e.productObj.drugEachDos?e.productObj.drugEachDos:"-"),1)])])]),z(u,{style:{"margin-top":"16px"},stayleConfig:e.stayleConfig,"form-data":e.formData3,"onUpdate:form-data":l[18]||(l[18]=l=>e.formData3=l),"submit-form":e.submitForm,"onUpdate:submit-form":l[19]||(l[19]=l=>e.submitForm=l),ref:"editForm2"},null,8,["stayleConfig","form-data","submit-form"]),"see"==e.status&&0==e.userInfo.openMultipleStores&&1==e.businessUuidLength?(M(),J(u,{key:2,style:{"padding-top":"16px","border-top":"1px solid #e4e7ed"},"form-data":e.formData4,"onUpdate:form-data":l[20]||(l[20]=l=>e.formData4=l),"submit-form":e.submitForm,"onUpdate:submit-form":l[21]||(l[21]=l=>e.submitForm=l),ref:"editForm3"},null,8,["form-data","submit-form"])):K("",!0),"see"==e.status&&1==e.userInfo.openMultipleStores||"see"==e.status&&0==e.userInfo.openMultipleStores&&e.businessUuidLength>1?(M(),J(u,{key:3,style:{"padding-top":"16px","border-top":"1px solid #e4e7ed"},"form-data":e.formData5,"onUpdate:form-data":l[22]||(l[22]=l=>e.formData5=l),"submit-form":e.submitForm,"onUpdate:submit-form":l[23]||(l[23]=l=>e.submitForm=l),ref:"editForm3"},null,8,["form-data","submit-form"])):K("",!0)])),_:1}),z(y,{style:{"margin-top":"0px"},name:"1",label:"条码管理"},{default:A((()=>[z(b,{productBarcodeVos:e.productBarcodeVos,"onUpdate:productBarcodeVos":l[24]||(l[24]=l=>e.productBarcodeVos=l),ref:"extraInfoForm",status:e.status},null,8,["productBarcodeVos","status"])])),_:1}),z(y,{style:{"margin-top":"0px"},name:"2",label:"资质信息"},{default:A((()=>[z(g,{ruleForm:e.credentialForms,onAdd:t.add,credentialStatus:e.status,ref:"credentialInfoForm",onHandleChangeImg:t.handleChangeImg,onHandlePictureCardRemove:t.handlePictureCardRemove},null,8,["ruleForm","onAdd","credentialStatus","onHandleChangeImg","onHandlePictureCardRemove"])])),_:1}),"1"==e.userInfo.openMultipleStores&&"see"==e.status||"see"==e.status&&e.businessUuidLength>1?(M(),J(y,{key:0,style:{"margin-top":"0px"},name:"3",label:"价格信息"},{default:A((()=>[H("div",null,[(M(!0),B($,null,Y(e.storePriceList,((l,a)=>(M(),B("div",{key:a,style:{display:"flex","margin-top":"30px"}},[H("span",ga,W(l.brandName)+"（"+W(l.mechanismName)+"）：",1),z(f,{columns:e.columns,"table-data":[l],optionShow:!1},null,8,["columns","table-data"])])))),128))])])),_:1})):K("",!0)])),_:1},8,["modelValue"]),H("div",fa,[z(P,{title:"快速录入商品",width:"1200px",modelValue:e.modelVisible,"onUpdate:modelValue":l[30]||(l[30]=l=>e.modelVisible=l)},{default:A((()=>[H("div",ha,[z(k,{style:{"margin-bottom":"30px"},"label-width":"80px"},{default:A((()=>[z(v,{label:"商品信息"},{default:A((()=>[H("div",va,[z(c,{modelValue:e.page.key,"onUpdate:modelValue":l[27]||(l[27]=l=>e.page.key=l),style:{width:"716px","margin-right":"20px"},placeholder:"请输入商品名称/助记码/批准文号/条码",onKeydown:ue(t.queryBaseForm,["enter"]),ref:"elAutofocus"},{prepend:A((()=>[z(m,{modelValue:e.page.type,"onUpdate:modelValue":l[26]||(l[26]=l=>e.page.type=l),placeholder:"请选择",style:{width:"140px"},onChange:t.selectCommodityDialog},{default:A((()=>[(M(!0),B($,null,Y(e.categoryMenuList,((e,l)=>(M(),J(s,{key:l,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"])])),_:1},8,["modelValue","onKeydown"]),z(o,{type:"primary",onClick:t.queryBaseForm},{default:A((()=>[ka])),_:1},8,["onClick"])])])),_:1})])),_:1}),H("div",Fa,["1"==e.page.type?(M(),B("div",xa,[z(x,{ref:"elTable",data:e.gridData,"highlight-current-row":"","empty-text":"暂无商品，请使用其它条件进行查询",onRowClick:t.selectRows,onRowDblclick:t.selectBblclick},{default:A((()=>[z(F,{label:"商品名称",property:"drugName",width:"180"}),z(F,{label:"助记码",property:"pinyin",width:"200"}),z(F,{label:"规格",property:"size"}),z(F,{align:"right",label:"最小包装数量",property:"minPacCnt",width:"100"}),z(F,{label:"单位",property:"minPacunt",width:"100"}),z(F,{label:"生产厂家",property:"prodentpName","show-overflow-tooltip":""}),z(F,{label:"批准文号",property:"aprvno"})])),_:1},8,["data","onRowClick","onRowDblclick"]),H("div",Ca,[z(C,{pagination:e.pagination,onHandlSizeChange:t.handleSizeChange,onHandlcurrentChange:t.handleCurrentChange},null,8,["pagination","onHandlSizeChange","onHandlcurrentChange"])])])):(M(),B("div",Pa,[z(x,{ref:"elTable",data:e.gridData,"highlight-current-row":"",onRowClick:t.selectRows,onRowDblclick:t.selectBblclick},{default:A((()=>[z(F,{label:"中草药名称",property:"tcmherbName",width:"180"}),z(F,{label:"常规用法",property:"eachDos",width:"200"}),z(F,{label:"国家编码",property:"medListCodg",width:"100"}),z(F,{label:"省级医保支付政策",property:"provHiPayPol","show-overflow-tooltip":"",width:"160"},{default:A((({row:e})=>[H("div",Sa,W(e.provHiPayPol),1)])),_:1}),z(F,{label:"功能主治",property:"efccAtd","show-overflow-tooltip":""})])),_:1},8,["data","onRowClick","onRowDblclick"]),H("div",wa,[z(C,{pagination:e.pagination,onHandlSizeChange:t.handleSizeChange,onHandlcurrentChange:t.handleCurrentChange},null,8,["pagination","onHandlSizeChange","onHandlcurrentChange"])])]))]),H("div",Ia,[H("div",Va,[z(o,{size:"small",onClick:l[28]||(l[28]=l=>e.modelVisible=!1),style:{float:"left"},type:"primary"},{default:A((()=>[_a])),_:1}),z(o,{size:"small",onClick:l[29]||(l[29]=l=>e.modelVisible=!1)},{default:A((()=>[Na])),_:1}),z(o,{size:"small",type:"primary",onClick:t.enter},{default:A((()=>[Ua])),_:1},8,["onClick"])])])])])),_:1},8,["modelValue"])])])),_:1},8,["close"])],512),[[I,e.loading]])])),_:1})])}],["__scopeId","data-v-27d146c4"]]);export{Ta as default};
