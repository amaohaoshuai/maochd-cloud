var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,o=(t,a,l)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[a]=l,s=(e,t)=>{for(var a in t||(t={}))i.call(t,a)&&o(e,a,t[a]);if(l)for(var a of l(t))r.call(t,a)&&o(e,a,t[a]);return e};import{_ as n}from"./BaseForm.bc55ad6b.js";import{_ as p}from"./BaseTable.36f55649.js";import{_ as m}from"./BaseCard.46de0c24.js";import{_ as d}from"./BaseName.1aa32b4b.js";import{G as u,j as c,h as f,D as b,t as h,o as v,a5 as y,e as j,w as k,a6 as g,z as w,a9 as x,aa as S}from"./@vue.23a4bd1a.js";import{p as D}from"./index.74922d77.js";import{b as N}from"./vue-router.91336ba9.js";import{_ as P}from"./index.ab904951.js";import"./TempHtml.vue_vue&type=script&lang.67ba229f.js";import"./sortablejs.621e50ab.js";import"./vuex.c868d4e0.js";import"./lodash.d7ab6f48.js";import"./dayjs.bad04745.js";import"./element-resize-detector.5b0b5621.js";import"./batch-processor.94093b2a.js";import"./public.9c1d8f39.js";import"./element-plus.b44d97a8.js";import"./resize-observer-polyfill.d4249adb.js";import"./normalize-wheel.1d574cd1.js";import"./mitt.32ebca9f.js";import"./async-validator.1fa0d626.js";import"./@popperjs.192dcd39.js";import"./vue.6d04e91d.js";/* empty css                                                             */import"./axios.7b768d2b.js";import"./echarts.e8cef18b.js";import"./tslib.34a40861.js";import"./zrender.5bef55a0.js";import"./vue3-print-nb.eccf419a.js";import"./nprogress.8b4927f9.js";import"./default-passive-events.74004992.js";const I=["name","specification","unit","manufacturer"];const O={name:"PurchaseOrderDetail",setup(e,o){let n=c({tableData:[]});const p=c(s({title:"查看采购订单",uuid:"",submitForm:{},tabClose:!1,formConfig:{},optionShow:!1},{columns:[{type:"index",title:"序号",formConfig:{width:50},fixed:"left"},{title:"商品编号",key:"code",fixed:"left"},{title:"商品名称/规格/单位/生产厂家",key:"name",width:256,fixed:"left",formConfig:{"show-overflow-tooltip":!1},render:e=>u(d,{row:e,list:I})},{title:"参考库存",width:110,render:e=>{let t;return t=e.overallPackNum||e.deleavePackNum?e.isSplit?(e.overallPackNum?e.overallPackNum+e.unit:"")+(e.deleavePackNum?e.deleavePackNum+e.splitUnit:""):e.overallPackNum?e.overallPackNum+e.unit:"-":"-",t}},{title:"参考月销量",width:100,render:e=>{let t;return t=e.overallMonthSales||e.deleaveMonthSales?e.isSplit?(e.overallMonthSales?e.overallMonthSales+e.unit:"")+(e.deleaveMonthSales?e.deleaveMonthSales+e.splitUnit:""):e.overallMonthSales?e.overallMonthSales+e.unit:"-":"-",t}},{title:"参考周销量",width:100,render:e=>{let t;return t=e.overallWeekSales||e.deleaveWeekSales?e.isSplit?(e.overallWeekSales?e.overallWeekSales+e.unit:"")+(e.deleaveWeekSales?e.deleaveWeekSales+e.splitUnit:""):e.overallWeekSales?e.overallWeekSales+e.unit:"-":"-",t}},{title:"采购数量",key:"purchaseNum",width:120,align:"right"},{title:"含税进价",key:"taxPaid",width:130,align:"right"},{title:"含税金额",key:"taxAmount",width:130,align:"right",render:e=>{let t=(e.purchaseNum*e.taxPaid).toFixed(2);return t=isNaN(t)?0:t,e.taxAmount=t,u("span",{innerText:t})}},{title:"进价",key:"price",width:110,align:"right"},{title:"金额",key:"amount",width:110,align:"right"},{title:"进项税率",key:"inputTaxRate",width:120,align:"right"},{title:"税额",key:"tax",width:110,align:"right"},{title:"零售价",key:"retailPrice",width:110,align:"right"},{title:"零售金额",key:"retailAmount",width:110,align:"right"},{title:"批准文号",key:"approvalNumber",width:224},{title:"上市许可持有人",key:"holderPermit",width:170,isShowTwo:!0,formConfig:{"show-overflow-tooltip":!1}}],formData:{inline:!0,labelWidth:"100px",config:{size:"medium","label-suffix":"："},list:[{label:"采购单编号",key:"orderNo",span:8,type:"DIV"},{label:"计划单编号",key:"planNo",span:8,type:"DIV"},{label:"采购员",key:"createUser",span:8,type:"DIV"},{label:"制单时间",key:"planDate",span:8,type:"DIV"},{label:"审核日期",key:"auditTime",span:8,type:"DIV"},{label:"供应商名称",key:"supplierName",span:8,type:"DIV"},{label:"门店",key:"business",span:8,type:"DIV"},{type:"DIV",label:"备注",key:"remark",span:8}]},formData2:{inline:!0,labelWidth:"82px",config:{size:"medium"},list:[{type:"INPUT",placeholder:"供应商编号/供应商名称/助记码",label:"供应商名称",key:"categoryName",design:{width:"350px"}}]}})),m=()=>{D(p.uuid).then((e=>{let t=e,{details:a}=t,o=((e,t)=>{var a={};for(var o in e)i.call(e,o)&&t.indexOf(o)<0&&(a[o]=e[o]);if(null!=e&&l)for(var o of l(e))t.indexOf(o)<0&&r.call(e,o)&&(a[o]=e[o]);return a})(t,["details"]);p.submitForm=o,n.tableData=a}))},v=f((()=>{let e=0;return n.tableData.map((t=>{t.taxAmount&&(e+=100*t.taxAmount)})),e/100})),y=N();return b((()=>{y.query.uuid&&(p.uuid=y.query.uuid,m())})),j=s(s({},h(p)),h(n)),t(j,a({count:v}));var j}},_=e=>(x("data-v-52f9c04c"),e=e(),S(),e),C={class:"supplierDetail formItem-noMargin"},W={style:{"font-size":"16px"}},M={class:"top-content"},z=_((()=>g("div",{class:"title"},"订单信息",-1))),T=_((()=>g("div",{class:"title"},"商品信息",-1))),V={class:"scope-line"};var F=P(O,[["render",function(e,t,a,l,i,r){const o=n,s=p,d=m;return v(),y("div",C,[j(d,{close:e.tabClose,backTips:!1,route:{path:"/purchase/purchase-order"}},{header:k((()=>[g("span",W,w(e.title),1)])),top:k((()=>[g("div",M,[z,j(o,{"form-data":e.formData,"submit-form":e.submitForm,"onUpdate:submit-form":t[0]||(t[0]=t=>e.submitForm=t),style:{"margin-top":"12px"},ref:"baseForm"},null,8,["form-data","submit-form"])])])),default:k((()=>[g("div",null,[T,j(s,{style:{"margin-top":"22px"},"table-data":e.tableData,formConfig:e.formConfig,columns:e.columns,optionShow:e.optionShow},{buttons:k((t=>[g("div",V,[g("div",null,[g("span",null,"商品种类："+w(e.tableData.length),1),g("span",null,"含税金额合计："+w(l.count)+"元",1)])])])),_:1},8,["table-data","formConfig","columns","optionShow"])])])),_:1},8,["close"])])}],["__scopeId","data-v-52f9c04c"]]);export{F as default};
