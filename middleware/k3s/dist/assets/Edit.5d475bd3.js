var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,i=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,o=(t,a,i)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[a]=i,s=(e,t)=>{for(var a in t||(t={}))r.call(t,a)&&o(e,a,t[a]);if(i)for(var a of i(t))l.call(t,a)&&o(e,a,t[a]);return e},d=(e,i)=>t(e,a(i));import{_ as u}from"./EditForm.8c35f1a6.js";import{_ as n}from"./BaseCard.46de0c24.js";import{t as c}from"./tabs.2754a120.js";import{m as p,a as m,b as g,p as b,s as y,d as f,e as h}from"./index.6efc7880.js";import{m as v}from"./index.7c4fa9df.js";import{b as k,e as C,c as x}from"./credentialInfo.de152dde.js";import{u as j,b as I}from"./vue-router.91336ba9.js";import{_ as P,b as O}from"./element-plus.b44d97a8.js";import{s as S,_ as N}from"./index.ab904951.js";import{_ as D}from"./lodash.d7ab6f48.js";import{p as T}from"./pagination.9a8d3337.js";import{g as F}from"./index.41a8010a.js";import{g as w,j as q,e as U,B as L,S as V,n as E,D as B,q as R,t as _,L as z,o as M,a5 as A,w as H,J as $,a6 as J,c as W,v as K,F as Q,N as X,z as G,a9 as Y,aa as Z}from"./@vue.23a4bd1a.js";import"./TempHtml.vue_vue&type=script&lang.67ba229f.js";import"./vuex.c868d4e0.js";import"./public.9c1d8f39.js";import"./axios.7b768d2b.js";import"./filter.c2c8f0b9.js";import"./BaseTable.36f55649.js";import"./sortablejs.621e50ab.js";import"./element-resize-detector.5b0b5621.js";import"./batch-processor.94093b2a.js";import"./imageUpload.e9124177.js";import"./BaseDatePicker.831269d5.js";import"./moment.08a7f518.js";import"./common.6e2a0964.js";import"./resize-observer-polyfill.d4249adb.js";import"./dayjs.bad04745.js";import"./normalize-wheel.1d574cd1.js";import"./mitt.32ebca9f.js";import"./async-validator.1fa0d626.js";import"./@popperjs.192dcd39.js";import"./vue.6d04e91d.js";import"./echarts.e8cef18b.js";import"./tslib.34a40861.js";import"./zrender.5bef55a0.js";import"./vue3-print-nb.eccf419a.js";import"./nprogress.8b4927f9.js";import"./default-passive-events.74004992.js";const{status:ee,allCategoryList:te,dict:ae}=S.state.common;var ie={name:"CommodityEdit",components:{BaseCard:n,tabs:c,baseInfo:k,extraInfo:C,credentialInfo:x,EditForm:u,pagination:T},setup(e,t){j();const a=I(),o=w(null),u=w(null),n=w(null),c=w(null),k=w(null),C=q({purchaseStateList:[],radio:[],saleStateList:[],conditionList:[],maintenanceTypeList:[],getDictList:[],getUnitList:[],getDosageList:[],dictPrescriptionList:[],setsStatus:a.query.state,drugOtcFlagData:{0:"RX",1:"OTC",2:"-"}}),x=w(null),N=q({selectPage:{"page.currentPage":1,"page.pageSize":100},categoryMenuList:[{label:"中药饮片",value:"2"},{label:"西药中成药",value:"1"}],type:0,productBarcodeVos:[],show:!1,loading:!1,product:"",productObj:{drugSource:"1"},cities:[],storeUuid:"",activeName:"0",stayleConfig:{width:"165px"},categoryList:[],formData:{span:4,labelWidth:"165px",labelPosition:"top",config:{disabled:!1},list:[{type:"SELECT",key:"category1",label:"商品类别",list:()=>C.getDictList,require:!0,config:{onChange(e){M(e)}},rules:[{required:!0,message:"请输入商品分类",trigger:"change"}]},{type:"CASCADER",key:"category2Uuid",label:"商品分类",list:()=>N.categoryList,onchange:e=>W(e),require:!0,levels:!0,width:"165px",rules:[{type:"array",required:!0,message:"请输入商品分类",trigger:"change"}]},{type:"RADIO",key:"isDrug",label:"是否药品",list:()=>C.radio,require:!0,rules:[{required:!0,message:"请输入商品分类",trigger:"blur"}]},{type:"SELECT",key:"prescriptionClass",label:"处方分类",list:()=>C.dictPrescriptionList,require:!0,rules:[{required:!0,message:"请输入商品分类",trigger:"change"}]},{type:"INPUT",key:"code",label:"商品编码"}]},formData2:{span:4,labelWidth:"165px",labelPosition:"top",config:{disabled:!1},list:[{type:"INPUT-TOOL-TIP",key:"productName",label:"商品名称",require:!0,config:{class:"product-name-input"},tips:()=>N.quickInfo.name?N.quickInfo.name:N.submitForm.productName,tipsDisabled:()=>!0,rules:[{required:!0,message:"请输入商品分类",trigger:"blur"}],addBtn:!0,onchange:e=>{N.submitForm.mnemonicCode=v(e)[0].toString(),A(1,N.submitForm.productName)},suffix:{tempHtml:()=>U("div",{style:"margin-left: 10px;background: transparent ;height: 100% ;position:absolute; top: -25px;right: -5px;}"},[U(L("el-button"),{type:"text",onClick:e=>{z()}},{default:()=>[U("span",null,[V("快速录入")])]})])}},{type:"INPUT",key:"commonName",label:"通用名"},{type:"INPUT",key:"specification",label:"规格",require:!0},{type:"SELECT",key:"unit",label:"单位",list:()=>C.getUnitList,require:!0,rules:[{required:!0,message:"请选择单位",trigger:"blur"}]},{type:"AUTOCOMPLETE",key:"dosageForm",label:"剂型",require:!0,list:()=>C.getDosageList,rules:[{required:!0,message:"请选择剂型",trigger:"blur"}]},{type:"INPUT",key:"manufacturer",label:"生产厂家",require:!0},{type:"INPUT",key:"origin",label:"产地"},{type:"INPUT",key:"barCode",label:"条码"},{type:"INPUT",key:"retailPrice",label:"零售价",require:!0,rules:[{required:!0,pattern:/^(([1-9]{1}\d*)|(0{1}))(\.\d{1,6})?$/,message:"请输入正确格式,可保留6位小数",trigger:"blur"}]},{type:"INPUT",key:"memberPrice",label:"会员价",rules:[{pattern:/^(([1-9]{1}\d*)|(0{1}))(\.\d{1,6})?$/,message:"请输入正确格式,可保留6位小数",trigger:"blur"}]},{type:"RADIO",key:"isSplit",label:"是否拆零",list:()=>C.radio,require:!0,rules:[{required:!0,message:"请输入商品分类",trigger:"blur"}]},{type:"INPUT",key:"conversionRatio",label:"转换比",disabled:()=>!N.submitForm.isSplit,require:!1,rules:[{required:!1,pattern:/^\+?[1-9][0-9]*$/,transformation:!1,message:"请输入整型数据",trigger:"blur"}]},{type:"SELECT",key:"splitUnit",label:"拆零单位",disabled:()=>!N.submitForm.isSplit,list:()=>C.getUnitList},{type:"RADIO",key:"isColdChain",label:"冷链",list:()=>C.radio,require:!0,rules:[{required:!0,message:"请输入商品分类",trigger:"blur"}]},{type:"RADIO",key:"isSpecial",label:"含麻黄碱",list:()=>C.radio,require:!0,rules:[{required:!0,message:"请输入商品分类",trigger:"blur"}]},{type:"SELECT",key:"condition",label:"存储条件",list:()=>C.conditionList,require:!0,rules:[{required:!0,message:"请输入商品分类",trigger:"change"}]},{type:"SELECT",key:"maintenanceType",label:"养护类型",list:()=>C.maintenanceTypeList,require:!0,rules:[{required:!0,message:"请输入商品分类",trigger:"change"}]},{type:"INPUT",key:"mnemonicCode",label:"助记码"},{type:"INPUT",key:"approvalNumber",label:"批准文号"},{type:"INPUT",key:"holderPermit",label:"上市许可持有人"}]},formData3:{span:4,labelWidth:"165px",labelPosition:"top",config:{disabled:!1},list:[{type:"SELECT",key:"saleState",label:"销售状态",list:()=>C.saleStateList,rules:[{required:!0,message:"请输入商品分类",trigger:"change"}]},{type:"SELECT",key:"purchaseState",label:"采购状态",list:()=>C.purchaseStateList},{type:"INPUT",key:"inputTaxRate",label:"进项税率",rules:[{required:!1,pattern:/^([0]|[1-9][0-9]*)$/,transformation:!1,message:"请输入整型数据",trigger:"blur"}]},{type:"INPUT",key:"outputTaxRate",label:"销项税率",rules:[{required:!1,pattern:/^([0]|[1-9][0-9]*)$/,transformation:!1,message:"请输入整型数据",trigger:"blur"}]},{type:"INPUT",key:"wholesalePrice",label:"批发价",list:()=>C.radio,rules:[{pattern:/^(([1-9]{1}\d*)|(0{1}))(\.\d{1,4})?$/,message:"请输入正确格式,可保留4位小数",trigger:"blur"}]},{type:"INPUT",key:"maxRetailPrice",label:"最高零售价",rules:[{pattern:/^(([1-9]{1}\d*)|(0{1}))(\.\d{1,6})?$/,message:"请输入正确格式,可保留6位小数",trigger:"blur"}]},{type:"INPUT",key:"taxIncludedPrice",label:"含税批发价"},{type:"NUMBER-INPUT",key:"number",label:"最小包装数",precision:0},{type:"DATEPICKER",key:"validPeriod",label:"批准文号有效期至"},{type:"INPUT",key:"brand",label:"品牌"},{type:"INPUT",key:"addressPermitHolder",label:"上市许可持有人地址"},{type:"DATEPICKER",key:"expireTime",label:"上市许可持有有效期至"},{type:"RADIO",key:"isInlet",label:"进口",list:()=>C.radio},{type:"RADIO",key:"isDoubleAcceptance",label:"是否双人验收",list:()=>C.radio},{type:"INPUT",key:"nativeCode",label:"本位码"},{type:"INPUT",key:"routeOfMedication",label:"用药途径"},{type:"INPUT",key:"lifeCycle",label:"使用周期",rules:[{pattern:/^([1-9]\d{0,3}\.\d{1,2}|0\.\d{0,2}||[1-9]\d{0,3})$/,message:"请输入正确格式,可保留2位小数",trigger:"blur"}]},{type:"INPUT",key:"frequency",label:"频次"},{type:"INPUT",key:"dosageEachTime",label:"每次用量"},{type:"INPUT",key:"dosageUnit",label:"剂量单位"},{type:"INPUT",key:"validDate",label:"有效天数",rules:[{required:!1,pattern:/^[0-9]\d*$/,trigger:"blur",message:"请输入整数"}]},{type:"INPUT",key:"functionIndication",label:"功能主治"}]},category2Uuid:"",formData4:{span:4,labelWidth:"85px",config:{disabled:!1},list:[{type:"DIV",key:"purchasePrice",label:"进价",style:{"font-weight":"bold"}},{type:"DIV",key:"texPurchasePrice",label:"含税进价",style:{"font-weight":"bold"}},{type:"DIV",key:"grossMargin",label:"毛利率(%)",style:{"font-weight":"bold"}},{type:"DIV",key:"latestSupplier",label:"最新供应商",style:{"font-weight":"bold"}},{type:"DIV",key:"inTime",label:"进场时间",style:{"font-weight":"bold"}},{type:"DIV",key:"exchangeTime",label:"首营时间",style:{"font-weight":"bold"}},{type:"DIV",key:"lastInStorageDate",label:"最后入库日",style:{"font-weight":"bold"}},{type:"DIV",key:"lastModifiedTime",label:"最后修改时间",style:{"font-weight":"bold"}}]},tabClose:!1,verifi1:null,verifi2:null,verifi3:null,status:a.query.state,baseInfo:null,modelVisible:!1,tableData:[{},{},{}],tabs:"0",pagination:{"page.currentPage":1,"page.pageSize":10,total:0},gridData:[],quickInfo:{},supplierList:[],extraForm:{brand:"",dosageEachTime:"",dosageUnit:"",frequency:"",functionIndication:"",isColdChain:!1,isDoubleAcceptance:!1,isInlet:!1,isSpecial:!1,lifeCycle:"",nativeCode:"",qualityStandard:"",routeOfMedication:"",validDate:""},credentialForms:[],tabList:[{label:"基础信息",name:"0"},{label:"辅助信息",name:"1"},{label:"资质信息",name:"2"}],page:{"page.currentPage":1,"page.pageSize":10,type:"西药中成药"},extraInfoRules:{validDate:[{required:!1,pattern:/^[0-9]\d*$/,trigger:"blur",message:"请输入整数"}]},submitForm:{isDrug:!0,isSplit:!1,purchaseState:1,saleState:1,inputTaxRate:0,outputTaxRate:0,category2:"",category2Uuid:"",productName:"",condition:1,retailPrice:"",prescriptionClass:"",maintenanceType:1,isColdChain:!1,isSpecial:!1},drugSourceType:""}),T=async()=>{try{const e=await g();N.categoryList=JSON.parse(JSON.stringify(e)),N.categoryList.map((e=>{e.value=e.uuid,e.label=e.categoryName,e.children=e.list,e.children.map((e=>{e.value=e.uuid,e.label=e.name}))}))}catch(e){return e}},z=async()=>{N.page["page.currentPage"]=1,N.page["page.pageSize"]=10,N.page.key="",N.page.type=N.submitForm.category1&&"中药饮片"==N.submitForm.category1?"2":"1",N.modelVisible=!0,J(),o.value&&await o.value.focus()};const M=e=>{N.productObj.drugSource="中药饮片"==e?"2":"1"};function A(e,t){let a=d(s({type:e,keyword:t},N.selectPage),{drugType:N.productObj.drugSource?N.productObj.drugSource:"中药饮片"==N.submitForm.category1?"2":"1"});p(a).then((e=>{N.cities=e.tdata.list,e.tdata.list.length?(N.product=e.tdata.list[0].uuid,N.productObj=e.tdata.list[0]):(N.productObj=d(s({},e.tdata.list[0]),{drugSource:N.drugSourceType}),N.product="")}))}const H=async()=>{let e=a.query.uuid;const t=await h(e);t.basic.number=t.basic.number?t.basic.number:void 0,N.submitForm=s(s({},t.basic),t.extra),N.extraForm=t.extra,N.credentialForms=t.credential;let o=t,{productBarcodeVos:u,extra:n,basic:c,drugBasicUuid:p}=o,m=((e,t)=>{var a={};for(var o in e)r.call(e,o)&&t.indexOf(o)<0&&(a[o]=e[o]);if(null!=e&&i)for(var o of i(e))t.indexOf(o)<0&&l.call(e,o)&&(a[o]=e[o]);return a})(o,["productBarcodeVos","extra","basic","drugBasicUuid"]);N.productObj=m,p&&(N.cities=[d(s({},m),{uuid:p})],N.product=p||""),N.productBarcodeVos=u||[]};E((()=>{Z()}));const $=()=>{C.purchaseStateList=[{value:1,label:"正常"},{value:2,label:"停购"}],C.radio=[{label:"是",value:!0},{label:"否",value:!1}],C.saleStateList=[{value:1,label:"正常"},{value:2,label:"停销"}],C.conditionList=[{value:1,label:"常温"},{value:2,label:"阴凉"},{value:3,label:"冷藏"}],C.maintenanceTypeList=[{value:1,label:"一般养护"},{value:2,label:"重点养护"}],C.getDictList=(()=>{if(ae.length>0)return ae.filter(((e,t)=>"category1"===e.key))[0].data.map((e=>({value:e.key,label:e.key})))})(),C.getUnitList=(()=>{if(ae.length>0)return ae.filter(((e,t)=>"unit"===e.key))[0].data.map((e=>({value:e.key,label:e.key})))})(),C.getDosageList=(()=>{if(ae.length>0){const e=ae.filter(((e,t)=>"dosageForm"===e.key));return 0===e.length?[]:e[0].data.map((e=>({value:e.key,label:e.key})))}})(),C.dictPrescriptionList=(()=>{if(ae.length>0)return ae.filter(((e,t)=>"prescription"===e.key))[0].data.map((e=>({value:e.key,label:e.key})))})(),T(),(async()=>{try{const e=await f();N.supplierList=e.map((e=>({value:e.supplierName,label:e.supplierName})))}catch(e){return e}})(),a.query.uuid?(N.storeUuid=a.query.uuid,N.activeName="0",H()):(N.storeUuid=void 0,N.submitForm={isDrug:!0,isSplit:!1,purchaseState:1,saleState:1,inputTaxRate:0,outputTaxRate:0,category2:"",category2Uuid:"",productName:"",condition:1,retailPrice:"",prescriptionClass:"",maintenanceType:1,isColdChain:!1,isSpecial:!1,isInlet:!1,isDoubleAcceptance:!1},N.credentialForms=[],N.productBarcodeVos=[],N.productObj={drugSource:"1"},N.product="")};B((()=>{var e;N.type=a.query.type,N.status=a.query.state,"see"!==N.status&&z(),e?(C.setsStatus="edit",N.status="edit"):C.setsStatus=a.query.state,N.formData.config.disabled="see"===C.setsStatus,N.formData3.config.disabled="see"===C.setsStatus,N.formData2.config.disabled="see"===C.setsStatus,N.storeUuid!==a.query.uuid&&$(),R((async()=>{o.value&&await o.value.focus()}))}));const J=async()=>{try{const e=await m(N.page);N.gridData=e.list,N.pagination["page.currentPage"]=e.currentPage,N.pagination.total=e.totalElements;let t=D.findIndex(N.gridData,{uuid:N.quickInfo.uuid});R((()=>{void 0!==t&&x.value.setCurrentRow(N.gridData[t])}))}catch(e){return e}};function W(e){if(N.submitForm.category2Uuid){JSON.parse(JSON.stringify(N.categoryList)).forEach((t=>{t.uuid==e[0]&&t.list.forEach((a=>{a.uuid==e[1]&&(N.submitForm.category2=t.categoryName+"/"+a.name)}))})),N.submitForm.category2Uuid=e[1]}}const K=w(null),Q=w(null),X=w(null),G=async(e,t)=>{1==(await b({productUuid:N.quickInfo.uuid,barcode:N.submitForm.barCode,isFirst:1})).isDistinct?O.confirm("该商品条码已有商品使用，是否继续提交？","提示",{confirmButtonText:"是",cancelButtonText:"否",type:"warning",center:!0,beforeClose:async(a,i,r)=>{"confirm"===a?(r(),Y(e,t)):r()}}).catch((e=>e)):Y(e,t)},Y=async(e,t)=>{const i=0==e?"是否暂存商品首营信息":"是否提交商品首营审核信息";O.confirm(i,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",beforeClose:async(i,r,l)=>{if("confirm"===i)try{N.productObj.drugBasicUuid=N.productObj.uuid;let i=[];N.productBarcodeVos.forEach((e=>{e.tmCode&&i.push(e)}));let o={inspect:0!=e,update:d(s({basic:t,credential:N.credentialForms,extra:t},N.productObj),{productBarcodeVos:i}),uuid:a.query.uuid};r.confirmButtonLoading=!0,r.confirmButtonText="执行中...",N.loading=!0,await y(o),setTimeout((()=>{l(),r.confirmButtonLoading=!1,N.tabClose=!0,N.loading=!1}),1e3)}catch(o){l(),N.loading=!1,r.confirmButtonLoading=!1}else l(),N.loading=!1}}).catch((e=>e))},Z=()=>{F(N.submitForm).then((e=>{S.commit("common/DICT",e)}))};return d(s(s({elTable:x,editForm:K,editForm1:Q,editForm2:X,baseInfoForm:u,extraInfoForm:n,credentialInfoForm:c},_(N)),_(C)),{pageSize:k,selectActiveName:async e=>{N.tabs=e},handleClick:function(e,t){t.splice(t,1)},goBack:function(){N.tabClose=!0},quickInput:z,getQuickImportData:J,handleSizeChange:function(e){N.page["page.pageSize"]=e,J()},handleCurrentChange:function(e){N.page["page.currentPage"]=e,J()},queryBaseForm:function(){N.page["page.currentPage"]=1,J()},selectRows:function(e){N.quickInfo=JSON.parse(JSON.stringify(e))},enter:function(){if("{}"===JSON.stringify(N.quickInfo))return P.warning("请选择对应商品！"),!1;N.submitForm.productName=N.quickInfo.drugName,N.submitForm.unit=N.quickInfo.minPacunt,N.submitForm.commonName=N.quickInfo.drugName,N.submitForm.specification=N.quickInfo.size,N.submitForm.manufacturer=N.quickInfo.prodentpName,N.submitForm.approvalNumber=N.quickInfo.aprvno,N.submitForm.mnemonicCode=v(N.quickInfo.drugName)[0].toString(),N.submitForm.dosageForm=N.quickInfo.minPrepunt,N.modelVisible=!1,N.productObj.drugSource=N.page.type,A(2,N.submitForm.approvalNumber?N.submitForm.approvalNumber:N.submitForm.productName)},add:function(){N.credentialForms.push({expireDate:"",fileUrl:"",qualificationName:"",registrationDate:"",serialNumber:""})},pushSubmit:async e=>{let{submitForm:t}=N;if(e&&!(t.category1&&t.category2Uuid&&t.productName&&t.condition&&t.retailPrice&&t.maintenanceType&&t.prescriptionClass))return N.activeName="0",await R(),K.value.handleClick(e),Q.value.handleClick(e),void X.value.handleClick(e);if(N.verifi1=K.value.handleClick(e),N.verifi2=X.value.handleClick(e),N.verifi3=Q.value.handleClick(e),N.verifi1&&N.verifi2&&N.verifi3){if("0"===N.activeName&&e){if(t.isSplit&&(!t.conversionRatio||!t.splitUnit))return void P.error("转换比和拆零单位不能为空！");if(0==t.retailPrice||!t.retailPrice)return void P.error("零售价不能为空且大于0")}G(e,t)}},handleChangeImg:function(e,t){N.credentialForms[t].fileUrl=e},handlePictureCardRemove:function(e){N.credentialForms[e].fileUrl=""},getAllCategoryList:g,selectCategory:W,selectBblclick:function(e){N.quickInfo=JSON.parse(JSON.stringify(e)),N.submitForm.productName=N.quickInfo.drugName,N.submitForm.unit=N.quickInfo.minPacunt,N.submitForm.commonName=N.quickInfo.drugName,N.submitForm.specification=N.quickInfo.size,N.submitForm.manufacturer=N.quickInfo.prodentpName,N.submitForm.approvalNumber=N.quickInfo.aprvno,N.submitForm.mnemonicCode=v(N.quickInfo.drugName)[0].toString(),N.submitForm.dosageForm=N.quickInfo.minPrepunt,N.modelVisible=!1,N.productObj.drugSource=N.page.type,A(2,N.submitForm.approvalNumber?N.submitForm.approvalNumber:N.submitForm.productName)},initData:$,getAllCategoryListData:T,productChange:function(e){let t=D.find(N.cities,{uuid:N.product});N.productObj=t},remoteMethod:function(e){let t=e.replace(/(^\s*)|(\s*$)/g,"");t?(N.loading=!0,setTimeout((()=>{N.loading=!1,A(3,t)}),200)):N.options=[]},isProductDistinct:G,onPushSubmit:Y,commoditySelectData:M,selectCategoryMenuData:e=>{N.product="",N.drugSourceType=e,A("3",N.submitForm.productName)},selectCommodityDialog:e=>{N.page.type=e,N.page["page.currentPage"]=1,N.page["page.pageSize"]=10,J()},drugInsuranceTypeData:e=>e&&e.indexOf("甲")>=0?"甲":e&&e.indexOf("乙")>=0?"乙":e&&e.indexOf("丙")>=0?"丙":"",elAutofocus:o})}};const re=e=>(Y("data-v-ac400a2c"),e=e(),Z(),e),le={class:"main"},oe=[re((()=>J("span",{class:"commodity_title"},"编辑商品首营",-1)))],se=V(" 暂存 "),de=V(" 提交审核 "),ue={class:"code-list"},ne=re((()=>J("div",{class:"d1"},"医保对码(国)",-1))),ce={style:{"margin-left":"16px","margin-top":"10px"}},pe={class:"d2"},me={class:"c3"},ge={key:0,class:"medical-select"},be=re((()=>J("div",{class:"space-list"},[J("div",{class:"space",style:{width:"150px"}}," 商品名称 "),J("div",{class:"space",style:{width:"150px"}}," 规格 "),J("div",{class:"space",style:{width:"150px"}}," 最小包装数量 "),J("div",{class:"space",style:{width:"50px"}}," 单位 "),J("div",{class:"space",style:{width:"180px"}}," 生产厂家 ")],-1))),ye={class:"space-list"},fe={class:"space",style:{width:"150px"}},he={class:"space",style:{width:"150px"}},ve={class:"space",style:{width:"150px"}},ke={class:"space",style:{width:"50px"}},Ce={class:"space",style:{width:"180px"}},xe={key:1,class:"medical-select"},je=re((()=>J("div",{class:"space-list"},[J("div",{class:"space",style:{width:"150px"}}," 中草药名称 "),J("div",{class:"space",style:{width:"150px"}}," 常规用法 "),J("div",{class:"space",style:{width:"150px"}}," 国家编码 "),J("div",{class:"space",style:{width:"150px"}}," 省级医保支付政策 "),J("div",{class:"space",style:{width:"180px"}}," 主治功能 ")],-1))),Ie={class:"space-list"},Pe={class:"space",style:{width:"150px"}},Oe={class:"space",style:{width:"150px"}},Se={class:"space",style:{width:"150px"}},Ne={class:"space",style:{width:"150px"}},De={class:"space",style:{width:"180px"}},Te={style:{"font-size":"14px","margin-left":"10px"}},Fe={style:{"font-size":"12px","margin-top":"6px"}},we={class:"c1"},qe={class:"t1"},Ue={class:"c2"},Le={class:"t1"},Ve={class:"c2"},Ee={class:"t1"},Be={style:{"margin-top":"10px",color:"#909399"}},Re={class:"tooltip-usage-tips"},_e={class:"usage-tips"},ze={class:"select-commodity"},Me={style:{padding:"0px 30px 30px 30px"}},Ae={class:"flex"},He=V(" 查询 "),$e={key:0},Je={style:{"text-align":"right","margin-top":"30px"}},We={key:1},Ke={style:{"text-align":"right","margin-top":"30px"}},Qe={class:"dialog-footer"},Xe={style:{padding:"10px 20px"}},Ge=V("直接创建 "),Ye=V("取 消 "),Ze=V("确 定 ");var et=N(ie,[["render",function(e,t,a,i,r,l){const o=L("el-button"),s=u,d=L("el-option"),c=L("el-select"),p=L("el-input"),m=L("el-tooltip"),g=L("el-tab-pane"),b=L("extra-info"),y=L("credential-info"),f=L("el-tabs"),h=L("el-form-item"),v=L("el-form"),k=L("el-table-column"),C=L("el-table"),x=L("pagination"),j=L("el-dialog"),I=n,P=L("el-scrollbar"),O=z("loading");return M(),A("div",{class:"commodity_edit",onClick:t[22]||(t[22]=t=>e.show=!1)},[U(P,null,{default:H((()=>[$(J("div",le,[U(I,{close:e.tabClose,route:{path:"/first-camp/commodity"}},{header:H((()=>[J("div",{onClick:t[0]||(t[0]=(...e)=>i.goBack&&i.goBack(...e)),style:{cursor:"pointer"}},oe),J("div",null,["see"!==e.status?(M(),W(o,{key:0,size:"small",onClick:t[1]||(t[1]=e=>i.pushSubmit(!1))},{default:H((()=>[se])),_:1})):K("",!0),"see"!==e.status?(M(),W(o,{key:1,type:"primary",size:"small",onClick:t[2]||(t[2]=e=>i.pushSubmit(!0))},{default:H((()=>[de])),_:1})):K("",!0)])])),default:H((()=>[U(f,{modelValue:e.activeName,"onUpdate:modelValue":t[16]||(t[16]=t=>e.activeName=t)},{default:H((()=>[U(g,{label:"基础信息",name:"0"},{default:H((()=>[U(s,{style:{"border-bottom":"1px solid #ededed"},stayleConfig:e.stayleConfig,"form-data":e.formData,"onUpdate:form-data":t[3]||(t[3]=t=>e.formData=t),"submit-form":e.submitForm,"onUpdate:submit-form":t[4]||(t[4]=t=>e.submitForm=t),ref:"editForm"},null,8,["stayleConfig","form-data","submit-form"]),U(s,{style:{"margin-top":"16px"},stayleConfig:e.stayleConfig,"form-data":e.formData2,"onUpdate:form-data":t[5]||(t[5]=t=>e.formData2=t),"submit-form":e.submitForm,"onUpdate:submit-form":t[6]||(t[6]=t=>e.submitForm=t),ref:"editForm1"},null,8,["stayleConfig","form-data","submit-form"]),J("div",ue,[ne,J("div",ce,[J("div",pe,[J("div",me,[U(p,{modelValue:e.page.key,"onUpdate:modelValue":t[12]||(t[12]=t=>e.page.key=t),style:{width:"340px"},size:"small",disabled:"see"==e.status},{prepend:H((()=>[J("div",null,[U(c,{modelValue:e.productObj.drugSource,"onUpdate:modelValue":t[7]||(t[7]=t=>e.productObj.drugSource=t),placeholder:"请选择",style:{width:"120px"},onChange:i.selectCategoryMenuData,disabled:"see"==e.status},{default:H((()=>[(M(!0),A(Q,null,X(e.categoryMenuList,((e,t)=>(M(),W(d,{key:t,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange","disabled"])])])),suffix:H((()=>["1"==e.productObj.drugSource?(M(),A("div",ge,[U(c,{modelValue:e.product,"onUpdate:modelValue":t[8]||(t[8]=t=>e.product=t),placeholder:"请选择","remote-method":i.remoteMethod,loading:e.loading,filterable:"",remote:"",disabled:"see"==e.status,onChange:t[9]||(t[9]=t=>i.productChange(e.product))},{default:H((()=>[e.cities.length?(M(),W(d,{key:0,disabled:"",label:"-999",value:"-999"},{default:H((()=>[be])),_:1})):K("",!0),(M(!0),A(Q,null,X(e.cities,((t,a)=>(M(),W(d,{key:a,label:t.drugName,value:t.uuid,disabled:!(e.cities.length>0)},{default:H((()=>[J("div",ye,[J("div",fe,G(t.drugName),1),J("div",he,G(t.drugSize),1),J("div",ve,G(t.drugMinPacCnt),1),J("div",ke,G(t.drugUnit),1),J("div",Ce,G(t.drugManufacturer),1)])])),_:2},1032,["label","value","disabled"])))),128))])),_:1},8,["modelValue","remote-method","loading","disabled"])])):(M(),A("div",xe,[U(c,{modelValue:e.product,"onUpdate:modelValue":t[10]||(t[10]=t=>e.product=t),placeholder:"请选择","remote-method":i.remoteMethod,loading:e.loading,filterable:"",remote:"",disabled:"see"==e.status,onChange:t[11]||(t[11]=t=>i.productChange(e.product))},{default:H((()=>[e.cities.length?(M(),W(d,{key:0,disabled:"",label:"-999",value:"-999"},{default:H((()=>[je])),_:1})):K("",!0),(M(!0),A(Q,null,X(e.cities,((t,a)=>(M(),W(d,{key:a,label:t.drugName,value:t.uuid,disabled:!(e.cities.length>0)},{default:H((()=>[J("div",Ie,[J("div",Pe,G(t.drugName),1),J("div",Oe,G(t.eachDos),1),J("div",Se,G(t.medListCodg),1),J("div",Ne,G(t.provHiPayPol),1),J("div",De,G(t.efccAtd),1)])])),_:2},1032,["label","value","disabled"])))),128))])),_:1},8,["modelValue","remote-method","loading","disabled"])]))])),_:1},8,["modelValue","disabled"]),J("span",Te,G(0==e.productObj.drugAttr1?0:e.productObj.drugAttr1?e.productObj.drugAttr1:"-"),1),J("div",Fe,G(0==e.productObj.drugSize?0:e.productObj.drugSize?e.productObj.drugSize:"-")+"/"+G(0==e.productObj.drugUnit?0:e.productObj.drugUnit?e.productObj.drugUnit:"-")+"/"+G(0==e.productObj.drugManufacturer?0:e.productObj.drugManufacturer?e.productObj.drugManufacturer:"-"),1)]),J("div",we,[J("div",qe," 国家编码："+G(0==e.productObj.drugNationalCode?0:e.productObj.drugNationalCode?e.productObj.drugNationalCode:"-"),1),J("div",null," 准字："+G(0==e.productObj.drugStandardNo?0:e.productObj.drugStandardNo?e.productObj.drugStandardNo:"-"),1)]),J("div",Ue,[J("div",Le," 支付标准："+G(e.productObj.drugPrice?e.productObj.drugPrice:"-"),1),J("div",null," 商品等级："+G(0==e.productObj.drugInsuranceType?0:i.drugInsuranceTypeData(e.productObj.drugInsuranceType)?i.drugInsuranceTypeData(e.productObj.drugInsuranceType):"-"),1)]),J("div",Ve,[J("div",Ee," 加价支付标准："+G(999999999==e.productObj.drugMarkupPrice||99999999==e.productObj.drugMarkupPrice||999999==e.productObj.drugMarkupPrice||99999==e.productObj.drugMarkupPrice||100000199==e.productObj.drugMarkupPrice||0==e.productObj.drugMarkupPrice?"-":e.productObj.drugMarkupPrice?e.productObj.drugMarkupPrice:"-"),1),J("div",null," 医保处方类型："+G(e.productObj.drugOtcFlag?e.drugOtcFlagData[e.productObj.drugOtcFlag]:"-"),1)])]),J("div",Be,[U(m,{class:"item",effect:"dark",disabled:!0,placement:"top-start"},{content:H((()=>[J("div",Re,G(0==e.productObj.drugEachDos?0:e.productObj.drugEachDos?e.productObj.drugEachDos:"-"),1)])),default:H((()=>[J("div",_e," 用法："+G(0==e.productObj.drugEachDos?0:e.productObj.drugEachDos?e.productObj.drugEachDos:"-"),1)])),_:1})])])]),U(s,{style:{"margin-top":"16px"},stayleConfig:e.stayleConfig,"form-data":e.formData3,"onUpdate:form-data":t[13]||(t[13]=t=>e.formData3=t),"submit-form":e.submitForm,"onUpdate:submit-form":t[14]||(t[14]=t=>e.submitForm=t),ref:"editForm2"},null,8,["stayleConfig","form-data","submit-form"])])),_:1}),U(g,{style:{"margin-top":"0px"},name:"1",label:"条码管理"},{default:H((()=>[U(b,{productBarcodeVos:e.productBarcodeVos,"onUpdate:productBarcodeVos":t[15]||(t[15]=t=>e.productBarcodeVos=t),ref:"extraInfoForm",status:e.status},null,8,["productBarcodeVos","status"])])),_:1}),U(g,{style:{"margin-top":"0px"},name:"2",label:"资质信息"},{default:H((()=>[U(y,{ruleForm:e.credentialForms,onAdd:i.add,credentialStatus:e.status,ref:"credentialInfoForm",onHandleChangeImg:i.handleChangeImg,onHandlePictureCardRemove:i.handlePictureCardRemove},null,8,["ruleForm","onAdd","credentialStatus","onHandleChangeImg","onHandlePictureCardRemove"])])),_:1})])),_:1},8,["modelValue"]),J("div",ze,[U(j,{title:"请选择商品",width:"1200px",modelValue:e.modelVisible,"onUpdate:modelValue":t[21]||(t[21]=t=>e.modelVisible=t)},{default:H((()=>[J("div",Me,[U(v,{style:{"margin-bottom":"30px"},"label-width":"80px"},{default:H((()=>[U(h,{label:"商品信息"},{default:H((()=>[J("div",Ae,[U(p,{modelValue:e.page.key,"onUpdate:modelValue":t[18]||(t[18]=t=>e.page.key=t),style:{width:"716px","margin-right":"20px"},placeholder:"请输入商品名称/助记码/批准文号/条码",ref:"elAutofocus"},{prepend:H((()=>[U(c,{modelValue:e.page.type,"onUpdate:modelValue":t[17]||(t[17]=t=>e.page.type=t),placeholder:"请选择",style:{width:"140px"},onChange:i.selectCommodityDialog},{default:H((()=>[(M(!0),A(Q,null,X(e.categoryMenuList,((e,t)=>(M(),W(d,{key:t,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"])])),_:1},8,["modelValue"]),U(o,{type:"primary",onClick:i.queryBaseForm},{default:H((()=>[He])),_:1},8,["onClick"])])])),_:1})])),_:1}),"1"==e.page.type?(M(),A("div",$e,[U(C,{ref:"elTable",data:e.gridData,onRowClick:i.selectRows,"empty-text":"暂无商品，请使用其它条件进行查询",onRowDblclick:i.selectBblclick,"highlight-current-row":""},{default:H((()=>[U(k,{label:"商品名称",width:"180",property:"drugName"}),U(k,{property:"pinyin",label:"助记码",width:"200"}),U(k,{property:"size",label:"规格"}),U(k,{property:"minPacCnt",width:"100",align:"right",label:"最小包装数量"}),U(k,{property:"minPacunt",width:"100",label:"单位"}),U(k,{property:"prodentpName",label:"生产厂家"}),U(k,{property:"aprvno",label:"批准文号"})])),_:1},8,["data","onRowClick","onRowDblclick"]),J("div",Je,[U(x,{pagination:e.pagination,onHandlSizeChange:i.handleSizeChange,onHandlcurrentChange:i.handleCurrentChange},null,8,["pagination","onHandlSizeChange","onHandlcurrentChange"])])])):(M(),A("div",We,[U(C,{ref:"elTable",data:e.gridData,onRowClick:i.selectRows,onRowDblclick:i.selectBblclick,"highlight-current-row":""},{default:H((()=>[U(k,{label:"中草药名称",width:"180",property:"tcmherbName"}),U(k,{property:"eachDos",label:"常规用法",width:"200"}),U(k,{property:"medListCodg",width:"100",label:"国家编码"}),U(k,{property:"provHiPayPol",label:"省级医保支付政策"}),U(k,{property:"efccAtd",label:"功能主治"})])),_:1},8,["data","onRowClick","onRowDblclick"]),J("div",Ke,[U(x,{pagination:e.pagination,onHandlSizeChange:i.handleSizeChange,onHandlcurrentChange:i.handleCurrentChange},null,8,["pagination","onHandlSizeChange","onHandlcurrentChange"])])]))]),J("div",Qe,[J("div",Xe,[U(o,{size:"small",onClick:t[19]||(t[19]=t=>e.modelVisible=!1),style:{float:"left"},type:"primary"},{default:H((()=>[Ge])),_:1}),U(o,{onClick:t[20]||(t[20]=t=>e.modelVisible=!1),size:"small"},{default:H((()=>[Ye])),_:1}),U(o,{type:"primary",onClick:i.enter,size:"small"},{default:H((()=>[Ze])),_:1},8,["onClick"])])])])),_:1},8,["modelValue"])])])),_:1},8,["close"])],512),[[O,e.loading]])])),_:1})])}],["__scopeId","data-v-ac400a2c"]]);export{et as default};
