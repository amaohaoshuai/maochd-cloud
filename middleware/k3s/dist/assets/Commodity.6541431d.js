var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,i=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,l=(t,a,i)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[a]=i,s=(e,t)=>{for(var a in t||(t={}))r.call(t,a)&&l(e,a,t[a]);if(i)for(var a of i(t))o.call(t,a)&&l(e,a,t[a]);return e},d=(e,i)=>t(e,a(i));import{_ as n}from"./BaseStencil.46c3d678.js";import{G as m,e as c,S as p,B as u,J as y,Q as f,g as b,j as h,n as g,D as C,t as k,o as v,a5 as j}from"./@vue.23a4bd1a.js";import{s as S,r as T,_ as x}from"./index.ab904951.js";import{b as w}from"./element-plus.b44d97a8.js";import{c as E,g as N}from"./index.6efc7880.js";import{g as O}from"./index.41a8010a.js";import{u as P}from"./vue-router.91336ba9.js";import"./BaseForm.bc55ad6b.js";import"./TempHtml.vue_vue&type=script&lang.67ba229f.js";import"./BaseTable.36f55649.js";import"./sortablejs.621e50ab.js";import"./vuex.c868d4e0.js";import"./lodash.d7ab6f48.js";import"./dayjs.bad04745.js";import"./element-resize-detector.5b0b5621.js";import"./batch-processor.94093b2a.js";import"./echarts.e8cef18b.js";import"./tslib.34a40861.js";import"./zrender.5bef55a0.js";import"./vue3-print-nb.eccf419a.js";import"./nprogress.8b4927f9.js";import"./axios.7b768d2b.js";import"./default-passive-events.74004992.js";import"./resize-observer-polyfill.d4249adb.js";import"./normalize-wheel.1d574cd1.js";import"./mitt.32ebca9f.js";import"./async-validator.1fa0d626.js";import"./@popperjs.192dcd39.js";import"./vue.6d04e91d.js";const{status:I,allCategoryList:U,dict:D}=S.state.common,F=()=>{if(D.length>0){return D.filter(((e,t)=>"category1"===e.key))[0].data.map((e=>({value:e.key,label:e.key})))}};function M(e,t){const a={inline:!0,labelWidth:"100px",hiddenNum:7,list:[{type:"INPUT",key:"name",placeholder:"编码/品名/助记码/条码"},{type:"INPUT-REMOTE",key:"category1",placeholder:"请输入商品类别"},{type:"CASCADER",key:"category2",data:(U.map((e=>{e.value=e.categoryName,e.label=e.categoryName,e.children=e.list,e.children.map((e=>{e.value=e.name,e.label=e.name}))})),U),placeholder:"请选择商品分类"},{type:"INPUT",key:"isSpecial",placeholder:"含麻黄碱",hidden:!0},{type:"INPUT",key:"maintenanceType",placeholder:"养护类型",hidden:!0},{type:"INPUT",key:"isColdChain",placeholder:"冷链",hidden:!0},{type:"INPUT",key:"storageCondition",placeholder:"存储条件",hidden:!0},{type:"INPUT",key:"saleState",placeholder:"销售状态",hidden:!0},{type:"INPUT",key:"purchaseState",placeholder:"采购状态",hidden:!0},{type:"INPUT",key:"state",placeholder:"审核状态",hidden:!0}]},i={columns:[{type:"index",title:"序号",fixed:"left",width:50},{title:"商品编码",fixed:"left",key:"code",width:80},{title:"商品名称",fixed:"left",key:"productName",formConfig:{"min-width":210}},{title:"规格",key:"specification",width:256},{title:"单位",key:"unit",width:50},{title:"生产厂家",key:"manufacturer",width:256},{title:"零售价",key:"retailPrice",align:"right",width:100},{title:"会员价",key:"memberPrice",align:"right",width:100},{title:"加价支付标准",key:"drugMarkupPrice",align:"right",width:100,render:e=>e.drugMarkupPrice&&99999999!=e.drugMarkupPrice&&0!=e.drugMarkupPrice?e.drugMarkupPrice:"-"},{title:"商品分类",key:"category2",width:140},{title:"商品类别",key:"category1",width:140},{title:"批准文号",key:"approvalNumber",width:100},{title:"国家编码",key:"drugNationalCode",width:120},{title:"上市许可持有人",key:"holderPermit",width:120},{title:"含麻黄碱",key:"isSpecial",width:100,formConfig:{filters:[{text:"是",value:1},{text:"否",value:0}],"filter-multiple":!1},render:(e,t,a,i)=>m("div",e.isSpecial?"是":"否")},{title:"养护类型",key:"maintenanceType",width:100,formConfig:{filters:[{text:"一般养护",value:"GENERAL_MAINTENANCE"},{text:"重点养护",value:"FOCUS_CONSERVATION"}]},render:(e,t,a,i)=>m("div",{GENERAL_MAINTENANCE:"一般养护",FOCUS_CONSERVATION:"重点养护"}[e.maintenanceType])},{title:"冷链",key:"isColdChain",width:60,formConfig:{filters:[{text:"是",value:1},{text:"否",value:0}],"filter-multiple":!1},render:(e,t,a,i)=>m("div",e.isColdChain?"是":"否")},{title:"存储条件",key:"storageCondition",width:90,formConfig:{filters:[{text:"常温",value:"ROOM_TEMPERATURE"},{text:"阴凉",value:"COOL"},{text:"冷藏",value:"refrigeration"}]},render:(e,t,a,i)=>m("div",{ROOM_TEMPERATURE:"常温",COOL:"阴凉",refrigeration:"冷藏"}[e.storageCondition])},{title:"销售状态",key:"saleState",width:90,formConfig:{filters:[{text:"正常",value:"SUCCESS"},{text:"停销",value:"DISCONTINUED"}],"filter-multiple":!1},render:(e,t,a,i)=>m("div",{innerHTML:{SUCCESS:"正常",DISCONTINUED:"停销"}[e.saleState]})},{title:"采购状态",key:"purchaseState",width:90,formConfig:{filters:[{text:"正常",value:"SUCCESS"},{text:"停购",value:"STOP"}],"filter-multiple":!1},render:(e,t,a,i)=>m("div",{innerHTML:{SUCCESS:"正常",STOP:"停购"}[e.purchaseState]})},{title:"审核状态",key:"state",width:100,formConfig:{filters:[{text:"待提交",value:0},{text:"审核中",value:1},{text:"审核通过",value:2},{text:"审核拒绝",value:3}]},render:(e,t,a,i)=>m("div",{innerHTML:["待提交","审核中","审核通过","审核拒绝"][e.state]})},{title:"创建人",key:"creator",width:150},{title:"创建时间",key:"createTime",width:160},{title:"操作",key:"c",width:130,render:(e,t,a,i)=>[c(u("el-button"),{type:"text",onClick:t=>{l(t,"c",e)}},{default:()=>[p("查看")]}),y(c(u("el-button"),{type:"text",onClick:t=>{o(t,"c",e)}},{default:()=>[p("撤回")]}),[[f,1==e.state]]),y(c(u("el-button"),{type:"text",onClick:t=>{r(t,"c",e)}},{default:()=>[p("编辑")]}),[[f,2!==e.state]])]}],btnData:[{name:"新增",path:"/first-camp/commodity/Commodity-addAndEdit"}],listData:{dict:F()}},r=(e,t,a)=>{T.push({name:"CommodityEdit",query:{uuid:a.uuid,state:"edit"}})},o=(e,a,i)=>{w.confirm("此操作将撤回商品首营修改, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",beforeClose:(e,a,r)=>{"confirm"===e?(a.confirmButtonLoading=!0,a.confirmButtonText="执行中...",E(i.uuid).then((e=>{a.confirmButtonLoading=!1,r(),t.value.select()}))):r()}}).catch((e=>e))},l=(e,t,a)=>{T.push({name:"CommodityEdit",query:{uuid:a.uuid,state:"see",type:a.state}})};return{form:a,tableConfig:i}}const A={class:"business-manage"};var R=x({name:"Commodity",components:{BaseStencil:n},setup(e,t){const a=b(null),{dict:i}=S.state.common,r=P(),o=h({dict:i,otherData:{},tableData:[],deepSearchTable:M(0,a),submitForm:{"page.currentPage":1,"page.pageSize":10,category2:""}}),l=async()=>{let e="";o.submitForm.category2&&o.submitForm.category2.length>1&&(e=o.submitForm.category2&&o.submitForm.category2.length>0?o.submitForm.category2[0]+"/"+o.submitForm.category2[1]:"");try{const t=await N(d(s({},o.submitForm),{category2:e}));o.submitForm.pageNumber=t.currentPage,o.tableData=t.list,o.submitForm.total=t.totalElements}catch(t){return t}};g((()=>{O(o.submitForm).then((e=>{S.commit("common/DICT",e)}))}));return C((()=>{l()})),d(s({},k(o)),{commodityCampData:l,handleClick:({item:e,type:t})=>{"dblclick"===t&&r.push({name:"CommodityEdit",query:{uuid:e.uuid,state:"see"}})},form:a})}},[["render",function(e,t,a,i,r,o){const l=n;return v(),j("div",A,[c(l,{add:{path:"/first-camp/commodity/Commodity-addAndEdit?state=add"},"form-data":e.deepSearchTable.form,"submit-form":e.submitForm,"onUpdate:submit-form":t[0]||(t[0]=t=>e.submitForm=t),class:"base-stencil","table-data":e.tableData,columns:e.deepSearchTable.tableConfig.columns,pagination:e.submitForm,draggable:!1,options:!0,"option-show":!1,select:i.commodityCampData,ref:"form",onOnClick:i.handleClick,otherData:e.deepSearchTable.tableConfig.listData},null,8,["form-data","submit-form","table-data","columns","pagination","select","onOnClick","otherData"])])}],["__scopeId","data-v-5141b2d4"]]);export{R as default};
