var e=Object.defineProperty,t=Object.defineProperties,r=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,s=(t,r,a)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[r]=a,l=(e,t)=>{for(var r in t||(t={}))i.call(t,r)&&s(e,r,t[r]);if(a)for(var r of a(t))o.call(t,r)&&s(e,r,t[r]);return e};import{_ as n}from"./BaseForm.bc55ad6b.js";import{_ as m}from"./BaseTable.36f55649.js";import{_ as d}from"./BaseCard.46de0c24.js";import{a as p}from"./index.6952ab26.js";import{_ as u}from"./BaseName.1aa32b4b.js";import{_ as b}from"./lodash.d7ab6f48.js";import{G as f,j as c,D as y,t as h,o as j,a5 as v,e as g,w as x,a6 as k,a9 as D,aa as w}from"./@vue.23a4bd1a.js";import{b as P}from"./vue-router.91336ba9.js";import{_ as I}from"./index.ab904951.js";import"./TempHtml.vue_vue&type=script&lang.67ba229f.js";import"./sortablejs.621e50ab.js";import"./vuex.c868d4e0.js";import"./element-resize-detector.5b0b5621.js";import"./batch-processor.94093b2a.js";import"./public.9c1d8f39.js";import"./element-plus.b44d97a8.js";import"./resize-observer-polyfill.d4249adb.js";import"./dayjs.bad04745.js";import"./normalize-wheel.1d574cd1.js";import"./mitt.32ebca9f.js";import"./async-validator.1fa0d626.js";import"./@popperjs.192dcd39.js";import"./vue.6d04e91d.js";import"./axios.7b768d2b.js";/* empty css                                                             */import"./echarts.e8cef18b.js";import"./tslib.34a40861.js";import"./zrender.5bef55a0.js";import"./vue3-print-nb.eccf419a.js";import"./nprogress.8b4927f9.js";import"./default-passive-events.74004992.js";function O(e,t){return{columns:[{type:"index",title:"序号",fixed:"left",formConfig:{width:50}},{title:"商品编码",fixed:"left",key:"productCode",width:80},{title:"商品名称",width:180,fixed:"left",formConfig:{"show-overflow-tooltip":!1},key:"productName",render:e=>f(u,{row:e})},{title:"批号",key:"batchNumber",width:200},{title:"有效期至",key:"expireDate",width:110},{title:"销售数量",key:"num",width:110,align:"right",render:t=>{let r=e(),a=b.findIndex(r,{orderProductUuid:t.orderProductUuid});return f("span",{innerText:r[a].num+(r[a].overallOrDeleave?r[a].unit:r[a].splitUnit)})}},{title:"实价",key:"payPrice",width:110,align:"right"},{title:"小计",key:"subtotal",width:110,align:"right"},{title:"成本进价",key:"overallOrDeleave",width:110,align:"right",render:t=>{let r=e(),a=b.findIndex(r,{orderProductUuid:t.orderProductUuid});return f("span",{innerText:!0===r[a].overallOrDeleave?r[a].overallPackPrice:r[a].deleavePackPrice})}},{title:"零售价",key:"retailPrice",width:110,align:"right"},{title:"会员价",key:"memberPrice",width:110,align:"right"},{title:"是否处方",key:"ethical",width:80,render:t=>{let r=e(),a=b.findIndex(r,{orderProductUuid:t.orderProductUuid});return f("span",{innerText:!0===r[a].isSplit?"是":"否"})}},{title:"是否特殊制剂",key:"isSpecial",width:110,render:t=>{let r=e(),a=b.findIndex(r,{orderProductUuid:t.orderProductUuid});return f("span",{innerText:!0===r[a].isSpecial?"是":"否"})}}],formData:{inline:!0,labelWidth:"130px",config:{size:"medium","label-suffix":"："},list:[{label:"销售单号",key:"orderNo",span:8,type:"DIV"},{label:"订单类型",key:"orderState",span:8,type:"TEMP",render:()=>2===t().orderState?"部分支付":"未支付"},{label:"门店",key:"business",span:8,type:"DIV"},{label:"会员姓名",key:"memberName",span:8,type:"DIV"},{label:"会员手机号",key:"memberPhone",span:8,type:"DIV"},{label:"收银员",key:"employName",span:8,type:"DIV"},{label:"销售员",key:"sellName",span:8,type:"DIV"},{label:"是否含处方",key:"hasEthical",span:8,type:"TEMP",render:()=>!0===t().hasEthical?"是":"否"},{label:"是否含特殊制剂",key:"hasSpecial",span:8,type:"TEMP",render:()=>!0===t().hasSpecial?"是":"否"}]},formData2:{inline:!0,labelWidth:"130px",config:{size:"medium","label-suffix":"："},list:[{label:"应收金额",key:"orderAmount",span:8,type:"DIV",unit:"元"},{label:"实收金额",key:"payAmount",span:8,type:"DIV",unit:"元"},{label:"找零",key:"exchange",span:8,type:"DIV",unit:"元"},{label:"优惠金额",key:"discountAmount",span:8,type:"DIV",unit:"元"},{label:"制单时间",key:"createTime",span:8,type:"DIV"}]}}}const F={name:"AbnormalOrdersDetails",setup(e,s){let n=c({tableData:[]});const m=c(l({query:"***",title:"查看异常订单",uuid:"",submitForm:{},tabClose:!1,formConfig:{},optionShow:!1},O())),d=()=>{p(m.submitForm.uuid).then((e=>{let t=e,{productVos:r}=t,s=((e,t)=>{var r={};for(var s in e)i.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(null!=e&&a)for(var s of a(e))t.indexOf(s)<0&&o.call(e,s)&&(r[s]=e[s]);return r})(t,["productVos"]);m.submitForm=s,m.submitForm.route=u.fullPath,n.tableData=r;const l=r.map((e=>{const t=e;t.name=t.productName;return t}));n.tableData=l}))},u=P();y((()=>{m.query!==u.query.uuid&&(m.query=u.query.uuid,m.submitForm.uuid=u.query.uuid,d())}));const b=c(O((()=>n.tableData),(()=>m.submitForm)));return f=l(l(l({},h(m)),h(n)),h(b)),t(f,r({getDetail:d}));var f}},V={class:"supplierDetail formItem-noMargin"},S=(e=>(D("data-v-c683b1c8"),e=e(),w(),e))((()=>k("span",{style:{"font-size":"16px"}},"订单异常详情",-1))),T={class:"top-content"};var U=I(F,[["render",function(e,t,r,a,i,o){const s=n,l=m,p=d;return j(),v("div",V,[g(p,{close:e.tabClose,backTips:!1,route:{path:"/retail/abnormalOrders"}},{header:x((()=>[S])),top:x((()=>[k("div",T,[g(s,{"form-data":e.formData,"submit-form":e.submitForm,"onUpdate:submit-form":t[0]||(t[0]=t=>e.submitForm=t),style:{"margin-top":"12px"},ref:"baseForm"},null,8,["form-data","submit-form"]),g(s,{"form-data":e.formData2,"submit-form":e.submitForm,"onUpdate:submit-form":t[1]||(t[1]=t=>e.submitForm=t),style:{"margin-top":"12px"},ref:"baseForm"},null,8,["form-data","submit-form"])])])),default:x((()=>[k("div",null,[g(l,{style:{"margin-top":"22px"},"table-data":e.tableData,formConfig:e.formConfig,columns:e.columns,optionShow:e.optionShow},null,8,["table-data","formConfig","columns","optionShow"])])])),_:1},8,["close"])])}],["__scopeId","data-v-c683b1c8"]]);export{U as default};
