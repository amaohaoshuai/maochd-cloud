var e=Object.defineProperty,t=Object.defineProperties,s=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,o=(t,s,a)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a,l=(e,t)=>{for(var s in t||(t={}))r.call(t,s)&&o(e,s,t[s]);if(a)for(var s of a(t))i.call(t,s)&&o(e,s,t[s]);return e};import{_ as m}from"./BaseStencil.46c3d678.js";import{g as n,j as p,e as u,B as d,S as b,J as c,Q as f,D as j,t as y,o as v,a5 as g,w as h}from"./@vue.23a4bd1a.js";import{u as k}from"./vuex.c868d4e0.js";import{u as C}from"./vue-router.91336ba9.js";import{g as x}from"./index.85dcfec4.js";import{s as O,g as w}from"./businessRule.60794e55.js";import{_ as D}from"./index.ab904951.js";import"./BaseForm.bc55ad6b.js";import"./TempHtml.vue_vue&type=script&lang.67ba229f.js";import"./BaseTable.36f55649.js";import"./sortablejs.621e50ab.js";import"./lodash.d7ab6f48.js";import"./dayjs.bad04745.js";import"./element-resize-detector.5b0b5621.js";import"./batch-processor.94093b2a.js";import"./axios.7b768d2b.js";import"./echarts.e8cef18b.js";import"./tslib.34a40861.js";import"./zrender.5bef55a0.js";import"./vue3-print-nb.eccf419a.js";import"./element-plus.b44d97a8.js";import"./resize-observer-polyfill.d4249adb.js";import"./normalize-wheel.1d574cd1.js";import"./mitt.32ebca9f.js";import"./async-validator.1fa0d626.js";import"./@popperjs.192dcd39.js";import"./vue.6d04e91d.js";import"./nprogress.8b4927f9.js";import"./default-passive-events.74004992.js";var z={name:"CostAdjustment",setup(){const e=C(),o=k(),m=n([]),v=p({isClear:!1,formData:{inline:!0,labelWidth:"0px",list:[{type:"INPUT",key:"tzNo",placeholder:"请输入调整单编号"},{placeholder:"门店",type:"SELECT",props:{label:"name",value:"uuid"},list:()=>m.value,config:{multiple:!0},key:"businessUuid"},{type:"LINKAGETIME",keys:["createTime.start","createTime.end"],design:{width:"220px"},config:{"start-placeholder":"开始时间","end-placeholder":"结束时间"}}]},submitForm:{"page.currentPage":1,"page.pageSize":10,businessUuid:[]},tableData:[],columns:[{key:"tzNo",title:"调整单编号"},{key:"businessName",title:"门店",render:e=>e.businessName.join()},{key:"creator",title:"创建人"},{key:"createTime",title:"创建时间"},{key:"state",title:"审核状态",render:e=>["待审核","审核通过","审核拒绝"][e.state]},{key:"",title:"操作",render:t=>u("div",null,[u(d("el-button"),{type:"text",onClick:()=>{e.push({name:"CostAdjustmentDetail",query:{uuid:t.uuid}})}},{default:()=>[b("查看")]}),c(u(d("el-button"),{type:"text",onClick:()=>{e.push({name:"EditCostAdjustment",query:{uuid:t.uuid}})}},{default:()=>[b("编辑")]}),[[f,1!==t.state]])])}]});j((async()=>{await(async()=>{m.value=await o.dispatch("common/mechanism"),g(),w(m.value,v,v.formData)})(),g()}));const g=()=>{let e=v.submitForm,{businessUuid:t}=e,s=((e,t)=>{var s={};for(var o in e)r.call(e,o)&&t.indexOf(o)<0&&(s[o]=e[o]);if(null!=e&&a)for(var o of a(e))t.indexOf(o)<0&&i.call(e,o)&&(s[o]=e[o]);return s})(e,["businessUuid"]);t=O(t);let o=l({businessUuid:t},s);x(o).then((e=>{v.tableData=e.records,v.submitForm.total=e.total}))};return h=l({},y(v)),t(h,s({getList:g,addList:()=>{e.push({name:"EditCostAdjustment"})}}));var h}};const T={class:"supplier"},E=b(" 新增调整单 ");var F=D(z,[["render",function(e,t,s,a,r,i){const o=d("el-button"),l=m;return v(),g("div",T,[u(l,{"form-data":e.formData,"submit-form":e.submitForm,"onUpdate:submit-form":t[0]||(t[0]=t=>e.submitForm=t),class:"base-stencil","table-data":e.tableData,columns:e.columns,pagination:e.submitForm,options:!0,optionShow:!1,select:a.getList,ref:"form",isClear:e.isClear},{buttons:h((()=>[u(o,{size:"small",type:"primary",onClick:a.addList},{default:h((()=>[E])),_:1},8,["onClick"])])),_:1},8,["form-data","submit-form","table-data","columns","pagination","select","isClear"])])}],["__scopeId","data-v-6791f977"]]);export{F as default};
