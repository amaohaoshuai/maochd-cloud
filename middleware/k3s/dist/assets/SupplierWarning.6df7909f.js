var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,i=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,o=(t,a,i)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[a]=i,l=(e,t)=>{for(var a in t||(t={}))r.call(t,a)&&o(e,a,t[a]);if(i)for(var a of i(t))s.call(t,a)&&o(e,a,t[a]);return e},p=(e,i)=>t(e,a(i));import{_ as m}from"./BaseStencil.46c3d678.js";import{e as n,g as d,j as u,D as c,t as b,B as f,o as y,a5 as j,w as g,S as v}from"./@vue.23a4bd1a.js";import{u as h}from"./vuex.c868d4e0.js";import{d as w}from"./index.7c4fa9df.js";import{_ as S}from"./index.ab904951.js";import{a as x}from"./axios.7b768d2b.js";import"./BaseForm.bc55ad6b.js";import"./TempHtml.vue_vue&type=script&lang.67ba229f.js";import"./BaseTable.36f55649.js";import"./sortablejs.621e50ab.js";import"./vue-router.91336ba9.js";import"./lodash.d7ab6f48.js";import"./dayjs.bad04745.js";import"./element-resize-detector.5b0b5621.js";import"./batch-processor.94093b2a.js";import"./echarts.e8cef18b.js";import"./tslib.34a40861.js";import"./zrender.5bef55a0.js";import"./vue3-print-nb.eccf419a.js";import"./element-plus.b44d97a8.js";import"./resize-observer-polyfill.d4249adb.js";import"./normalize-wheel.1d574cd1.js";import"./mitt.32ebca9f.js";import"./async-validator.1fa0d626.js";import"./@popperjs.192dcd39.js";import"./vue.6d04e91d.js";import"./nprogress.8b4927f9.js";import"./default-passive-events.74004992.js";var k={name:"SupplierWarning",setup(e,t){const a=h();d(null);const i=d([]),r=u({loading:!1,tableData:[],deepSearchTable:{form:{inline:!0,labelWidth:"100px",list:[{label:"",type:"INPUT",key:"supplierInfo",placeholder:"供应商/编码/助记码"},{type:"NUMBER-INPUT",key:"dayInterval",placeholder:"效期天数"}]},tableConfig:{columns:[{title:"序号",type:"index",fixed:"left",formConfig:{width:50}},{title:"供应商编码",key:"supplierKey",width:120},{title:"供应商名称",key:"supplierName",formConfig:{"min-width":176}},{title:"证照名称",key:"credentialName",formConfig:{"min-width":180}},{title:"有效期至",key:"validity",render:e=>n("div",null,[e.validity?e.validity:"永久"]),width:120},{title:"效期天数",key:"validityDays",width:120},{title:"供应商类别",key:"supplierType",width:120},{title:"联系电话",key:"mobile",width:120},{title:"供应商状态",width:120,key:"supplierStatus",render:e=>"过期"===e.supplierStatus?n("div",{style:"color:red;"},[e.supplierStatus]):"近效期"===e.supplierStatus?n("div",{style:"color:#FA6400;"},[e.supplierStatus]):n("div",null,[e.supplierStatus])}]}},submitForm:{"page.currentPage":1,"page.pageSize":10,supplierInfo:"",dayInterval:void 0},columns:[]}),s=()=>{var e;r.loading=!0,(e=r.submitForm,x.get("/gateway/chain-store/supplier/credentials/findPage",{params:e})).then((e=>{r.submitForm.currentPage=e.currentPage,r.submitForm.pageSize=e.pageSize,r.tableData=e.records,r.submitForm.total=e.total,r.loading=!1}))};c((()=>{s()}));return p(l({},b(r)),{getList:s,findList:i,exportExcel:async()=>{let{storeUuid:e}=a.state.common.info;await a.dispatch("common/mechanism");let t=w("/gateway/chain-store/supplier/credentials/exportExcel",p(l({},r.submitForm),{storeUuid:e}));window.open(t,"_self")}})}};const F={class:"supplier"},P=v(" 导出 ");var O=S(k,[["render",function(e,t,a,i,r,s){const o=f("el-button"),l=m;return y(),j("div",F,[n(l,{"form-data":e.deepSearchTable.form,"submit-form":e.submitForm,"onUpdate:submit-form":t[0]||(t[0]=t=>e.submitForm=t),class:"base-stencil","table-data":e.tableData,columns:e.deepSearchTable.tableConfig.columns,pagination:e.submitForm,options:!0,optionShow:!1,ref:"form",select:i.getList,loading:e.loading},{buttons:g((()=>[n(o,{style:{"margin-bottom":"10px"},size:"small",plain:"",type:"primary",onClick:i.exportExcel},{default:g((()=>[P])),_:1},8,["onClick"])])),_:1},8,["form-data","submit-form","table-data","columns","pagination","select","loading"])])}],["__scopeId","data-v-4bb6f272"]]);export{O as default};
