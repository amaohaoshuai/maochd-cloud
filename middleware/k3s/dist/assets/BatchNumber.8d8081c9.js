var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,o=(t,a,r)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[a]=r,l=(e,t)=>{for(var a in t||(t={}))s.call(t,a)&&o(e,a,t[a]);if(r)for(var a of r(t))i.call(t,a)&&o(e,a,t[a]);return e};import{_ as n}from"./BaseStencil.46c3d678.js";import{r as m,s as d,_ as c}from"./index.ab904951.js";import"./element-plus.b44d97a8.js";import{G as u,e as p,S as b,B as f,g as h,j,D as y,t as g,L as v,o as k,a5 as w,J as C,w as T}from"./@vue.23a4bd1a.js";import{g as B}from"./BatchNumber.b846d4bb.js";import{u as N}from"./vue-router.91336ba9.js";import{s as O,g as x}from"./businessRule.60794e55.js";import"./BaseForm.bc55ad6b.js";import"./TempHtml.vue_vue&type=script&lang.67ba229f.js";import"./BaseTable.36f55649.js";import"./sortablejs.621e50ab.js";import"./vuex.c868d4e0.js";import"./lodash.d7ab6f48.js";import"./dayjs.bad04745.js";import"./element-resize-detector.5b0b5621.js";import"./batch-processor.94093b2a.js";import"./echarts.e8cef18b.js";import"./tslib.34a40861.js";import"./zrender.5bef55a0.js";import"./vue3-print-nb.eccf419a.js";import"./nprogress.8b4927f9.js";import"./axios.7b768d2b.js";import"./default-passive-events.74004992.js";import"./resize-observer-polyfill.d4249adb.js";import"./normalize-wheel.1d574cd1.js";import"./mitt.32ebca9f.js";import"./async-validator.1fa0d626.js";import"./@popperjs.192dcd39.js";import"./vue.6d04e91d.js";const D={0:"审批中",1:"审批通过",2:"审批拒绝"};function S(e,t,a){const r={columns:[{type:"index",title:"序号",formConfig:{width:50},fixed:"left"},{title:"门店",key:"business",formConfig:{"min-width":150}},{title:"制单时间",key:"createTime",width:110},{title:"调整单编号",key:"number",width:124},{title:"商品种类数量",key:"productTypeNum"},{title:"创建人",key:"creator"},{title:"备注",key:"note",width:256},{title:"审核状态",key:"state",render:(e,t,a,r)=>u("div",D[e.state]),width:120},{title:"操作",fixed:"right",width:180,render:(e,t,a,r)=>[p(f("el-button"),{type:"text",onClick:t=>{s(t,"c",e)}},{default:()=>[b("查看")]})]}]},s=(e,t,a)=>{m.push({name:"BatchNumberAdd",query:{uuid:a.uuid,isDetail:!0}})};return{form:{inline:!0,labelWidth:"100px",list:[{type:"INPUT",key:"number",placeholder:"请输入调整单编号"},{type:"SELECT",key:"businessUuid",props:{label:"name",value:"uuid"},list:()=>a.value,placeholder:"请输入门店",config:{multiple:!0}},{type:"LINKAGETIME",keys:["createTime.start","createTime.end"],design:{width:"250px"},key:"createTime",config:{"start-placeholder":"制单开始时间","end-placeholder":"制单结束时间"}}]},tableConfig:r}}var F={name:"BatchNumber",components:{BaseStencil:n},setup(e,o){const n=h(null),{dict:m}=d.state.common,c=h([]),u=N(),p=j({isClear:!1,dict:m,otherData:{},tableData:[],loading:!1,deepSearchTable:S(0,0,c),submitForm:{"page.currentPage":1,"page.pageSize":10,businessUuid:[]}}),b=async()=>{p.loading=!0;try{let e=p.submitForm,{businessUuid:t}=e,a=((e,t)=>{var a={};for(var o in e)s.call(e,o)&&t.indexOf(o)<0&&(a[o]=e[o]);if(null!=e&&r)for(var o of r(e))t.indexOf(o)<0&&i.call(e,o)&&(a[o]=e[o]);return a})(e,["businessUuid"]);t=O(t);let o=l({businessUuid:t},a);const n=await B(o);p.submitForm.pageNumber=n.current,p.tableData=n.records,p.submitForm.total=n.total,p.loading=!1}catch(e){return p.loading=!1,e}};y((async()=>{const e=await d.dispatch("common/mechanism");x(e,p,p.deepSearchTable.form),c.value=e,b()}));return f=l({},g(p)),t(f,a({getBatchNumberListData:b,addBatchNumber:()=>{u.push({name:"BatchNumberAdd"})},form:n,handleClick:({item:e,type:t})=>{if("dblclick"===t){let t=e.uuid;u.push({name:"BatchNumberAdd",query:{uuid:t}})}},businessMechanismList:c}));var f}};const P={class:"business-manage"},U=b("新增批号调整单");var _=c(F,[["render",function(e,t,a,r,s,i){const o=f("el-button"),l=n,m=v("loading");return k(),w("div",P,[C(p(l,{"form-data":e.deepSearchTable.form,"submit-form":e.submitForm,"onUpdate:submit-form":t[0]||(t[0]=t=>e.submitForm=t),class:"base-stencil","table-data":e.tableData,columns:e.deepSearchTable.tableConfig.columns,pagination:e.submitForm,draggable:!1,options:!0,"option-show":!1,select:r.getBatchNumberListData,ref:"form",otherData:e.deepSearchTable.tableConfig.listData,onOnClick:r.handleClick,isClear:e.isClear},{buttons:T((()=>[p(o,{type:"primary",onClick:r.addBatchNumber,size:"small"},{default:T((()=>[U])),_:1},8,["onClick"])])),_:1},8,["form-data","submit-form","table-data","columns","pagination","select","otherData","onOnClick","isClear"]),[[m,e.loading]])])}],["__scopeId","data-v-35a4b50c"]]);export{_ as default};
