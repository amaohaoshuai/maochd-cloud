var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,i=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,s=(t,a,i)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[a]=i,l=(e,t)=>{for(var a in t||(t={}))r.call(t,a)&&s(e,a,t[a]);if(i)for(var a of i(t))o.call(t,a)&&s(e,a,t[a]);return e};import{_ as n}from"./BaseForm.bc55ad6b.js";import{_ as p}from"./BaseTable.36f55649.js";import{_ as m}from"./BaseCard.46de0c24.js";import{_ as d}from"./BaseName.1aa32b4b.js";import{G as u,j as f,h as b,D as c,t as y,o as h,a5 as j,e as g,w as v,a6 as w,z as x,a9 as k,aa as D}from"./@vue.23a4bd1a.js";import{p as P}from"./index.1eb722f1.js";import{b as N}from"./vue-router.91336ba9.js";import{_ as O}from"./index.ab904951.js";import"./TempHtml.vue_vue&type=script&lang.67ba229f.js";import"./sortablejs.621e50ab.js";import"./vuex.c868d4e0.js";import"./lodash.d7ab6f48.js";import"./dayjs.bad04745.js";import"./element-resize-detector.5b0b5621.js";import"./batch-processor.94093b2a.js";import"./public.9c1d8f39.js";import"./element-plus.b44d97a8.js";import"./resize-observer-polyfill.d4249adb.js";import"./normalize-wheel.1d574cd1.js";import"./mitt.32ebca9f.js";import"./async-validator.1fa0d626.js";import"./@popperjs.192dcd39.js";import"./vue.6d04e91d.js";/* empty css                                                             */import"./axios.7b768d2b.js";import"./echarts.e8cef18b.js";import"./tslib.34a40861.js";import"./zrender.5bef55a0.js";import"./vue3-print-nb.eccf419a.js";import"./nprogress.8b4927f9.js";import"./default-passive-events.74004992.js";const _=["name","specification","unit","manufacturer"];const C={name:"ProcurementPlanDetail",setup(e,s){let n=f({tableData:[]});const p=f(l({query:"***",title:"查看采购计划单",uuid:"",submitForm:{},tabClose:!1,formConfig:{},optionShow:!1},{columns:[{type:"index",title:"序号",formConfig:{width:50},fixed:"left"},{title:"商品编号",key:"code",fixed:"left"},{title:"商品名称/规格/单位/生产厂家",key:"name",width:256,fixed:"left",formConfig:{"show-overflow-tooltip":!1},render:e=>u(d,{row:e,list:_})},{title:"可用库存数量",key:"availableStock",width:110,align:"right"},{title:"近30日销量",key:"monthSales",width:100,align:"right"},{title:"近7日销量",key:"weekSales",width:90,align:"right"},{title:"采购数量",key:"purchaseNum",align:"right"},{title:"上次含税进价(元)",key:"lastTaxPaid",width:130,align:"right"},{title:"含税进价(元)",key:"taxPaid",width:110,align:"right"},{title:"含税金额(元)",key:"taxAmount",width:110,align:"right",render:e=>{let t=(e.purchaseNum*e.taxPaid).toFixed(2);return t=isNaN(t)?0:t,e.taxAmount=t,u("span",{innerText:t})}},{title:"进项税率(%)",key:"inputTaxRate",width:110,align:"right"},{title:"供应商名称",key:"supplierName",width:110},{title:"批准文号",key:"approvalNumber"},{title:"上市许可持有人",key:"holderPermit",width:170,isShowTwo:!0,formConfig:{"show-overflow-tooltip":!1}}],formData:{inline:!0,labelWidth:"100px",config:{"label-suffix":"："},list:[{label:"计划单编号",key:"planNo",span:8,type:"DIV"},{label:"创建人",key:"createUser",type:"DIV",span:8},{label:"制单时间",key:"planDate",type:"DIV",span:8},{type:"DIV",placeholder:"请输入",label:"门店",key:"business",span:8},{label:"备注",key:"remark",type:"DIV",span:8}]},formData2:{inline:!0,labelWidth:"82px",config:{size:"medium"},list:[{type:"INPUT",placeholder:"供应商编号/供应商名称/助记码",label:"供应商名称",key:"categoryName",design:{width:"350px"}}]}})),m=()=>{P(p.uuid).then((e=>{let t=e,{details:a}=t,s=((e,t)=>{var a={};for(var s in e)r.call(e,s)&&t.indexOf(s)<0&&(a[s]=e[s]);if(null!=e&&i)for(var s of i(e))t.indexOf(s)<0&&o.call(e,s)&&(a[s]=e[s]);return a})(t,["details"]);p.submitForm=s,n.tableData=a}))},h=b((()=>{let e=0;return n.tableData.map((t=>{t.taxAmount&&(e+=100*t.taxAmount)})),e/100})),j=N();return c((()=>{p.query!==j.query.uuid&&(p.query=j.query.uuid,p.uuid=j.query.uuid,m())})),g=l(l({},y(p)),y(n)),t(g,a({count:h}));var g}},I=e=>(k("data-v-76b76420"),e=e(),D(),e),S={class:"supplierDetail formItem-noMargin"},T={style:{"font-size":"16px"}},z={class:"top-content"},F=I((()=>w("div",{class:"title"},"订单信息",-1))),q=I((()=>w("div",{class:"title"},"商品信息",-1))),B={class:"scope-line"};var V=O(C,[["render",function(e,t,a,i,r,o){const s=n,l=p,d=m;return h(),j("div",S,[g(d,{close:e.tabClose,backTips:!1,route:{path:"/purchase/pocurement-plan"}},{header:v((()=>[w("span",T,x(e.title),1)])),top:v((()=>[w("div",z,[F,g(s,{"form-data":e.formData,"submit-form":e.submitForm,"onUpdate:submit-form":t[0]||(t[0]=t=>e.submitForm=t),style:{"margin-top":"12px"},ref:"baseForm"},null,8,["form-data","submit-form"])])])),default:v((()=>[w("div",null,[q,g(l,{style:{"margin-top":"22px"},"table-data":e.tableData,formConfig:e.formConfig,columns:e.columns,optionShow:e.optionShow},{buttons:v((t=>[w("div",B,[w("div",null,[w("span",null,"商品种类："+x(e.tableData.length),1),w("span",null,"含税金额合计："+x(i.count)+"元",1)])])])),_:1},8,["table-data","formConfig","columns","optionShow"])])])),_:1},8,["close"])])}],["__scopeId","data-v-76b76420"]]);export{V as default};
