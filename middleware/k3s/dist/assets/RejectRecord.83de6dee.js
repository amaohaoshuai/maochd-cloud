var e=Object.defineProperty,t=Object.defineProperties,r=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,i=(t,r,a)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[r]=a,l=(e,t)=>{for(var r in t||(t={}))s.call(t,r)&&i(e,r,t[r]);if(a)for(var r of a(t))o.call(t,r)&&i(e,r,t[r]);return e};import{_ as u}from"./BaseStencil.46c3d678.js";import{r as m,_ as n}from"./index.ab904951.js";import{a as p}from"./axios.7b768d2b.js";import{_ as c}from"./BaseName.1aa32b4b.js";import{e as d,B as f,G as b,g as h,j,D as y,t as g,o as v,c as w}from"./@vue.23a4bd1a.js";import{d as F}from"./index.6efc7880.js";import{u as C}from"./vuex.c868d4e0.js";import{s as k,g as T}from"./businessRule.60794e55.js";import"./BaseForm.bc55ad6b.js";import"./TempHtml.vue_vue&type=script&lang.67ba229f.js";import"./BaseTable.36f55649.js";import"./sortablejs.621e50ab.js";import"./vue-router.91336ba9.js";import"./lodash.d7ab6f48.js";import"./dayjs.bad04745.js";import"./element-resize-detector.5b0b5621.js";import"./batch-processor.94093b2a.js";import"./echarts.e8cef18b.js";import"./tslib.34a40861.js";import"./zrender.5bef55a0.js";import"./vue3-print-nb.eccf419a.js";import"./element-plus.b44d97a8.js";import"./resize-observer-polyfill.d4249adb.js";import"./normalize-wheel.1d574cd1.js";import"./mitt.32ebca9f.js";import"./async-validator.1fa0d626.js";import"./@popperjs.192dcd39.js";import"./vue.6d04e91d.js";import"./nprogress.8b4927f9.js";import"./default-passive-events.74004992.js";/* empty css                                                             */const P=["name","specification","unit","manufacturer"];function S(e,t,r){const a={baseForm:{labelWidth:"68px",inline:!0,list:[{type:"LINKAGETIME",keys:["refuseStartTime","refuseEndTime"],design:{width:"240px"},config:{"start-placeholder":"拒收开始时间","end-placeholder":"拒收结束时间"},key:"createTime"},{placeholder:"拒收单号",type:"INPUT",key:"refuseFrom"},{placeholder:"供应商名称",type:"SELECT",list:()=>r.value,key:"supplierName",props:{label:"supplierName",value:"supplierName"}},{placeholder:"门店",type:"SELECT",config:{multiple:!0},list:()=>t.value,key:"businessUuid",props:{label:"name",value:"uuid"}}]},columns:[{type:"index",title:"序号",formConfig:{width:50}},{title:"门店",key:"business",formConfig:{"min-width":150}},{title:"拒收来源(单号)",key:"refuseFrom",width:288,render:e=>[d(f("el-button"),{type:"text",onClick:t=>{s(e)}},{default:()=>[e.refuseFrom]})]},{title:"商品名称/规格/单位/生产厂家",key:"name",width:256,formConfig:{"show-overflow-tooltip":!0},render:e=>b(c,{row:e,list:P})},{title:"剂型",key:"dosageForm"},{title:"供应商名称",key:"supplierName",width:176,formConfig:{"show-overflow-tooltip":!0}},{title:"拒收数量",key:"refuseNum",align:"right",width:100},{title:"拒收原因",key:"refuseReson",formConfig:{"show-overflow-tooltip":!0},width:160},{title:"拒收人",key:"refusePerson",width:78},{title:"拒收时间",key:"refuseTime",formConfig:{"show-overflow-tooltip":!0},width:180}]},s=e=>{"SH"===e.refuseFromType?m.push({name:"PurchaseDispatchDetail",query:{uuid:e.refuseFromUuid,returnPath:"/purchase/rejectrecord"}}):"YS"===e.refuseFromType?m.push({name:"PurchaseAcceptanceDetail",query:{uuid:e.refuseFromUuid,returnPath:"/purchase/rejectrecord"}}):m.push({name:"PurchaseWarehousingDetail",query:{uuid:e.refuseFromUuid,returnPath:"/purchase/rejectrecord"}})};return{tableConfig:a}}var x=n({name:"RejectRecord",setup(e,i){const u=h([]),m=C(),n=h([]),c=j({isClear:!1,submitForm:{"page.currentPage":1,"page.pageSize":10,businessUuid:[]},tableData:[],deepSearchTable:S(0,u,n)}),d=()=>{let e=c.submitForm,{businessUuid:t}=e,r=((e,t)=>{var r={};for(var i in e)s.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(null!=e&&a)for(var i of a(e))t.indexOf(i)<0&&o.call(e,i)&&(r[i]=e[i]);return r})(e,["businessUuid"]);t=k(t),function(e){return p.get("/gateway/chain-store/check/accept/getRefuseRecord",{params:e})}(l({businessUuid:t},r)).then((e=>{c.tableData=e.list,c.submitForm.total=e.totalCount}))};return y((async()=>{const e=await m.dispatch("common/mechanism");u.value=e,T(u.value,c,c.deepSearchTable.tableConfig.baseForm);const t=await F();n.value=t,d()})),f=l({},g(c)),t(f,r({getList:d}));var f}},[["render",function(e,t,r,a,s,o){const i=u;return v(),w(i,{"form-data":e.deepSearchTable.tableConfig.baseForm,"submit-form":e.submitForm,"onUpdate:submit-form":t[0]||(t[0]=t=>e.submitForm=t),class:"base-stencil","table-data":e.tableData,columns:e.deepSearchTable.tableConfig.columns,pagination:e.submitForm,options:!0,optionShow:!1,select:a.getList,isClear:e.isClear},null,8,["form-data","submit-form","table-data","columns","pagination","select","isClear"])}],["__scopeId","data-v-1f934df0"]]);export{x as default};
