var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,r=(t,a,l)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[a]=l;import{_ as s}from"./BaseStencil.46c3d678.js";import{_ as n}from"./BaseForm.bc55ad6b.js";import{_ as m}from"./index.ab904951.js";import{a as p}from"./axios.7b768d2b.js";import{g as d}from"./formRule.f80f9ec7.js";import{g as b,j as c,e as u,S as f,B as g,D as y,t as j,o as h,a5 as v,c as k,w as F,a6 as S,v as w}from"./@vue.23a4bd1a.js";import"./BaseTable.36f55649.js";import"./sortablejs.621e50ab.js";import"./vue-router.91336ba9.js";import"./vuex.c868d4e0.js";import"./lodash.d7ab6f48.js";import"./dayjs.bad04745.js";import"./element-resize-detector.5b0b5621.js";import"./batch-processor.94093b2a.js";import"./TempHtml.vue_vue&type=script&lang.67ba229f.js";import"./echarts.e8cef18b.js";import"./tslib.34a40861.js";import"./zrender.5bef55a0.js";import"./vue3-print-nb.eccf419a.js";import"./element-plus.b44d97a8.js";import"./resize-observer-polyfill.d4249adb.js";import"./normalize-wheel.1d574cd1.js";import"./mitt.32ebca9f.js";import"./async-validator.1fa0d626.js";import"./@popperjs.192dcd39.js";import"./vue.6d04e91d.js";import"./nprogress.8b4927f9.js";import"./default-passive-events.74004992.js";import"./verification.ecddc814.js";var P={name:"Organization",components:{BaseStencil:s,BaseForm:n},setup(e,s){b(null);const n=c({loading:!1,tableData:[],deepSearchTable:{form:{inline:!0,labelWidth:"100px",list:[{type:"INPUT",key:"name",placeholder:"机构名称"},{type:"INPUT",key:"principal",placeholder:"负责人"},{type:"SELECT",key:"state",placeholder:"状态",props:{label:"label",value:"value"},list:()=>[{label:"启用",value:1},{label:"禁用",value:2}]}]},poplist:{list:[{type:"INPUT",placeholder:"请输入",label:"门店",key:"name",rules:d("Input","门店")},{type:"INPUT",placeholder:"请输入",label:"负责人",key:"principal",width:78},{type:"INPUT",placeholder:"请输入",label:"地址",key:"address",width:240},{type:"RADIO",placeholder:"请输入",label:"状态",key:"state",width:78,props:{label:"label",value:"value"},list:()=>[{label:"启用",value:1},{label:"禁用",value:2}]}]}},submitForm:{"page.currentPage":1,"page.pageSize":10},formData:{inline:!1,labelWidth:"100px"},enterForm:{},dialogVisible:!1,title:"",columns:[{title:"机构编号",key:"code"},{title:"门店",key:"name"},{title:"负责人",key:"principal"},{title:"地址",key:"address"},{title:"状态",key:"state",render:e=>1==e.state?"启用":"禁用"},{title:"操作",key:"options",render:e=>[u(g("el-button"),{type:"text",onClick:()=>{h(e)}},{default:()=>[f("编辑")]}),u(g("el-button"),{type:"text",onClick:t=>{v(e.uuid)}},{default:()=>[1==e.state?"禁用":"启用"]})]}]}),m=()=>{var e;(e=n.submitForm,p.get("/gateway/chain-store/mechanism/find/page",{params:e})).then((e=>{n.submitForm.currentPage=e.currentPage,n.submitForm.pageSize=e.pageSize,n.tableData=e.list,n.submitForm.total=e.totalElements}))};const h=e=>{n.title="编辑门店",n.dialogVisible=!0,n.formData.list=[...n.deepSearchTable.poplist.list],n.enterForm=e},v=async e=>{await function(e){return p.get(`/gateway/chain-store/mechanism/forbidden/${e}`)}(e),m()};return y((()=>{m()})),k=((e,t)=>{for(var a in t||(t={}))i.call(t,a)&&r(e,a,t[a]);if(l)for(var a of l(t))o.call(t,a)&&r(e,a,t[a]);return e})({},j(n)),t(k,a({addMsg:function(){n.title="新增门店",n.dialogVisible=!0,n.formData.list=[...n.deepSearchTable.poplist.list],n.enterForm={},n.enterForm.state=1},organizationList:m,handleSubmit:function(){var e;n.dialogVisible=!0,(e=n.enterForm,p.post("/gateway/chain-store/mechanism/save",e)).then((e=>{n.dialogVisible=!1,m()})).finally((()=>{n.loading=!1}))},handleEdit:h,onChangeState:v}));var k}};const z={class:"supplier"},T={class:"dialog-footer"},V=f("取 消"),O=f("确 定");var x=m(P,[["render",function(e,t,a,l,i,o){const r=s,m=n,p=g("el-button"),d=g("el-dialog");return h(),v("div",z,[u(r,{"form-data":e.deepSearchTable.form,"submit-form":e.submitForm,"onUpdate:submit-form":t[0]||(t[0]=t=>e.submitForm=t),class:"base-stencil","table-data":e.tableData,columns:e.columns,pagination:e.submitForm,options:!0,select:l.organizationList},null,8,["form-data","submit-form","table-data","columns","pagination","select"]),e.dialogVisible?(h(),k(d,{key:0,title:e.title,modelValue:e.dialogVisible,"onUpdate:modelValue":t[4]||(t[4]=t=>e.dialogVisible=t),width:"430px"},{footer:F((()=>[S("span",T,[u(p,{size:"small",onClick:t[2]||(t[2]=t=>e.dialogVisible=!1)},{default:F((()=>[V])),_:1}),u(p,{size:"small",type:"primary",loading:e.loading,onClick:t[3]||(t[3]=e=>l.handleSubmit())},{default:F((()=>[O])),_:1},8,["loading"])])])),default:F((()=>[u(m,{"form-data":e.formData,"submit-form":e.enterForm,"onUpdate:submit-form":t[1]||(t[1]=t=>e.enterForm=t),style:{"margin-top":"30px"},ref:"baseForm"},null,8,["form-data","submit-form"])])),_:1},8,["title","modelValue"])):w("",!0)])}],["__scopeId","data-v-35d272c4"]]);export{x as default};
