var e=Object.defineProperty,t=Object.defineProperties,i=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,o=(t,i,s)=>i in t?e(t,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[i]=s,m=(e,t)=>{for(var i in t||(t={}))a.call(t,i)&&o(e,i,t[i]);if(s)for(var i of s(t))r.call(t,i)&&o(e,i,t[i]);return e},n=(e,s)=>t(e,i(s));import{_ as l}from"./BaseStencil.46c3d678.js";import{_ as p}from"./BaseName.1aa32b4b.js";import{G as d,j as c,D as u,t as b,B as f,o as h,a5 as j,e as y,w as g,S as w}from"./@vue.23a4bd1a.js";import{d as v}from"./index.7c4fa9df.js";import{u as x}from"./vuex.c868d4e0.js";import{_ as k}from"./index.ab904951.js";import{a as C}from"./axios.7b768d2b.js";import{g as U,f as F}from"./filter.c2c8f0b9.js";import{s as T,g as O}from"./businessRule.60794e55.js";import"./BaseForm.bc55ad6b.js";import"./TempHtml.vue_vue&type=script&lang.67ba229f.js";import"./BaseTable.36f55649.js";import"./sortablejs.621e50ab.js";import"./vue-router.91336ba9.js";import"./lodash.d7ab6f48.js";import"./dayjs.bad04745.js";import"./element-resize-detector.5b0b5621.js";import"./batch-processor.94093b2a.js";/* empty css                                                             */import"./echarts.e8cef18b.js";import"./tslib.34a40861.js";import"./zrender.5bef55a0.js";import"./vue3-print-nb.eccf419a.js";import"./element-plus.b44d97a8.js";import"./resize-observer-polyfill.d4249adb.js";import"./normalize-wheel.1d574cd1.js";import"./mitt.32ebca9f.js";import"./async-validator.1fa0d626.js";import"./@popperjs.192dcd39.js";import"./vue.6d04e91d.js";import"./nprogress.8b4927f9.js";import"./default-passive-events.74004992.js";var E={name:"SpecialAgentsSell",setup(e,t){let i=x();const o={mechanism:[]},l=new Date;let f=U(l,30,!0);const h=c({isClear:!1,loading:!1,tableData:[],excelUrl:"",deepSearchTable:{tableConfig:{columns:[{title:"序号",type:"index",fixed:"",formConfig:{width:50}},{title:"门店",key:"business",formConfig:{"min-width":150}},{title:"商品名称/规格/单位/生产厂家",key:"productName",fixed:"left",formConfig:{"show-overflow-tooltip":!1,"min-width":210},render:e=>d(p,{row:e})},{title:"剂型",key:"dosageForm",width:80},{title:"批号",key:"batchNumber",width:178},{title:"数量",key:"num",width:90,align:"right"},{title:"顾客姓名",key:"patientName",width:78},{title:"性别",key:"sex",width:78},{title:"年龄",key:"age",width:78},{title:"联系电话",key:"tel",width:160},{title:"身份证号",key:"idNumber",width:178},{title:"地址",key:"address",width:210},{title:"销售时间",key:"createTime",width:170}]}},form:{inline:!0,labelWidth:"100px",list:[{placeholder:"请输入商品信息",type:"INPUT",key:"invincible"},{placeholder:"请选择门店",type:"SELECT",props:{label:"name",value:"uuid"},list:()=>o.mechanism,key:"businessUuid",config:{multiple:!0}},{type:"LINKAGETIME",keys:["startTime","endTime"],design:{width:"220px"},key:"",config:{"start-placeholder":"开始时间","end-placeholder":"结束时间"}}]},submitForm:{"page.currentPage":1,"page.pageSize":10,businessUuid:[],invincible:"",startTime:f[0],endTime:F(new Date),mechanism:[]},columns:[]});u((async()=>{await j(),y(h.submitForm)}));const j=async()=>{o.mechanism=await i.dispatch("common/mechanism"),O(o.mechanism,h,h.form)},y=()=>{let e=h.submitForm,{businessUuid:t}=e,i=((e,t)=>{var i={};for(var o in e)a.call(e,o)&&t.indexOf(o)<0&&(i[o]=e[o]);if(null!=e&&s)for(var o of s(e))t.indexOf(o)<0&&r.call(e,o)&&(i[o]=e[o]);return i})(e,["businessUuid"]);t=T(t),function(e){return C.get("/gateway/chain-store/prescription/gsp/special/pagelist",{params:e})}(m({businessUuid:t},i)).then((e=>{h.submitForm.total=e.totalCount,e.list.forEach((e=>{e.name=e.productName})),h.tableData=e.list})).catch((e=>{}))};return n(m({},b(h)),{getList:y,ExpeditingListExport:async()=>{let{storeUuid:e}=i.state.common.info,t=await i.dispatch("common/mechanism"),s="";s=h.submitForm.businessUuid.length?T(h.submitForm.businessUuid):t.map((e=>e.uuid)).join(",");let a=v("/gateway/chain-store/prescription/gsp/special/export",n(m({},h.submitForm),{storeUuid:e,businessUuid:s}));window.open(a,"_self")}})}};const S={class:"supplier"},_=w(" 导出 ");var N=k(E,[["render",function(e,t,i,s,a,r){const o=f("el-button"),m=l;return h(),j("div",S,[y(m,{"form-data":e.form,"submit-form":e.submitForm,"onUpdate:submit-form":t[0]||(t[0]=t=>e.submitForm=t),class:"base-stencil","table-data":e.tableData,columns:e.deepSearchTable.tableConfig.columns,pagination:e.submitForm,options:!0,optionShow:!1,select:s.getList,isClear:e.isClear},{buttons:g((()=>[y(o,{class:"retail-details-btn",plain:"",type:"primary",size:"small",onClick:s.ExpeditingListExport},{default:g((()=>[_])),_:1},8,["onClick"])])),_:1},8,["form-data","submit-form","table-data","columns","pagination","select","isClear"])])}],["__scopeId","data-v-92439d8c"]]);export{N as default};
