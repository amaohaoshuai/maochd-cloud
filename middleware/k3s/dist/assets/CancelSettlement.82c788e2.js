var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,i=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,o=(t,a,i)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[a]=i,l=(e,t)=>{for(var a in t||(t={}))s.call(t,a)&&o(e,a,t[a]);if(i)for(var a of i(t))r.call(t,a)&&o(e,a,t[a]);return e};import{_ as n}from"./BaseStencil.46c3d678.js";import{r as m,_ as d}from"./index.ab904951.js";import"./element-plus.b44d97a8.js";import{e as p,S as u,B as c,g as b,j as f,D as h,t as j,L as y,o as g,a5 as v,J as k}from"./@vue.23a4bd1a.js";import{i as w}from"./CancelSettlement.7ca2baab.js";import{u as C}from"./vue-router.91336ba9.js";import{d as S}from"./index.6efc7880.js";import{s as D,g as O}from"./businessRule.60794e55.js";import{u as x}from"./vuex.c868d4e0.js";import"./BaseForm.bc55ad6b.js";import"./TempHtml.vue_vue&type=script&lang.67ba229f.js";import"./BaseTable.36f55649.js";import"./sortablejs.621e50ab.js";import"./lodash.d7ab6f48.js";import"./dayjs.bad04745.js";import"./element-resize-detector.5b0b5621.js";import"./batch-processor.94093b2a.js";import"./echarts.e8cef18b.js";import"./tslib.34a40861.js";import"./zrender.5bef55a0.js";import"./vue3-print-nb.eccf419a.js";import"./nprogress.8b4927f9.js";import"./axios.7b768d2b.js";import"./default-passive-events.74004992.js";import"./resize-observer-polyfill.d4249adb.js";import"./normalize-wheel.1d574cd1.js";import"./mitt.32ebca9f.js";import"./async-validator.1fa0d626.js";import"./@popperjs.192dcd39.js";import"./vue.6d04e91d.js";function T(e,t,a,i){const s={columns:[{type:"index",title:"序号",formConfig:{width:50},fixed:"left"},{title:"结算单编号",key:"settleNo",width:135},{title:"供应商名称",key:"supplierName",width:176},{title:"门店",key:"business"},{title:"发票号码",key:"invoiceNo",width:200},{title:"发票代码",key:"invoiceCode",width:120},{title:"发票金额",key:"invoiceAmount",width:120,align:"right"},{title:"本次结算金额合计",key:"settleAmount",width:180,align:"right"},{title:"制单时间",key:"planDate",width:180},{title:"作废人",key:"abandonedUser",width:120},{title:"作废时间",key:"abandonedTime",width:180},{title:"操作",key:"c",width:50,fixed:"right",render:(e,t,a,i)=>[p(c("el-button"),{type:"text",onClick:t=>{r(t,"c",e)}},{default:()=>[u("查看")]})]}]},r=(e,t,a)=>{m.push({name:"CancelSettlementDetail",query:{uuid:a.uuid}})};return{form:{inline:!0,labelWidth:"100px",list:[{placeholder:"供应商名称",type:"SELECT",key:"supplierUuid",props:{label:"supplierName",value:"uuid"},list:()=>a.value},{label:"",type:"SELECT",placeholder:"门店",config:{multiple:!0},key:"businessUuid",props:{label:"name",value:"uuid"},list:()=>i.value},{placeholder:"发票号码",type:"INPUT",key:"invoiceNo"}]},tableConfig:s}}const P={class:"business-manage"};var N=d({name:"CancelSettlement",components:{BaseStencil:n},setup(e,o){const n=b(null),m=x(),{dict:d}=m.state.common,p=b([]),u=C(),c=b([]),y=f({isClear:!1,dict:d,otherData:{},tableData:[],loading:!1,deepSearchTable:T(0,0,p,c),submitForm:{"page.currentPage":1,"page.pageSize":10,businessUuid:[]}}),g=async()=>{y.loading=!0;try{let e=y.submitForm,{businessUuid:t}=e,a=((e,t)=>{var a={};for(var o in e)s.call(e,o)&&t.indexOf(o)<0&&(a[o]=e[o]);if(null!=e&&i)for(var o of i(e))t.indexOf(o)<0&&r.call(e,o)&&(a[o]=e[o]);return a})(e,["businessUuid"]);t=D(t);let o=l({businessUuid:t},a);const n=await w(o);y.submitForm.pageNumber=n.currentPage,y.tableData=n.list,y.submitForm.total=n.totalElements,y.loading=!1}catch(e){return y.loading=!1,e}};h((()=>{g(),v()}));const v=async()=>{const e=await S();p.value=e,c.value=await m.dispatch("common/mechanism"),O(c.value,y,y.deepSearchTable.form)};return k=l({},j(y)),t(k,a({invalidQueryPageData:g,addBatchNumber:()=>{u.push({name:"BatchNumberAdd"})},form:n,onClick:({item:e,type:t})=>{"dblclick"==t&&u.push({path:"/finance-manage/cancel-settlement-detail",query:{uuid:e.uuid,type:"edit"}})}}));var k}},[["render",function(e,t,a,i,s,r){const o=n,l=y("loading");return g(),v("div",P,[k(p(o,{"form-data":e.deepSearchTable.form,"submit-form":e.submitForm,"onUpdate:submit-form":t[0]||(t[0]=t=>e.submitForm=t),class:"base-stencil","table-data":e.tableData,columns:e.deepSearchTable.tableConfig.columns,pagination:e.submitForm,draggable:!1,options:!0,"option-show":!1,select:i.invalidQueryPageData,ref:"form",otherData:e.deepSearchTable.tableConfig.listData,onOnClick:i.onClick,isClear:e.isClear},null,8,["form-data","submit-form","table-data","columns","pagination","select","otherData","onOnClick","isClear"]),[[l,e.loading]])])}],["__scopeId","data-v-5e3a0872"]]);export{N as default};
