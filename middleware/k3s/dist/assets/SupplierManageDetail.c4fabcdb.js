var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable,i=(a,l,s)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[l]=s;import{_ as p}from"./EditForm.8c35f1a6.js";import{_ as o}from"./BaseTable.36f55649.js";import{_ as d}from"./BaseCard.46de0c24.js";import{_ as n}from"./previewImage.3faea4af.js";import{a as u,c as b}from"./index.778e5621.js";import{u as m,b as c}from"./vue-router.91336ba9.js";import{c as y}from"./common.6e2a0964.js";import{j as f,e as h,h as v,n as S,D as g,t as j,B as k,o as I,a5 as D,w as x,y as N,v as w,a6 as P,z as T,F as U,N as _,a9 as C,aa as E}from"./@vue.23a4bd1a.js";import{_ as V}from"./trash.2476a68d.js";import{_ as O}from"./index.ab904951.js";import"./TempHtml.vue_vue&type=script&lang.67ba229f.js";import"./lodash.d7ab6f48.js";import"./dayjs.bad04745.js";import"./sortablejs.621e50ab.js";import"./vuex.c868d4e0.js";import"./element-resize-detector.5b0b5621.js";import"./batch-processor.94093b2a.js";import"./public.9c1d8f39.js";import"./element-plus.b44d97a8.js";import"./resize-observer-polyfill.d4249adb.js";import"./normalize-wheel.1d574cd1.js";import"./mitt.32ebca9f.js";import"./async-validator.1fa0d626.js";import"./@popperjs.192dcd39.js";import"./vue.6d04e91d.js";import"./axios.7b768d2b.js";import"./echarts.e8cef18b.js";import"./tslib.34a40861.js";import"./zrender.5bef55a0.js";import"./vue3-print-nb.eccf419a.js";import"./nprogress.8b4927f9.js";import"./default-passive-events.74004992.js";var F={name:"SupplierManageDetail",components:{BaseTable:o,previewImage:n,BaseCard:d},setup(){m();const e=c(),{_:p}=y(),o=f({history:[],show:!1,activeName:"first",baseSupplierData:{basicInfo:{}},salersForm:[],formData:{span:8,labelWidth:"100px",list:[{type:"INPUT",key:"supplierKey",label:"供应商编号",disabled:()=>!0,placeholder:()=>o.haveSupplier?"请输入":"输入供应商后显示"},{type:"INPUT",key:"supplierName",label:"供应商名称",require:!0,disabled:()=>!o.haveSupplier,placeholder:()=>o.haveSupplier?"请输入":"输入供应商后显示"},{type:"SELECT",key:"supplierType",label:"供应商类别",disabled:()=>!o.haveSupplier,placeholder:()=>o.haveSupplier?"请输入":"输入供应商后显示",props:{value:"key",label:"key"},list:()=>o.options},{type:"DATEPICKER",key:"registerDate",label:"注册日期",disabled:()=>!o.haveSupplier,placeholder:()=>o.haveSupplier?"请输入":"输入供应商后显示"},{type:"INPUT",key:"address",label:"地址",disabled:()=>!o.haveSupplier,placeholder:()=>o.haveSupplier?"请输入":"输入供应商后显示"},{type:"INPUT",key:"legalPerson",label:"法定代表人",disabled:()=>!o.haveSupplier,placeholder:()=>o.haveSupplier?"请输入":"输入供应商后显示"},{type:"INPUT",key:"mnemonic",label:"助记码",disabled:()=>!o.haveSupplier,placeholder:()=>o.haveSupplier?"请输入":"输入供应商后显示"},{type:"INPUT",key:"bank",label:"开户行",disabled:()=>!o.haveSupplier,placeholder:()=>o.haveSupplier?"请输入":"输入供应商后显示"},{type:"INPUT",key:"bankAccount",label:"银行账户",disabled:()=>!o.haveSupplier,placeholder:()=>o.haveSupplier?"请输入":"输入供应商后显示"},{type:"INPUT",key:"accountName",label:"开户户名",disabled:()=>!o.haveSupplier,placeholder:()=>o.haveSupplier?"请输入":"输入供应商后显示"},{type:"INPUT",key:"ceo",label:"企业负责人",disabled:()=>!o.haveSupplier,placeholder:()=>o.haveSupplier?"请输入":"输入供应商后显示"},{type:"INPUT",key:"qa",label:"质量负责人",disabled:()=>!o.haveSupplier,placeholder:()=>o.haveSupplier?"请输入":"输入供应商后显示"},{type:"INPUT",key:"mobile",label:"联系电话",disabled:()=>!o.haveSupplier,placeholder:()=>o.haveSupplier?"请输入":"输入供应商后显示",rules:[{trigger:"blur",pattern:/^(\+86|0086)?\s*1[345789]\d{9}$/,message:"请输入正确的手机号码"}]},{type:"INPUT",key:"mail",label:"邮箱",disabled:()=>!o.haveSupplier,placeholder:()=>o.haveSupplier?"请输入":"输入供应商后显示",rules:[{type:"email",message:"请输入正确的邮箱地址",trigger:"blur"}]},{type:"INPUT",key:"postalCode",label:"邮政编码",disabled:()=>!o.haveSupplier,placeholder:()=>o.haveSupplier?"请输入":"输入供应商后显示",rules:[{trigger:"blur",pattern:/^[0-9]{6}$/,message:"请输入正确的邮政编码"}]},{type:"SELECT",key:"businessScope",disabled:()=>!o.haveSupplier,placeholder:()=>o.haveSupplier?"请输入":"输入供应商后显示",label:"经营范围",props:{value:"key",label:"key"},config:{multiple:!0,filterable:!1,remote:!1},list:()=>o.options1}]},type:"",isSee:null,columns:[{type:"index",title:"序号",formConfig:{width:50}},{title:"资质名称",key:"name"},{title:"图片",key:"png",render:(e,a,l,s)=>e.png?h(n,{png:e.png},null):h("div",null,null)},{title:"发证机关",key:"issuer"},{title:"编号",key:"number"},{title:"注册日期",key:"registerDate"},{title:"有效期至",key:"validity"},{title:"控制",key:"isControl",render:(e,a,l,s)=>h("div",null,[e.isControl?"控制":"不控制"])},{title:"提示",key:"isRemind",render:(e,a,l,s)=>h("div",null,[e.isRemind?"提示":"不提示"])}],tableData:[],credentials:[]}),d=v((()=>{if(o.baseSupplierData.basicInfo.businessScope&&o.baseSupplierData.basicInfo.businessScope.length)return o.baseSupplierData.basicInfo.businessScope.join("; ")}));S((()=>{o.isSee=e.query.isSee}));g((()=>{o.type=e.query.type,k(),(async()=>{try{const a=await b({supplierUuid:e.query.uuid});o.history=a}catch(a){return a}})()}));const k=()=>{u(e.query.uuid).then((e=>{o.baseSupplierData=p.cloneDeep(e)}))};return I=((e,a)=>{for(var l in a||(a={}))r.call(a,l)&&i(e,l,a[l]);if(s)for(var l of s(a))t.call(a,l)&&i(e,l,a[l]);return e})({},j(o)),a(I,l({businessScope:d,whetherHaveData:e=>e||"-"}));var I}};const q=e=>(C("data-v-035dd532"),e=e(),E(),e),z={class:"supplier"},B=q((()=>P("span",{style:{"font-size":"16px"}},"查看供应商管理详情",-1))),R={class:"title"},K={style:{display:"flex","justify-content":"space-between"}},L={style:{display:"flex","flex-direction":"column"}},M=q((()=>P("span",{style:{"margin-bottom":"5px"}},"修改单编号",-1))),A={style:{display:"flex","flex-direction":"column"}},H=q((()=>P("span",{style:{"margin-bottom":"5px"}},"修改人",-1))),$={style:{display:"flex","flex-direction":"column"}},W=q((()=>P("span",{style:{"margin-bottom":"5px"}},"修改时间",-1))),G={class:"c2"},J={class:"c3"},Q={class:"c4"},X={key:0,style:{height:"1px","background-color":"#e4e7ed","margin-top":"10px"}},Y={class:"box"},Z=["onClick"];var ee=O(F,[["render",function(e,a,l,s,r,t){const i=p,n=k("el-tab-pane"),u=o,b=k("el-scrollbar"),m=k("el-tabs"),c=d;return I(),D("div",z,[h(c,{route:{path:"/business-manage/supplierManage"},backTips:!1,isEdit:e.isSee},{header:x((()=>[B])),default:x((()=>[h(b,{class:"scollbar"},{default:x((()=>[e.history.length&&"first"===e.activeName?(I(),D("div",{key:0,class:"history",onClick:a[0]||(a[0]=N((a=>e.show=!e.show),["stop"]))}," 历史记录 ")):w("",!0),e.history.length&&e.show?(I(),D("div",{key:1,class:"history-list",onClick:a[1]||(a[1]=N((a=>e.show=!0),["stop"]))},[P("div",R,T(e.baseSupplierData.basicInfo.supplierName)+T(e.history[0].supplierKey),1),(I(!0),D(U,null,_(e.history,((a,l)=>(I(),D("div",{class:"list",style:{"margin-top":"10px"},key:l},[P("div",K,[P("span",L,[M,P("span",null,T(a.applyNumber),1)]),P("span",A,[H,P("span",null,T(a.updator),1)]),P("span",$,[W,P("span",null,T(a.modifyDate),1)])]),(I(!0),D(U,null,_(a.supModyLogVos,((e,a)=>(I(),D(U,{key:a},[P("div",G,T(e.modifyName),1),P("div",J,[P("span",null,"原："+T("true"==e.oldValue?"是":"false"==e.oldValue?"否":e.oldValue),1)]),P("div",Q,[P("span",null,"现："+T("true"==e.newValue?"是":"false"==e.newValue?"否":e.newValue),1)])],64)))),128)),l<e.history.length-1?(I(),D("div",X)):w("",!0)])))),128))])):w("",!0),P("div",Y,[h(m,{modelValue:e.activeName,"onUpdate:modelValue":a[4]||(a[4]=a=>e.activeName=a)},{default:x((()=>[h(n,{label:"基础信息",name:"first"},{default:x((()=>[h(i,{disabled:"see"==e.type,"form-data":e.formData,"onUpdate:form-data":a[2]||(a[2]=a=>e.formData=a),"submit-form":e.baseSupplierData.basicInfo,"onUpdate:submit-form":a[3]||(a[3]=a=>e.baseSupplierData.basicInfo=a),ref:"editForm"},null,8,["disabled","form-data","submit-form"]),(I(!0),D(U,null,_(e.salersForm,((a,l)=>(I(),D("div",{class:"person-box",key:l},[h(i,{disabled:"see"==e.type,"form-data":e.salersForm[l],"onUpdate:form-data":a=>e.salersForm[l]=a,"submit-form":e.baseSupplierData.basicInfo.salers[l],"onUpdate:submit-form":a=>e.baseSupplierData.basicInfo.salers[l]=a,ref:e.setItemRef},null,8,["disabled","form-data","onUpdate:form-data","submit-form","onUpdate:submit-form"]),e.salersForm.length>1?(I(),D("img",{key:0,class:"person-trash",src:V,alt:"",onClick:a=>e.delPerson(l)},null,8,Z)):w("",!0)])))),128))])),_:1}),h(n,{label:"资质信息",name:"second"},{default:x((()=>[h(b,{class:"scollbar"},{default:x((()=>[h(u,{"table-data":e.baseSupplierData.basicInfo.credentials,columns:e.columns,draggable:!1,optionShow:!1},null,8,["table-data","columns"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])])),_:1})])),_:1},8,["isEdit"])])}],["__scopeId","data-v-035dd532"]]);export{ee as default};
