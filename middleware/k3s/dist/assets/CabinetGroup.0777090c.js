var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,o=(t,a,s)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[a]=s,l=(e,t)=>{for(var a in t||(t={}))r.call(t,a)&&o(e,a,t[a]);if(s)for(var a of s(t))i.call(t,a)&&o(e,a,t[a]);return e};import{_ as m}from"./BaseStencil.46c3d678.js";import{d as n,g as p}from"./index.4384aed0.js";import{r as c,_ as u}from"./index.ab904951.js";import{e as d,S as b,B as f,g as j,j as y,n as h,D as v,t as g,o as C,a5 as k,w}from"./@vue.23a4bd1a.js";import{_ as x}from"./BaseForm.bc55ad6b.js";import{u as F}from"./vue-router.91336ba9.js";import{s as O,i as S}from"./businessRule.60794e55.js";import{u as P}from"./vuex.c868d4e0.js";import"./BaseTable.36f55649.js";import"./sortablejs.621e50ab.js";import"./lodash.d7ab6f48.js";import"./dayjs.bad04745.js";import"./element-resize-detector.5b0b5621.js";import"./batch-processor.94093b2a.js";import"./axios.7b768d2b.js";import"./echarts.e8cef18b.js";import"./tslib.34a40861.js";import"./zrender.5bef55a0.js";import"./vue3-print-nb.eccf419a.js";import"./element-plus.b44d97a8.js";import"./resize-observer-polyfill.d4249adb.js";import"./normalize-wheel.1d574cd1.js";import"./mitt.32ebca9f.js";import"./async-validator.1fa0d626.js";import"./@popperjs.192dcd39.js";import"./vue.6d04e91d.js";import"./nprogress.8b4927f9.js";import"./default-passive-events.74004992.js";import"./TempHtml.vue_vue&type=script&lang.67ba229f.js";function z(e,t,a){const s={columns:[{type:"index",title:"序号",formConfig:{width:50}},{title:"门店",key:"mechanismName"},{title:"柜组编号",key:"code"},{title:"柜组名称",key:"name",width:180,formConfig:{"show-overflow-tooltip":!1}},{title:"操作",key:"options",render:e=>[d(f("el-button"),{type:"text",onClick:()=>{const t=e.uuid;c.push({path:"/system/cabinet-group/detail",query:{uuid:t}})}},{default:()=>[b("查看")]}),d(f("el-button"),{type:"text",onClick:()=>{const t=e.uuid;c.push({path:"/system/cabinet-group/edit",query:{uuid:t}})}},{default:()=>[b("编辑")]}),d(f("el-button"),{type:"text",style:"color:#f56c6c",onClick:()=>{const t=e.uuid;r(t)}},{default:()=>[b("删除")]})]}]},r=async e=>{try{await n(e),a.value.select()}catch(t){return t}};return{form:{inline:!0,labelWidth:"100px",list:[{type:"INPUT",key:"code",placeholder:"柜组编号"},{type:"INPUT",key:"name",placeholder:"柜组名称"},{type:"SELECT",key:"mechanismUuid",props:{label:"name",value:"uuid"},list:()=>t.value,placeholder:"门店"}]},tableConfig:s}}var T={name:"CabinetGroup",components:{BaseStencil:m,BaseForm:x},setup(e,o){const m=F(),n=j(null),c=P(),u=j([]),d=y({isClear:!1,loading:!1,tableData:[],deepSearchTable:z(0,u,n),submitForm:{"page.currentPage":1,"page.pageSize":10,isFirst:0,mechanismUuid:[]},columns:[]}),b=async()=>{let e=d.submitForm,{mechanismUuid:t}=e,a=((e,t)=>{var a={};for(var o in e)r.call(e,o)&&t.indexOf(o)<0&&(a[o]=e[o]);if(null!=e&&s)for(var o of s(e))t.indexOf(o)<0&&i.call(e,o)&&(a[o]=e[o]);return a})(e,["mechanismUuid"]);t=O(t);let o=await c.dispatch("common/mechanism");1==o.length&&(t=o[0].uuid);let m=l({mechanismUuid:t},a);p(m).then((e=>{d.submitForm.currentPage=e.currentPage,d.submitForm.pageSize=e.pageSize,d.tableData=e.list,d.submitForm.total=e.totalElements}))};return h((()=>{(async()=>{try{u.value=await c.dispatch("common/mechanism"),S(d.submitForm,u.value)}catch(e){return e}})()})),v((()=>{b()})),f=l({findList:u},g(d)),t(f,a({getList:b,handleClick:function(){m.push({name:"CabinetGroupEdit"})},form:n}));var f}};const U={class:"supplier"},_=b("新增柜组");var B=u(T,[["render",function(e,t,a,s,r,i){const o=f("el-button"),l=m;return C(),k("div",U,[d(l,{"form-data":e.deepSearchTable.form,"submit-form":e.submitForm,"onUpdate:submit-form":t[0]||(t[0]=t=>e.submitForm=t),class:"base-stencil","table-data":e.tableData,columns:e.deepSearchTable.tableConfig.columns,pagination:e.submitForm,options:!0,select:s.getList,ref:"form",isClear:e.isClear},{buttons:w((()=>[d(o,{type:"primary",size:"small",onClick:s.handleClick},{default:w((()=>[_])),_:1},8,["onClick"])])),_:1},8,["form-data","submit-form","table-data","columns","pagination","select","isClear"])])}],["__scopeId","data-v-fa53ec00"]]);export{B as default};
