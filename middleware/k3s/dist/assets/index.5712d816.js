var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,l=(a,t,o)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):a[t]=o;import{_ as i}from"./SubmitButton.99d990fd.js";import{_ as d}from"./BaseTable.36f55649.js";import{_ as n}from"./BaseCard.46de0c24.js";import{s as c}from"./index.41a8010a.js";import{b as p}from"./vue-router.91336ba9.js";import{u as b,m}from"./vuex.c868d4e0.js";import{_ as u}from"./element-plus.b44d97a8.js";import{_ as f}from"./lodash.d7ab6f48.js";import{h as y,j,e as h,B as g,S as v,Z as k,D as C,t as w,o as x,a5 as D,w as O,a6 as _,a9 as z,aa as B}from"./@vue.23a4bd1a.js";import{_ as I}from"./index.ab904951.js";import"./sortablejs.621e50ab.js";import"./element-resize-detector.5b0b5621.js";import"./batch-processor.94093b2a.js";import"./public.9c1d8f39.js";import"./axios.7b768d2b.js";import"./resize-observer-polyfill.d4249adb.js";import"./dayjs.bad04745.js";import"./normalize-wheel.1d574cd1.js";import"./mitt.32ebca9f.js";import"./async-validator.1fa0d626.js";import"./@popperjs.192dcd39.js";import"./vue.6d04e91d.js";import"./echarts.e8cef18b.js";import"./tslib.34a40861.js";import"./zrender.5bef55a0.js";import"./vue3-print-nb.eccf419a.js";import"./nprogress.8b4927f9.js";import"./default-passive-events.74004992.js";var T={name:"DictinaryEdit",components:{BaseCard:n,SubmitButton:i,BaseTable:d},setup(){const e=p(),i=b(),d=m("common",["dict"]),n=y(d.dict.bind({$store:i})),x=(e,a,t)=>{e[a]=t},D=j({data:{},tableData:[],baseTable:null,tableCache:null,cache:"",tableHeight:500,columns:[{title:"序号",type:"index",key:"index",formConfig:{width:50}},{title:"字段值",key:"key",render:e=>!1!==e.updatable?h(g("el-input"),{"model-value":e.key,onInput:a=>x(e,"key",a),onChange:a=>x(e,"key",a),placeholder:"请输入内容",maxlength:"100",size:"small",clearable:!0},null):h("div",null,[e.key])},{title:"医保对应编码",key:"code",render:e=>!1!==e.updatable?h(g("el-input"),{"model-value":e.code,onInput:a=>x(e,"code",a),onChange:a=>x(e,"code",a),placeholder:"请输入内容",maxlength:"100",clearable:!0},null):h("div",null,[e.key])},{title:"操作",key:"options",width:100,render:(e,a,t,o)=>!1!==e.deletable?h(g("el-button"),{type:"text",onClick:e=>{(e=>{D.data.data.splice(e,1)})(o)},class:"delete"},{default:()=>[v("删除")]}):""}],close:!1,config:{size:"medium"}});k((()=>{D.tableHeight=window.innerHeight-220})),C((()=>{if((()=>{switch(e.query.key){case"unit":4!==D.columns.length&&D.columns.splice(2,0,D.tableCache);break;default:4===D.columns.length&&(D.tableCache=D.columns.splice(2,1)[0])}})(),D.cache!==e.query.key){D.cache=e.query.key;let a=f.find(n.value,{key:e.query.key});a.data.forEach(((e,a)=>{e.index=a+1})),D.data=a,D.tableData=f.cloneDeep(a.data)}}));return O=((e,a)=>{for(var t in a||(a={}))s.call(a,t)&&l(e,t,a[t]);if(o)for(var t of o(a))r.call(a,t)&&l(e,t,a[t]);return e})({},w(D)),a(O,t({handleClick:async()=>{let e=!0;if(D.data.data.forEach((a=>{a.key||(e=!1)})),!e)return u.error("请填写完整信息"),!1;await c(D.data),D.close=!0},dragabelChange:({newIndex:e,oldIndex:a})=>{const t=D.data.data.splice(a,1)[0];D.data.data.splice(e,0,t),D.baseTable.elTable.doLayout()}}));var O}};const E={id:"tab",class:"dictinaryEdit"},P=(e=>(z("data-v-f86d5fb6"),e=e(),B(),e))((()=>_("div",{class:"title"},"字典管理详情",-1))),q={class:"option"},S=v(" 保存 ");var H=I(T,[["render",function(e,a,t,o,s,r){const l=i,c=d,p=n;return x(),D("div",E,[h(p,{close:e.close,route:{path:"/system/system-config/dictinary"}},{header:O((()=>[P,_("div",q,[h(l,{size:"small",config:e.config,onClick:o.handleClick},{default:O((()=>[S])),_:1},8,["config","onClick"])])])),default:O((()=>[h(c,{ref:"baseTable",add:{show:!0},columns:e.columns,tableData:e.data.data,"onUpdate:tableData":a[0]||(a[0]=a=>e.data.data=a),onDraggableChange:o.dragabelChange,draggable:!0,formConfig:{rowKey:"index"},"class-id":"tab","reduce-num":71},null,8,["columns","tableData","onDraggableChange"])])),_:1},8,["close"])])}],["__scopeId","data-v-f86d5fb6"]]);export{H as default};
